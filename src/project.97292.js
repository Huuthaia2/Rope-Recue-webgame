window.__require=function t(e,n,i){function o(s,r){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){return o(e[s][1][t]||t)},d,d.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({AdItem:[function(t,e,n){"use strict";cc._RF.push(e,"d8ef7SEpZ5BFY8DDFqZgwBp","AdItem"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/SpriteUtil"),o=t("./AdPartAManager"),a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adImg=null,e.adName=null,e.redPoint=null,e.newPoint=null,e.hotPoint=null,e.adData={},e}return __extends(e,t),e.prototype.init=function(t,e){t&&(this.adData=t,i.default.LoadOnlineImage(this.adImg,t.img),this.adName&&(this.adName.string=t.title),this.node.off(cc.Node.EventType.TOUCH_END),this.node.on(cc.Node.EventType.TOUCH_END,function(){var n=t.appid,i=t.path;o.default.INST.adPartAClick(n,e,i)},this))},e.prototype.clickAction=function(){},__decorate([r(cc.Sprite)],e.prototype,"adImg",void 0),__decorate([r(cc.Label)],e.prototype,"adName",void 0),__decorate([r(cc.Node)],e.prototype,"redPoint",void 0),__decorate([r(cc.Node)],e.prototype,"newPoint",void 0),__decorate([r(cc.Node)],e.prototype,"hotPoint",void 0),e=__decorate([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{"../utils/SpriteUtil":"SpriteUtil","./AdPartAManager":"AdPartAManager"}],AdNode:[function(t,e,n){"use strict";cc._RF.push(e,"e42c8P9nMlL9YK6YiSAWNXM","AdNode"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./AdPartAManager"),o=t("./AdItem"),a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageLoc=1,e.adItems=[],e}return __extends(e,t),e.prototype.onEnable=function(){var t=this;i.default.INST.getAdData(6).forEach(function(e,n){n>=t.adItems.length||t.adItems[n].getComponent(o.default).init(e,t.pageLoc)})},__decorate([r({type:cc.Integer,tooltip:"\u5bfc\u6d41\u4f4d\u6240\u5728\u7684\u4f4d\u7f6e 1:\u9996\u9875\uff0c2:\u6e38\u620f\u4e2d\u5fc3\u9875\u9762\uff0c3:\u6210\u529f\u9875\u9762\uff0c4\uff1a\u5931\u8d25\u9875\u9762\uff0c5\uff1a\u6e38\u620f\u754c\u9762, 6: \u8bbe\u7f6e\u754c\u9762,7:\u62bd\u5c49\u9875\u9762"})],e.prototype,"pageLoc",void 0),__decorate([r({type:[cc.Node],tooltip:"ad\u5217\u8868"})],e.prototype,"adItems",void 0),e=__decorate([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{"./AdItem":"AdItem","./AdPartAManager":"AdPartAManager"}],AdPartAList:[function(t,e,n){"use strict";cc._RF.push(e,"f9ba9Rz9eVKi7i9r0wsytF7","AdPartAList"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./AdPartAManager"),o=t("./AdItem"),a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adItemPrefabs=[],e.adData=[],e.adIndexFrom=0,e.adCount=8,e.pageLoc=2,e.isAnim=!1,e}return __extends(e,t),e.prototype.onLoad=function(){(!this.adItemPrefabs||this.adItemPrefabs.length<=0)&&console.error("[AdPartAList.onLoad]\u5e7f\u544a\u9884\u5236\u4ef6\u672a\u8d4b\u503c\uff01adItemPrefab:"+this.adItemPrefabs)},e.prototype.start=function(){var t=this;this.scheduleOnce(function(){t.initAdData(),t.addAdItemToList()},1)},e.prototype.updateAd=function(){this.initAdData(),this.addAdItemToList()},e.prototype.initAdData=function(){var t=i.default.INST.getAllAdDataList();!t||t.length<=0?console.warn("[AdPartAList.initAdData]\u5e7f\u544a\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5\uff01adLoc:"+this.pageLoc+",adData;"+JSON.stringify(t)):(this.adData=t,2==this.pageLoc&&(this.adCount=9,this.adData=i.default.INST.getAdData(this.adCount)),7==this.pageLoc&&(this.adCount=t.length))},e.prototype.addAdItemToList=function(){if(this.adData){this.node.destroyAllChildren();var t=this.getComponent(cc.Layout);t.type==cc.Layout.Type.HORIZONTAL&&(this.node.width=t.paddingLeft+t.paddingRight+(this.adCount-1)*t.spacingX+this.adCount*this.adItemPrefabs[0].width);for(var e,n,i=this.adData.length,a=this.adItemPrefabs.length,s=null,r=this.adIndexFrom;r<this.adCount+this.adIndexFrom;r++){if(r>=i){console.warn("[AdPartAList.addAdItemToList]\u7d22\u5f15\u8d8a\u754c\uff0c\u8bf7\u68c0\u67e5\uff01i:"+r+",adLength:"+i);break}(e=cc.instantiate(this.adItemPrefabs[r%a])).active=!0,e.setPosition(cc.v2()),(n=e.getComponent(o.default))?(s=this.adData[r],n.init(s,this.pageLoc),this.node.addChild(e),this.isAnim&&(r%2==0?e.runAction(cc.sequence(cc.rotateTo(.9,15),cc.rotateTo(.9,-15),cc.rotateTo(1,0),cc.rotateTo(1,0),cc.rotateTo(1,0),cc.rotateTo(1,0)).repeatForever()):e.runAction(cc.sequence(cc.rotateTo(1,0),cc.rotateTo(1,0),cc.rotateTo(1,0),cc.rotateTo(.9,15),cc.rotateTo(.9,-15),cc.rotateTo(1,0)).repeatForever()))):console.warn("[AdPartList.addItemsToList]\u811a\u672c\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\uff01")}}else console.warn("[AdPartList.addItemsToList]\u5e7f\u544a\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5\uff01")},__decorate([r({type:[cc.Node]})],e.prototype,"adItemPrefabs",void 0),__decorate([r({tooltip:"\u4ece\u7b2c\u51e0\u4e2a\u5e7f\u544a\u5f00\u59cb\u663e\u793a\uff0c\u4ece0\u5f00\u59cb"})],e.prototype,"adIndexFrom",void 0),__decorate([r({tooltip:"\u663e\u793a\u51e0\u4e2a\u5e7f\u544a,\u6e38\u620f\u4e2d\u5fc3\u4f1a\u663e\u793a\u5168\u90e8\u7684\u5bfc\u6d41\u4f4d"})],e.prototype,"adCount",void 0),__decorate([r({type:cc.Integer,tooltip:"\u5bfc\u6d41\u4f4d\u6240\u5728\u7684\u4f4d\u7f6e 1:\u9996\u9875\uff0c2:\u6e38\u620f\u4e2d\u5fc3\u9875\u9762\uff0c3:\u6210\u529f\u9875\u9762\uff0c4\uff1a\u5931\u8d25\u9875\u9762\uff0c5\uff1a\u6e38\u620f\u754c\u9762, 6: \u8bbe\u7f6e\u754c\u9762,7:\u62bd\u5c49\u9875\u9762"})],e.prototype,"pageLoc",void 0),__decorate([r({tooltip:"\u5e7f\u544a\u662f\u5426\u6643\u52a8\uff0c0 \u4e0d\u6643\u52a8 1 \u6643\u52a8"})],e.prototype,"isAnim",void 0),e=__decorate([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{"./AdItem":"AdItem","./AdPartAManager":"AdPartAManager"}],AdPartAManager:[function(t,e,n){"use strict";cc._RF.push(e,"009010t+7ND/oWksY/FcWrW","AdPartAManager"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Utils/Common/HttpUtils"),o=t("./MaiLiangUtil"),a=t("./GameCenter"),s=cc._decorator,r=s.ccclass,c=(s.property,"wx536c11325bb17a4e"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wx=window.wx,e.adDataReq={url:"https://xcxapi-hyh.715083.com/open/gg/info.json",method:"GET",params:{zdkey:"sszjbanner",mrkey:"default"}},e.shareDataReq={url:"https://xcxapi-hyh.715083.com/open/gg/info.json",method:"GET",params:{zdkey:"sszjshare",mrkey:"shareImg"}},e.onlineConfReq={url:"https://xcxapi-hyh.715083.com/open/data/config.json",method:"GET",params:{key:"sszjdata"}},e.saveUserDataReq={url:"https://xcxapi-hyh.715083.com/open/user/new/customdata.do",method:"POST",params:{data:{},authcode:"",appid:""}},e.getUserDataReq={url:"https://xcxapi-hyh.715083.com/open/user/new/customdata.json",method:"GET",params:{}},e.adIndex=0,e.getWxUserDataReq={url:"https://xcxapi-hyh.715083.com/open/user/auth.json",method:"GET",params:{code:"",appid:c}},e.reportWxUserReq={url:"https://xcxapi-hyh.715083.com/open/stats.do",method:"GET",params:{data:{appid:"",authcode:"",type:"",from:""}}},e}var s;return __extends(e,t),s=e,e.prototype.onLoad=function(){s.INST=this,this.wx?(this.reqAdData(),this.reqShareData(),this.reqOnlineConfData()):console.log("[AdPartAManager.onLoad]============== \u975e\u5fae\u4fe1\u5e73\u53f0\uff0c\u4e0d\u52a0\u8f7d\u5e7f\u544a\u6570\u636e ================")},e.prototype.reqAdData=function(){var t=this,e=this.adDataReq;i.default.requestSync(e.url,e.params,e.method,function(e){e?0===Number(e.code)?(t.adData=e,console.log(t.adData)):console.warn("[AdPartAManager.requestData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!msg:\u5e7f\u544a\u6570\u636e"):console.error("[AdPartAManager.requestData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5!msg:\u5e7f\u544a\u6570\u636e")},function(t){console.log("[AdPartAManager.requestData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!msg:\u5e7f\u544a\u6570\u636e")},function(t){})},e.prototype.reqShareData=function(){var t=this,e=this.shareDataReq;i.default.requestSync(e.url,e.params,e.method,function(e){e?0===Number(e.code)?(t.shareData=e,console.log(t.shareData)):console.warn("[AdPartAManager.requestData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!msg:\u5206\u4eab\u6570\u636e"):console.error("[AdPartAManager.requestData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5!msg:\u5206\u4eab\u6570\u636e")},function(t){console.log("[AdPartAManager.requestData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!msg:\u5206\u4eab\u6570\u636e")},function(t){})},e.prototype.reqOnlineConfData=function(){var t=this,e=this.onlineConfReq;i.default.requestSync(e.url,e.params,e.method,function(e){e?(t.onlineConfData=e,console.log(t.onlineConfData)):console.error("[AdPartAManager.requestData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5!msg:\u5728\u7ebf\u914d\u7f6e\u6570\u636e")},function(t){console.log("[AdPartAManager.requestData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!msg:\u5728\u7ebf\u914d\u7f6e\u6570\u636e")},function(t){})},e.prototype.adPartAClick=function(t,e,n,i){var s=this;if(void 0===i&&(i=!1),t&&e){o.default.openId&&o.default.openId;this.wx.navigateToMiniProgram({appId:t,path:n,success:function(e){s.wx&&s.wx.aldSendEvent("\u5bfc\u51fa",{success:!0,appId:t})},fail:function(e){var n=!1,i=0,o=!1;n=a.default.instance?a.default.instance.getIsAfterWinUI():n,i=a.default.instance?a.default.instance.getMissionIdx():i,o=a.default.instance?a.default.instance.getIsAfterHomeUI():o,console.error("[AdPartAManager.adPartAClick]\u8df3\u8f6c\u5c0f\u7a0b\u5e8f\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\uff01appId:"+t+",err:"+JSON.stringify(e))},complete:function(){s.wx&&s.wx.aldSendEvent("\u5bfc\u51fa",{click:!0,appId:t})}})}else console.warn("[AdPartAManager.adPartAClick]\u53c2\u6570\u9519\u8bef\uff01appId:"+t+",pageLoc:"+e)},e.prototype.getAdData=function(t){if(void 0===t&&(t=5),!this.adData)return[];var e=this.adData.data;if(!e||e.length<=0)return console.log("[AdPartAManager.getAdData]\u6ca1\u6709\u5e7f\u544a\u6570\u636e\u6216\u8005\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\uff01urlDatas:"+JSON.stringify(this.adData)),[];var n=e.length,i=this.adIndex;this.adIndex+=t,this.adIndex=this.adIndex%n;for(var o=[],a=i;a<i+t;a++)o.push(e[a%n]);return o},e.prototype.getAllAdDataList=function(){return this.adData&&this.adData.data?this.adData.data:[]},e.prototype.getRandomOneShareData=function(){if(!this.shareData||!this.shareData.data||this.shareData.data.length<=0)return{id:0,appid:"xxx",title:"xxx",path:"",img:"",custom:"",barcode:""};var t=this.shareData.length,e=Math.floor(Math.random()*t);return this.shareData[e]},e.prototype.getWxUserData=function(t){var e=this;t&&this.wx?(this.getWxUserDataReq.params={code:t,appid:c},i.default.requestSync(this.getWxUserDataReq.url,this.getWxUserDataReq.params,this.getWxUserDataReq.method,function(t){e.reportWxUser(t,c)},function(t){console.error("[AdPartAManager.reportUserData]\u8bf7\u6c42\u7684\u7532\u65b9\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!err:"+JSON.stringify(t))},function(){})):console.log("[AdPartAManager.reportUserData]\u53c2\u6570\u65e0\u6548\uff01param:"+t)},e.prototype.reportWxUser=function(t,e){var n=this.wx.getLaunchOptionsSync();if("yes"==n.query.fission){var o=n.query.channel;this.reportWxUserReq.params.data={appid:e,authcode:t.authcode,type:"fission",from:o||"default"}}else this.reportWxUserReq.params.data={appid:e,authcode:t.authcode,type:t.newreg?"newreg":"olduser",from:"default"};i.default.requestAsync(this.reportWxUserReq.url,this.reportWxUserReq.params,this.reportWxUserReq.method).catch(function(t){console.error("fail, err"+JSON.stringify(t))}).then(function(t){console.log("\u65b0\u7528\u6237\u4e0a\u4f20\u7edf\u8ba1\u6570\u636e\u5230\u670d\u52a1\u5668")})},e.prototype.getPageLocName=function(t){switch(t){case 1:return n.HOME_PAGE;case 2:return n.GAME_CENTER_PAGE;case 3:return n.SUCC_PAGE;case 4:return n.FAIL_PAGE;case 5:return n.MISSION_PAGE;case 6:return n.SETTING_PAGE;case 7:return n.DRAWER_PAGE;default:return console.error("\u9519\u8bef\uff0c\u672a\u77e5\u7684\u9875\u9762"),n.UNKOWN_ERROR_PAGE}},e.prototype.isShowExitBtnInHomePage=function(){return!(!this.onlineConfData||!this.onlineConfData.HomepageBack)&&Boolean(this.onlineConfData.HomepageBack)},e.prototype.isShowExportInHomePage=function(){return!(!this.onlineConfData||!this.onlineConfData.HomepageExport)&&Boolean(this.onlineConfData.HomepageExport)},e.prototype.isShowGameCenterInHomePage=function(){return!(!this.onlineConfData||!this.onlineConfData.HomepageGamebox)&&Boolean(this.onlineConfData.HomepageGamebox)},e.prototype.isShowGameCenterAftrtVideo=function(){return!1},e.prototype.isShowSkinBtnInHomePage=function(){return!0},e.prototype.isShowCheckInBtnInHomePage=function(){return!0},e.prototype.isShowBannerInHomePage=function(){return!1},e.prototype.getRefreshBannerTime=function(){if(!this.onlineConfData||!this.onlineConfData.WxbannerCT)return 3e4;var t=this.onlineConfData.WxbannerCT;return t=t||3e4,Number(t)/1e3},e.prototype.isShowGameCenterInSuccPage=function(t){if(!this.onlineConfData||!this.onlineConfData.MatchLevel)return!1;switch(Number(this.onlineConfData.NextToBox)){case 0:return this.onlineConfData.MatchLevel.indexOf(t)<0;case 1:return!0;case 2:default:return!1}},e.prototype.isShowGameCenterInFailPage=function(){return!(!this.onlineConfData||!this.onlineConfData.RestartToBox)&&Boolean(this.onlineConfData.RestartToBox)},e.prototype.isShowOldHomePage=function(){return!this.onlineConfData||!this.onlineConfData.HomepageSwitch||0==Number(this.onlineConfData.HomepageSwitch)},e.prototype.isShowStaticAdInHomePage=function(t){return!(!this.onlineConfData||!this.onlineConfData.channelList||this.onlineConfData.channelList.length<=0)&&this.onlineConfData.channelList.indexOf(t)>=0},e.INST=null,e=s=__decorate([r],e)}(cc.Component);n.default=l,n.HOME_PAGE="\u4e3b\u9875",n.CHAPTER_SETLET_PAGE="\u7ae0\u8282\u9009\u62e9\u9875\u9762",n.MISSION_SETLET_PAGE="\u5173\u5361\u9009\u62e9\u9875\u9762",n.GAME_CENTER_PAGE="\u6e38\u620f\u4e2d\u5fc3\u9875\u9762",n.SUCC_PAGE="\u6e38\u620f\u6210\u529f\u9875\u9762",n.FAIL_PAGE="\u6e38\u620f\u5931\u8d25\u9875\u9762",n.MISSION_PAGE="\u5173\u5361\u9875\u9762",n.SETTING_PAGE="\u8bbe\u7f6e\u9875\u9762",n.DRAWER_PAGE="\u62bd\u5c49\u9875\u9762",n.SKIN_PAGE="\u76ae\u80a4\u9875\u9762",n.CHALLENGE_PAGE="\u6311\u6218\u9875\u9762",n.UNKOWN_ERROR_PAGE="\u672a\u77e5\u7684\u9875\u9762",n.EXIT_BTN="\u9000\u51fa\u6309\u94ae",n.SETTING_BTN="\u8bbe\u7f6e\u6309\u94ae",n.CHALLENGE_BTN="\u6311\u6218\u6309\u94ae",n.CHECKIN_BTN="\u7b7e\u5230\u6309\u94ae",n.SKIN_BTN="\u9996\u9875\u76ae\u80a4\u6309\u94ae",n.GAME_CENTER_BTN="\u6e38\u620f\u4e2d\u5fc3\u6309\u94ae",n.DOUBLE_START_BTN="\u53cc\u500d\u5f00\u5c40\u6309\u94ae",n.START_BTN="\u5f00\u59cb\u6309\u94ae",n.BACK_BTN="\u8fd4\u56de\u6309\u94ae",n.PAUSE_BTN="\u6682\u505c\u6309\u94ae",n.SHOW_BTN="\u70ab\u8000\u6309\u94ae",n.SKIP_BY_VIDEO_BTN="\u89c6\u9891\u8df3\u8fc7\u6309\u94ae",n.RESTART_BTN="\u91cd\u65b0\u5f00\u59cb\u6309\u94ae",n.NEXT_LVL_BTN="\u4e0b\u4e00\u5173\u6309\u94ae",cc._RF.pop()},{"../Utils/Common/HttpUtils":"HttpUtils","./GameCenter":"GameCenter","./MaiLiangUtil":"MaiLiangUtil"}],AdPartAScrollView:[function(t,e,n){"use strict";cc._RF.push(e,"a5c1cTxlGZBsKsUxePP29hn","AdPartAScrollView"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list1=null,e.list2=null,e.isAutoScroll=!0,e.direction=1,e.listStartPos=new cc.Vec2,e.listEndPos=new cc.Vec2,e.scrollSpeed=100,e.isReady=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.isAutoScroll?this.list2.active=!0:this.list2.active=!1},e.prototype.onEnable=function(){var t=this;this.scheduleOnce(function(){var e=t.list1.width;1==t.direction&&(t.listStartPos=cc.v2(t.list1.x+e,t.list1.y),t.list2.setPosition(t.listStartPos),t.listEndPos=cc.v2(t.list1.x-e,t.list1.y)),t.isReady=!0},1)},e.prototype.update=function(t){if(this.isAutoScroll&&this.isReady){switch(this.direction){case 1:this.list1.x<this.listEndPos.x&&this.list1.setPosition(this.listStartPos),this.list2.x<this.listEndPos.x&&this.list2.setPosition(this.listStartPos);break;case 2:this.list1.x>this.listEndPos.x&&this.list1.setPosition(this.listStartPos),this.list2.x>this.listEndPos.x&&this.list2.setPosition(this.listStartPos);break;case 3:this.list1.y>this.listEndPos.y&&this.list1.setPosition(this.listStartPos),this.list2.y>this.listEndPos.y&&this.list2.setPosition(this.listStartPos);break;case 4:this.list1.y<this.listEndPos.y&&this.list1.setPosition(this.listStartPos),this.list2.y<this.listEndPos.y&&this.list2.setPosition(this.listStartPos)}var e=1;switch(this.direction){case 1:case 4:e=-1;break;case 2:case 3:e=1}var n=1==this.direction?cc.moveBy(t,new cc.Vec2(e*this.scrollSpeed*t,0)):cc.moveBy(t,new cc.Vec2(0,e*this.scrollSpeed*t)),i=1==this.direction?cc.moveBy(t,new cc.Vec2(e*this.scrollSpeed*t,0)):cc.moveBy(t,new cc.Vec2(0,e*this.scrollSpeed*t));this.list1.runAction(n),this.list2.runAction(i)}},e.prototype.onDisable=function(){this.isReady=!1},__decorate([a(cc.Node)],e.prototype,"list1",void 0),__decorate([a(cc.Node)],e.prototype,"list2",void 0),__decorate([a],e.prototype,"isAutoScroll",void 0),__decorate([a({tooltip:"\u6eda\u52a8\u7684\u65b9\u5411\uff0c1\u4e3a\u6c34\u5e73\u5411\u5de6\u65b9\u5411\uff0c2\u4e3a\u6c34\u5e73\u5411\u53f3\u65b9\u5411\uff0c 3\u4e3a\u5782\u76f4\u5411\u4e0a\u65b9\u5411\uff0c 4\u4e3a\u5782\u76f4\u5411\u4e0b\u65b9\u5411\uff0c \u9ed8\u8ba4\u4e3a1\u6c34\u5e73\u5411\u5de6\u65b9\u5411"})],e.prototype,"direction",void 0),__decorate([a(cc.Vec2)],e.prototype,"listStartPos",void 0),__decorate([a(cc.Vec2)],e.prototype,"listEndPos",void 0),__decorate([a({tooltip:"\u6eda\u52a8\u901f\u5ea6"})],e.prototype,"scrollSpeed",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],AdScrollView:[function(t,e,n){"use strict";cc._RF.push(e,"b8d46y6gw9FlKfABqNESSPl","AdScrollView"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.tag=1,e.dir=1,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.on("touchstart",this._touchstart,this),this.node.on("touchend",this._touchend,this),this.node.on("touchcancel",this._touchend,this)},e.prototype._touchstart=function(){this.node.stopAllActions(),this.unscheduleAllCallbacks()},e.prototype._touchend=function(){var t=this;this.node.stopAllActions(),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.curOffset=Math.abs(t.scrollView.getScrollOffset().x),0!=t.curOffset?t.curOffset!=t.maxOffset&&t.dir>0?t.rightScroll():t.leftScroll():t.rightScroll()},1)},e.prototype.start=function(){this.maxOffset=this.scrollView.getMaxScrollOffset().x},e.prototype.onEnable=function(){this.node.stopAllActions(),this.scrollView.scrollToPercentHorizontal(0,0)},e.prototype.rightScroll=function(){var t=this;this.tag=0,this.dir=1,this.curOffset=Math.abs(this.scrollView.getScrollOffset().x);var e=(this.maxOffset-this.curOffset)/this.maxOffset;this.time=10*e,this.scrollView.scrollToPercentHorizontal(1,this.time,!1),this.schedule(function(){t.tag=-1,t.dir=-1},5,0,this.time+1)},e.prototype.leftScroll=function(){var t=this;this.tag=0,this.dir=-1,this.curOffset=Math.abs(this.scrollView.getScrollOffset().x);var e=this.curOffset/this.maxOffset;this.time=10*e,this.scrollView.scrollToPercentHorizontal(0,this.time,!1),this.schedule(function(){t.tag=1,t.dir=1},5,0,this.time+1)},e.prototype.update=function(){1==this.tag&&this.rightScroll(),-1==this.tag&&this.leftScroll()},e.prototype.onDisable=function(){this.scrollView.scrollToPercentHorizontal(0,0),this.tag=1,this.node.stopAllActions(),this.scrollView.stopAutoScroll()},__decorate([a(cc.ScrollView)],e.prototype,"scrollView",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],AldTracker:[function(t,e,n){"use strict";cc._RF.push(e,"ea9dbmEi85EXKneD2LyO7nb","AldTracker"),Object.defineProperty(n,"__esModule",{value:!0});var i=window.wx,o=function(){function t(){i&&i.aldSendEvent||console.error("no ald")}return t.prototype.onLogin=function(t){},t.prototype.onBannerShown=function(t,e){i&&i.aldSendEvent&&i.aldSendEvent("bannerShown",{posId:e})},t.prototype.onVideoAdPlayed=function(t,e){i&&i.aldSendEvent&&i.aldSendEvent("videoPlayed",{videoId:e})},t.prototype.onEvent=function(t,e,n){i&&i.aldSendEvent&&i.aldSendEvent(e,{key:n})},t}();n.default=o,cc._RF.pop()},{}],AnimatedSprite:[function(t,e,n){"use strict";cc._RF.push(e,"01a9erQ6AdKsZrhkSYx9sGd","AnimatedSprite"),cc.Class({extends:cc.Component,properties:{atlas:{default:null,type:cc.SpriteAtlas,tooltip:"\u4e0d\u80fd\u4e3a\u7a7a, \u5185\u542b\u7684\u5e27\u6309\u540d\u5b57\u6392\u5e8f"},loop:!0,speed:1,sample:{default:15,tooltip:"\u52a8\u753b\u7684\u5e27\u901f\u7387"},playOnLoad:!0,autoDestroy:!1,autoActive:!1},onLoad:function(){this._initAni()},play:function(){this.animation&&(this.node.active=!0,this.animation.play("default").speed=this.speed)},onEnable:function(){this.animation.on("finished",this.onFinished,this),this.playOnLoad&&this.play()},onDisable:function(){this.animation.off("finished",this.onFinished,this)},onFinished:function(){this.autoActive&&(this.node.active=!1),this.autoDestroy},_initAni:function(){var t=this.node;if(this.atlas){var e=this.atlas.getSpriteFrames(),n=t.addComponent(cc.Animation);t.addComponent(cc.Sprite);var i=cc.AnimationClip.createWithSpriteFrames(e,this.sample);this.loop?i.wrapMode=cc.WrapMode.Loop:i.wrapMode=cc.WrapMode.Normal,n.addClip(i,"default"),this.animation=n}else cc.warn("atlas is null.")}}),cc._RF.pop()},{}],Blood:[function(t,e,n){"use strict";cc._RF.push(e,"c3966QXWB1E+pQPNFlCYUdS","Blood"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/MathUtil"),o=cc._decorator,a=o.ccclass,s=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){var t=this,e=Number(i.default.getRandomNumber(1,3).toFixed(2));this.node.scale=e;var n=-150*e,o=cc.v2(i.default.getRandomInteger(-20,20),i.default.getRandomInteger(-20,20));this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(.3,o),cc.moveBy(1.5,cc.v2(0,n))),cc.spawn(cc.moveBy(1.5,cc.v2(0,n)),cc.fadeOut(.3)),cc.callFunc(function(){t.node.active=!1,t.node.destroy()})))},e=__decorate([a],e)}(cc.Component));n.default=s,cc._RF.pop()},{"../utils/MathUtil":"MathUtil"}],Bullet:[function(t,e,n){"use strict";cc._RF.push(e,"ad721tAIFhOV79R8XFH4kQa","Bullet"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.stopAllActions();var e=cc.Vec2.RIGHT.mul(400);e.rotateSelf(-this.node.rotation*Math.PI/180),this.node.runAction(cc.moveBy(1,e).repeatForever()),this.scheduleOnce(function(){t.node.active=!1,t.destroy()},7)},e.prototype.onBeginContact=function(t,e,n){this.node.active=!1,this.node.destroy()},e.prototype.onEndContact=function(t,e,n){},e=__decorate([o],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],ChallengeUi:[function(t,e,n){"use strict";cc._RF.push(e,"e2ffcPllV5JYK5iTueJX6mt","ChallengeUi"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./mission/TimeMissionMgr"),o=t("./mission/HardMissMgr"),a=t("./MusicMgr"),s=t("./utils/Common/GameUtil"),r=t("./ad/AdPartAManager"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeChallenge=null,e.hardChallenge=null,e.player=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.player=window.GameControl.newPlayer},e.prototype.onEnable=function(){var t=window.wx;t&&t.aldShowEvent(r.CHALLENGE_PAGE),this.schedule(function(){s.default.showBannerInChapterOrChallenge()},r.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},e.prototype.onDisable=function(){s.default.hideWxBanner()},e.prototype.homeAction=function(){this.node.active=!1,window.GameControl.zhuye.node.active=!0,this.timeChallenge.active=!1,this.hardChallenge.active=!1,a.default.instance.playBtn()},e.prototype.timeModeAction=function(){this.timeChallenge.active=!0;var t=this.player.getCurTimeChallengeMissionIdx();i.default.instance.loadMission(t),this.node.active=!1,a.default.instance.playBtn()},e.prototype.hardModeAction=function(){window.GameControl.newPlayer.m_iCompleteGuanNum;this.node.active=!1,this.hardChallenge.active=!0;var t=this.player.getCurHardMissionIdx();o.default.instance.loadMission(t),a.default.instance.playBtn()},__decorate([d(cc.Node)],e.prototype,"timeChallenge",void 0),__decorate([d(cc.Node)],e.prototype,"hardChallenge",void 0),e=__decorate([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./MusicMgr":"MusicMgr","./ad/AdPartAManager":"AdPartAManager","./mission/HardMissMgr":"HardMissMgr","./mission/TimeMissionMgr":"TimeMissionMgr","./utils/Common/GameUtil":"GameUtil"}],ChapterUi:[function(t,e,n){"use strict";cc._RF.push(e,"0b192r5YcJEL7TwdfUQYJnX","ChapterUi"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./MusicMgr"),o=t("./utils/Common/GameUtil"),a=t("./ad/AdPartAManager"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finishedChapter=null,e.starsProg=null,e.nextChapter=null,e.beginNextChapter=null,e}return __extends(e,t),e.prototype.onEnable=function(){this.schedule(function(){o.default.showBannerInChapterOrChallenge()},a.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},e.prototype.onDisable=function(){o.default.hideWxBanner()},e.prototype.showView=function(t){this.finishedChapter.string=String(t);for(var e=0,n=12*(t-1)+1;n<=12*t;n++)window.GameControl.newPlayer.m_mapLevelStar[String(n)]&&(e+=Number(window.GameControl.newPlayer.m_mapLevelStar[n]));this.starsProg.string=e+"/36",this.nextChapter.string=String(t+1),this.beginNextChapter.string=this.nextChapter.string,this.node.active=!0},e.prototype.nextChapterAction=function(){i.default.instance.playBtn(),window.GameControl.youxiUi.m_iGuanIndex++,window.GameControl.youxiUi.updatethis(window.GameControl.youxiUi.m_iGuanIndex),this.node.active=!1},e.prototype.homeAction=function(){this.node.active=!1,window.GameControl.zhuye.node.active=!0,i.default.instance.playBtn()},__decorate([c(cc.Label)],e.prototype,"finishedChapter",void 0),__decorate([c(cc.Label)],e.prototype,"starsProg",void 0),__decorate([c(cc.Label)],e.prototype,"nextChapter",void 0),__decorate([c(cc.Label)],e.prototype,"beginNextChapter",void 0),e=__decorate([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./MusicMgr":"MusicMgr","./ad/AdPartAManager":"AdPartAManager","./utils/Common/GameUtil":"GameUtil"}],CheckInItem:[function(t,e,n){"use strict";cc._RF.push(e,"135edRXX2VOL6sOzUy+fNQ9","CheckInItem"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.day=null,e.rewardCount=null,e.checkedInMask=null,e.today=null,e.coinCount=0,e}return __extends(e,t),e.prototype.init=function(t,e,n){this.coinCount=t,this.day.node.active=!e,this.today.active=e,this.rewardCount.string=String(t),this.checkedInMask.node.active=n},e.prototype.checkIn=function(t){void 0===t&&(t=1);var e=window.GameControl;e.newPlayer.coinNumber+=this.coinCount*t;var n=e.newPlayer.checkInTimes;e.newPlayer.checkInTimes=n+1,e.GameObject.Set_Local_Data(),this.checkedInMask.node.active=!0,e.zhuye.upDatethis()},__decorate([a(cc.Sprite)],e.prototype,"day",void 0),__decorate([a(cc.Label)],e.prototype,"rewardCount",void 0),__decorate([a(cc.Sprite)],e.prototype,"checkedInMask",void 0),__decorate([a(cc.Node)],e.prototype,"today",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],CheckInUI:[function(t,e,n){"use strict";cc._RF.push(e,"28370JOQ5hNFYRO2ddqowZp","CheckInUI"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./CheckInItem"),o=t("../MusicMgr"),a=t("../TgaPlatform"),s=cc._decorator,r=s.ccclass,c=s.property,l={1:{coin:300},2:{coin:400},3:{coin:500},4:{coin:600},5:{coin:700},6:{coin:800},7:{coin:900}},d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.checkInItems=[],e.player=null,e.todayItem=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.player=window.GameControl.newPlayer;var t=this.player.checkInTimes,e=null,n=null;for(var o in l)e=l[o],(n=this.checkInItems[Number(o)-1].getComponent(i.default)).init(e.coin,t==Number(o),t>Number(o)),this.isCheckedInToady()||t==Number(o)&&(this.todayItem=n)},e.prototype.isCheckedInToady=function(){var t=cc.sys.localStorage.getItem("checkedToday");return!!t&&(t=JSON.parse(t)).day==(new Date).toDateString()},e.prototype._getTodayReward=function(t){void 0===t&&(t=1),t<=0||this.isCheckedInToady()||(this.todayItem?(this.todayItem.checkIn(t),cc.sys.localStorage.setItem("checkedToday",JSON.stringify({day:(new Date).toDateString()}))):console.warn("\u4f4d\u7f6e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u7b7e\u5230\uff01"))},e.prototype.videoDoubleAction=function(){var t=this;this.isCheckedInToady()||a.showRewardAd({onReward:function(){t._getTodayReward(2),t.node.active=!1}})},e.prototype.noThankAction=function(){if(o.default.instance.playBtn(),this.node.active=!1,this.isCheckedInToady()){var t=window.wx;t&&t.showToast({title:"\u4eca\u65e5\u5df2\u7b7e\u5230",icon:"none",duration:2e3})}else this._getTodayReward()},__decorate([c({type:[cc.Node]})],e.prototype,"checkInItems",void 0),e=__decorate([r],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../TgaPlatform":"TgaPlatform","./CheckInItem":"CheckInItem"}],CocosUtil:[function(t,e,n){"use strict";cc._RF.push(e,"ab331Nh6z1CSKC7IUGV0a3v","CocosUtil"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.getRotateTar=function(t,e,n){var i=(t.x-e.x)*Math.cos(n)-(t.y-e.y)*Math.sin(n)+e.x,o=(t.x-e.x)*Math.sin(n)+(t.y-e.y)*Math.cos(n)+e.y;return cc.v2(i,o)},t.pointsAngle=function(t,e,n){var i=e.sub(t);if(!i.mag())return 0;var o=n.sub(t);return o.mag()?i.signAngle(o):0},t.getChildren=function(t){var e=this,n=[];return n=n.concat(t.children),t.children.forEach(function(t){n=n.concat(e.getChildren(t))}),n},t}();n.default=i,cc._RF.pop()},{}],CoinRewardUi:[function(t,e,n){"use strict";cc._RF.push(e,"086ddjic3dEk4JL7bYwfPXE","CoinRewardUi"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./ad/AdPartAManager"),o=t("./ChapterUi"),a=t("./mission/MissionMgr"),s=t("./utils/Common/GameUtil"),r=t("./MusicMgr"),c=t("./TgaPlatform"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curCoinNumber=null,e.gainCoinNumber=null,e.chapterUi=null,e.noBtn=null,e.missionReward=0,e.number=1,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.onEnable=function(){var t=this;s.default.hideWxBanner(),this.schedule(function(){s.default.showBannerInSucOrFail()},i.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1),this.curCoinNumber.string=String(window.GameControl.newPlayer.coinNumber),this.noBtn.active=!1,this.scheduleOnce(function(){t.noBtn.active=!0},1.5)},e.prototype.onDisable=function(){s.default.hideWxBanner(),this.unscheduleAllCallbacks()},e.prototype.showView=function(t){this.missionIdx=t;var e=t;this.missionReward=e,this.gainCoinNumber.string="+"+e,this.node.active=!0},e.prototype.homeAction=function(){this.node.active=!1,window.GameControl.GameObject.YouxiUi.active=!1,window.GameControl.zhuye.node.active=!0,window.GameControl.zhuye.upDatethis(),r.default.instance.playBtn()},e.prototype.videoAction=function(){var t=this;c.showRewardAd({onReward:function(){t._getCoinAnGoNext(2),t.node.active=!1}})},e.prototype.normalRewardAction=function(){r.default.instance.playBtn(),this._getCoinAnGoNext()},e.prototype._getCoinAnGoNext=function(t){if(void 0===t&&(t=1),this.node.active=!1,window.GameControl.newPlayer.coinNumber+=this.missionReward*t*a.default.instance.getRate(),window.GameControl.GameObject.Set_Local_Data(),this.curCoinNumber.string=String(window.GameControl.newPlayer.coinNumber),this.missionIdx%12!=0){var e=++window.GameControl.youxiUi.m_iGuanIndex;window.GameControl.youxiUi.node.active=!0,window.GameControl.youxiUi.updatethis(e)}else this.chapterUi.showView(this.missionIdx/12)},e.instance=null,__decorate([u(cc.Label)],e.prototype,"curCoinNumber",void 0),__decorate([u(cc.Label)],e.prototype,"gainCoinNumber",void 0),__decorate([u(o.default)],e.prototype,"chapterUi",void 0),__decorate([u(cc.Node)],e.prototype,"noBtn",void 0),e=n=__decorate([d],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./ChapterUi":"ChapterUi","./MusicMgr":"MusicMgr","./TgaPlatform":"TgaPlatform","./ad/AdPartAManager":"AdPartAManager","./mission/MissionMgr":"MissionMgr","./utils/Common/GameUtil":"GameUtil"}],CommonUtil:[function(t,e,n){"use strict";cc._RF.push(e,"d9fc9HLKxtC1JYUzo0Pbts8","CommonUtil"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.getRandomElesFromListNoRepeat=function(e,n){if(n<=0)return[];var i=e.slice(0),o=[];return t.getNumNoRepeat(0,i.length-1,n).forEach(function(t){o.push(i[t])}),o},t.getNumNoRepeat=function(t,e,n){if(n<=0)return[];if(e<=t)return[];if(n>=e-t+1){for(var i=[],o=t;o<=e;o++)i.push(o);return i}n=n>e-t+1?e-t+1:n;var a=[];do{var s=Math.floor(Math.random()*(e-t))+t;-1==a.indexOf(s)&&(a.push(s),n--)}while(n);return a},t.randomSort=function(t,e){return Math.random()>.5?-1:1},t.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},t}();n.default=i,cc._RF.pop()},{}],DengDaiUI:[function(t,e,n){"use strict";cc._RF.push(e,"924c9p48SJJyKALrHrayao1","DengDaiUI"),Object.defineProperty(n,"__esModule",{value:!0});var i,o=cc._decorator,a=o.ccclass,s=o.property;(function(t){t[t.NONE=0]="NONE",t[t.T1=1]="T1",t[t.T2=2]="T2"})(i=n.DengDaiType||(n.DengDaiType={}));var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node1=null,e.node2=null,e.recy1=null,e.t1Txt=null,e.round2=null,e.font2=null,e.digis2=[],e}var n;return __extends(e,t),n=e,e.prototype.onEnable=function(){var t=this;switch(n.type){case i.NONE:this.node1&&(this.node1.active=!1),this.node2&&(this.node2.active=!1);break;case i.T1:this.node1&&(this.node1.active=!0),this.node2&&(this.node2.active=!1);break;case i.T2:this.node1&&(this.node1.active=!1),this.node2&&(this.node2.active=!0)}switch(this.node.active=!0,n.type){case i.T1:this.recy1&&(this.recy1.stopAllActions(),this.recy1.runAction(cc.sequence(cc.rotateBy(.45,-180).easing(cc.easeSineIn()),cc.rotateBy(.55,-180).easing(cc.easeSineOut())).repeat(n.t1Miao)));var e=n.t1Miao;this.t1Txt&&this.t1Txt.node.runAction(cc.sequence(cc.callFunc(function(){return t.t1Txt.string="\u5269\u4f59\uff1a"+e--+"\u79d2"}),cc.delayTime(1)).repeat(n.t1Miao)),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(n.t1Miao),cc.callFunc(function(){return t.node.active=!1})));break;case i.T2:this.round2&&(this.round2.stopAllActions(),this.round2.runAction(cc.sequence(cc.scaleBy(.4,1.1),cc.scaleBy(.6,1/1.1)).easing(cc.easeSineOut()).repeat(3)));var o=3;this.font2&&this.font2.node.runAction(cc.sequence(cc.callFunc(function(){return t.font2.spriteFrame=t.digis2&&t.digis2[--o]}),cc.delayTime(1)).repeat(3)),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){return t.node.active=!1})))}},e.prototype.onDisable=function(){},e.prototype.start=function(){},e.type=i.T2,e.t1Miao=7,__decorate([s(cc.Node)],e.prototype,"node1",void 0),__decorate([s(cc.Node)],e.prototype,"node2",void 0),__decorate([s(cc.Node)],e.prototype,"recy1",void 0),__decorate([s(cc.Label)],e.prototype,"t1Txt",void 0),__decorate([s(cc.Node)],e.prototype,"round2",void 0),__decorate([s(cc.Sprite)],e.prototype,"font2",void 0),__decorate([s([cc.SpriteFrame])],e.prototype,"digis2",void 0),e=n=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{}],DragNode:[function(t,e,n){"use strict";cc._RF.push(e,"080ceTjzZlFk7wPAbr/6G8e","DragNode"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../mission/MissionMgr"),o=t("./EndPoint"),a=t("../mission/TimeMissionMgr"),s=t("../mission/HardMissMgr"),r=t("../MusicMgr"),c=cc._decorator,l=c.ccclass,d=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.missionMgr=null,e.dragNodeRigi=null,e.physicsMgr=null,e.mouseJoint=null,e.endPos=null,e.isInEnd=!1,e.endNode=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,this.physicsMgr=cc.director.getPhysicsManager(),this.node.getComponent(cc.RigidBody).bullet=!0,this.dragNodeRigi=this.getComponent(cc.RigidBody),this.dragNodeRigi.fixedRotation=!0;var t=this.node.getComponent(cc.MouseJoint);this.mouseJoint=t,t&&(void 0!=t.dampingRatio&&(t.dampingRatio=2),window.lastMouse=t),this.node.on("touchstart",this._touchStart,this),this.node.on("touchmove",this._touchmove,this),this.node.on("touchend",this._touchend,this),this.node.on("touchcancel",this._touchend,this),this.nodeAction(),this.missionMgr=this.node.parent.parent.parent.getComponent(i.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.parent.getComponent(a.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.parent.getComponent(s.default),this.getComponent(cc.RigidBody).bullet=!0;var e=this.node.addComponent(cc.PhysicsBoxCollider);e.size.width=80,e.size.height=80,e.tag=1,this.node.width=80,this.node.height=80;var n=this.node.getComponent(cc.Sprite);n&&(n.trim=!1),this.imgNode=this.node.children[0]},e.prototype.nodeAction=function(){this.node.runAction(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1)).repeatForever())},e.prototype.stopNodeAction=function(){this.node.stopAllActions(),this.node.scale=1},e.prototype._touchStart=function(t){},e.prototype._touchmove=function(t){if(!this.missionMgr.canDragNode())return this.mouseJoint&&(this.mouseJoint.enabled=!1),void this.node.setPosition(this.endPos);this.mouseJoint&&(this.mouseJoint.enabled=!0),this.isInEnd||this.missionMgr.gameLogic.showYellowRope()},e.prototype._touchend=function(t){if(this.isInEnd){var e=this.node.parent.convertToNodeSpaceAR(this.endNode.convertToWorldSpaceAR(cc.v2()));return this.endPos=e,this.node.setPosition(e),this.missionMgr.gameLogic.reDrawLine(this.endNode.convertToWorldSpaceAR(cc.v2())),this.missionMgr.setCanSlideDown(!0),this.missionMgr.setEndPoint(this.endNode.convertToWorldSpaceAR(cc.v2())),this.missionMgr.gameLogic.showGreenRope(),this.missionMgr.showGuideFinger&&this.missionMgr.showGuideFinger(),this.stopNodeAction(),void r.default.instance.playDragToEnd()}this.missionMgr.setCanSlideDown(!1),this.missionMgr.setEndPoint(null),this.missionMgr.gameLogic.showYellowRope(),this.nodeAction(),r.default.instance.playDragLeaveEnd()},e.prototype.setDragNodePos=function(t,e,n){if(n){var i=n.sub(e);i.mag()>50&&(n=e.add(i.normalize().mul(50)));var o=this.physicsMgr.rayCast(e,n,cc.RayCastType.Closest)[0];if(o&&"dragNode"!=o.collider.node.name){var a=this.node.parent.convertToNodeSpaceAR(o.point);t.x=a.x,t.y=a.y}else{a=this.node.parent.convertToNodeSpaceAR(n);t.x=a.x,t.y=a.y}}},e.prototype.onBeginContact=function(t,e,n){if(1!=e.tag)return"endNode"==n.node.group?(this.isInEnd=!0,this.endNode=n.node,void n.node.getComponent(o.default).xuxianStopActions()):void 0;t.disabled=!0},e.prototype.onEndContact=function(t,e,n){if("endNode"==n.node.group)return this.endNode=null,this.isInEnd=!1,void n.node.getComponent(o.default).xuxianAction()},e.prototype.isInEndPoint=function(){return this.isInEnd},e=__decorate([l],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../mission/HardMissMgr":"HardMissMgr","../mission/MissionMgr":"MissionMgr","../mission/TimeMissionMgr":"TimeMissionMgr","./EndPoint":"EndPoint"}],DrawerUi:[function(t,e,n){"use strict";cc._RF.push(e,"d1aceNeMLhKGrBU0wSlY5Qw","DrawerUi"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./MusicMgr"),o=cc._decorator,a=o.ccclass,s=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){},e.prototype.closeAction=function(){this.node.active=!1,i.default.instance.playBtn()},e.prototype.onDisable=function(){},e=__decorate([a],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./MusicMgr":"MusicMgr"}],EndPoint:[function(t,e,n){"use strict";cc._RF.push(e,"e2f97+4hhhBwKWtpkUkmokN","EndPoint"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../mission/MissionMgr"),o=t("../mission/TimeMissionMgr"),a=t("../mission/HardMissMgr"),s=t("LanguageData"),r=cc._decorator,c=r.ccclass,l=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.xuxianquan=null,e.jiuhuche=null,e.tip=null,e.baseScaleX=.25,e.baseScaleY=.25,e.missionMgr=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.xuxianAction(),this.jiuhucheMove(),this.tipAction(),this.missionMgr=this.node.parent.parent.parent.parent.getComponent(i.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.parent.getComponent(i.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.parent.parent.getComponent(o.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.parent.parent.getComponent(a.default)},e.prototype.xuxianAction=function(){if(this.xuxianquan){this.xuxianquan.runAction(cc.sequence(cc.spawn(cc.rotateBy(.35,270),cc.scaleTo(.35,.5)),cc.spawn(cc.rotateBy(.35,270),cc.scaleTo(.35,.9)),cc.spawn(cc.rotateBy(.35,270),cc.scaleTo(.35,.75)),cc.delayTime(.1)).repeatForever())}},e.prototype.xuxianStopActions=function(){this.xuxianquan.stopAllActions(),this.xuxianquan.scaleX=this.baseScaleX,this.xuxianquan.scaleY=this.baseScaleY},e.prototype.tipAction=function(){this.tip&&this.tip.runAction(cc.sequence(cc.scaleTo(.5,1.5),cc.scaleTo(.5,1)).repeatForever())},e.prototype.jiuhucheMove=function(){try{if(!this.jiuhuche)return;"\u8f66"==this.jiuhuche.getComponent(cc.Sprite).spriteFrame.name&&this.jiuhuche.runAction(cc.sequence(cc.moveBy(1,cc.v2(15,0)),cc.moveBy(1,cc.v2(-15,0)),cc.delayTime(1)).repeatForever())}catch(t){}},e.prototype.changeTip=function(){this.tip&&(this.tip.getComponent(cc.RichText).string="         <size=#40><b>"+s.t("game.tip1")+"</b></c>\n"+s.t("game.tip2"))},e.prototype.onBeginContact=function(t,e,n){"dragNode"!=n.node.group?"human"!=n.node.group&&n.node.group:this.changeTip()},e.prototype.onEndContact=function(t,e,n){},__decorate([l(cc.Node)],e.prototype,"xuxianquan",void 0),__decorate([l(cc.Node)],e.prototype,"jiuhuche",void 0),__decorate([l(cc.Node)],e.prototype,"tip",void 0),e=__decorate([c],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../mission/HardMissMgr":"HardMissMgr","../mission/MissionMgr":"MissionMgr","../mission/TimeMissionMgr":"TimeMissionMgr",LanguageData:"LanguageData"}],EwanH5Tracker:[function(t,e,n){"use strict";cc._RF.push(e,"0e5dbGw0TpLjI0U7HiY22Ic","EwanH5Tracker"),Object.defineProperty(n,"__esModule",{value:!0});window.wx;var i=window.EwSuperH5,o=function(){function t(){i&&i.init({showIcon:0})}return t.prototype.onLogin=function(t){i&&i.login(function(t){return console.log(t)})},t.prototype.onBannerShown=function(t,e){},t.prototype.onVideoAdPlayed=function(t,e){},t.prototype.onEvent=function(t,e,n){},t}();n.default=o,cc._RF.pop()},{}],Finger1:[function(t,e,n){"use strict";cc._RF.push(e,"af7421hP2xE4IPvotnSmc4s","Finger1"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circle=null,e.routePoint=[],e.speed=500,e}return __extends(e,t),e.prototype.onLoad=function(){this.circleAction(),this.moveAction()},e.prototype.circleAction=function(){if(this.circle){this.circle.active=!0;this.circle.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.2,1)).repeatForever())}},e.prototype.hide=function(){this.node.active=this.circle.active=!1},e.prototype.moveAction=function(){var t=this;if(this.routePoint&&!(this.routePoint.length<=0)){var e=0,n=[],i=this.node.position;if(this.routePoint.forEach(function(o){e=i.sub(o).mag()/t.speed,n.push(cc.moveTo(e,o)),i=o}),1==this.routePoint.length)return this.node.runAction(n[0]),void this.circle.runAction(n[0]);this.node.runAction(cc.sequence(n).repeatForever())}},__decorate([a(cc.Node)],e.prototype,"circle",void 0),__decorate([a({type:[cc.Vec2],tooltip:"\u8def\u70b9"})],e.prototype,"routePoint",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],Finger2:[function(t,e,n){"use strict";cc._RF.push(e,"cb6dbkhre9H85k3cubzb8VA","Finger2"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circle=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this.action()},e.prototype.show=function(){this.node.active=!0},e.prototype.action=function(){this.node.runAction(cc.sequence(cc.moveBy(.4,cc.v2(0,20)),cc.scaleTo(.2,.9),cc.delayTime(.2),cc.spawn(cc.moveBy(.5,cc.v2(0,-20)),cc.scaleTo(.1,1)),cc.delayTime(.5)).repeatForever()),this.circle&&(this.circle.active=!0,this.circle.stopAllActions(),this.circle.setPosition(this.node.position.x-25,this.node.position.y+50),this.circle.scale=0,this.circle.runAction(cc.sequence(cc.delayTime(.4),cc.scaleTo(.2,1),cc.delayTime(.2),cc.scaleTo(.3,0),cc.delayTime(.2),cc.delayTime(.5)).repeatForever()))},__decorate([a(cc.Node)],e.prototype,"circle",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],FullDrag:[function(t,e,n){"use strict";cc._RF.push(e,"f74f3jj6IZEtbVKV8foR6tB","FullDrag"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragNode=null,e.physicsMgr=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.dragNode=this.node.getChildByName("endAndStart").getChildByName("dragNode"),this.node.on("touchstart",this._touchStart,this),this.physicsMgr=cc.director.getPhysicsManager()},e.prototype._touchStart=function(t){var e=t.touch.getLocation(),n=this.dragNode.convertToWorldSpaceAR(cc.v2());e.sub(n).mag()>50||this.setDragNodePos(this.dragNode.convertToWorldSpaceAR(cc.v2()),t.touch.getLocation())},e.prototype.setDragNodePos=function(t,e){var n=this.physicsMgr.rayCast(t,e,cc.RayCastType.Closest)[0];if(n&&"dragNode"!=n.collider.node.name){var i=this.dragNode.parent.convertToNodeSpaceAR(n.point);this.dragNode.x=i.x,this.dragNode.y=i.y}else{i=this.dragNode.parent.convertToNodeSpaceAR(e);this.dragNode.x=i.x,this.dragNode.y=i.y}},e=__decorate([o],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],FullStarUi:[function(t,e,n){"use strict";cc._RF.push(e,"bb82bI6dZRBxLJpha2Esnzp","FullStarUi"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./utils/Platform"),o=t("./ad/AdPartAManager"),a=t("./MusicMgr"),s=t("./TgaPlatform"),r=cc._decorator,c=r.ccclass,l=r.property;n.WIN_MAX_STAR_NUM=3;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeProg=null,e.stars=[],e.curStars=null,e.lerp=.5,e.timer=0,e}return __extends(e,t),e.prototype.showView=function(t){this.timeProg.progress=1,this.curStars.string=String(t),this.timer=0,this.stars.forEach(function(t){t.active=!1});for(var e=0;e<t;e++)this.stars[e].active=!0;this.node.active=!0},e.prototype.onEnable=function(){this.schedule(function(){i.default.showBannerAd()},o.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},e.prototype.update=function(t){if(this.timer>=10)return this.timeProg.progress=0,void this.noAction();this.timer+=t,this.timer=Number(this.timer.toFixed(2)),this.a=(1-this.timer/10)*this.lerp,this.b=this.timeProg.progress*(1-this.lerp),this.timeProg.progress=this.a+this.b},e.prototype.homeAction=function(){a.default.instance.playBtn(),this.node.active=!1,window.GameControl.zhuye.node.active=!0,window.GameControl.youxiUi.node.active=!0},e.prototype.noAction=function(){a.default.instance.playBtn(),this.node.active=!1,window.GameControl.youxiUi.showWinUi(Number(this.curStars.string)),window.GameControl.youxiUi.node.active=!0},e.prototype.videoAction=function(){var t=this;s.showRewardAd({onReward:function(){window.GameControl.youxiUi.showWinUi(n.WIN_MAX_STAR_NUM),t.node.active=!1}})},e.prototype.onDisable=function(){i.default.hideBannerAd(),this.unscheduleAllCallbacks()},__decorate([l(cc.ProgressBar)],e.prototype,"timeProg",void 0),__decorate([l({type:[cc.Node]})],e.prototype,"stars",void 0),__decorate([l(cc.Label)],e.prototype,"curStars",void 0),e=__decorate([c],e)}(cc.Component);n.default=d,cc._RF.pop()},{"./MusicMgr":"MusicMgr","./TgaPlatform":"TgaPlatform","./ad/AdPartAManager":"AdPartAManager","./utils/Platform":"Platform"}],GameBg:[function(t,e,n){"use strict";cc._RF.push(e,"e62a0q67yBJJoyJNvMzggnu","GameBg"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/SpriteUtil"),o=t("../utils/MathUtil"),a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite)},e.prototype.onEnable=function(){var t=o.default.getRandomInteger(0,8);i.default.LoadLocalImg(this.sprite,"bg/"+t)},e=__decorate([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{"../utils/MathUtil":"MathUtil","../utils/SpriteUtil":"SpriteUtil"}],GameCenter:[function(t,e,n){"use strict";cc._RF.push(e,"7c0dfYVsKRFurzcYhJf3u67","GameCenter"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./AdPartAManager"),o=t("../utils/Platform"),a=t("./AdPartAList"),s=t("../utils/Common/GameUtil"),r=t("../MusicMgr"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adList=null,e.wx=window.wx,e.isAfterWinUI=!1,e.missionIdx=1,e.isAfterHomeUI=!1,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.onEnable=function(){this.wx&&this.wx.aldShowEvent(i.GAME_CENTER_PAGE),o.default&&o.default.hideBannerAd(),s.default.hideWxBanner(),this.schedule(function(){o.default.showBannerAd()},i.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1),this.adList&&this.adList.updateAd()},e.prototype.showView=function(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=1),void 0===n&&(n=!1),this.isAfterWinUI=t,this.missionIdx=e,this.isAfterHomeUI=n,this.node.active=!0},e.prototype.onDisable=function(){o.default&&o.default.hideBannerAd(),this.unscheduleAllCallbacks(),this.isAfterWinUI&&(this.isAfterWinUI=!1,window.GameControl.winUi.coinRewardUi.showView(this.missionIdx)),this.isAfterHomeUI&&(this.isAfterHomeUI=!1,window.GameControl.zhuye.node.active=!1,window.GameControl.zhuye.node.active=!0,window.GameControl.zhuye.upDatethis())},e.prototype.closeAction=function(){this.node.active=!1,r.default.instance.playBtn()},e.prototype.getIsAfterWinUI=function(){return this.isAfterWinUI},e.prototype.getMissionIdx=function(){return this.missionIdx},e.prototype.getIsAfterHomeUI=function(){return this.isAfterHomeUI},e.instance=null,__decorate([d(a.default)],e.prototype,"adList",void 0),e=n=__decorate([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../utils/Common/GameUtil":"GameUtil","../utils/Platform":"Platform","./AdPartAList":"AdPartAList","./AdPartAManager":"AdPartAManager"}],GameLogic3:[function(t,e,n){"use strict";cc._RF.push(e,"a5219nO1JBCnqr77EthWJuD","GameLogic3"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./mission/MissionMgr"),o=t("./mission/TimeMissionMgr"),a=t("./mission/HardMissMgr"),s=cc._decorator,r=s.ccclass,c=s.property,l=(Math.PI,Math.PI,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics1=null,e.graphics2=null,e.graphics3=null,e.pm=null,e.points=[],e.colliderStack=[],e.gameCamera=null,e.startNode=null,e.dragNode=null,e.endNode=null,e.inited=!1,e.missionMgr=null,e.normalRight=cc.v2(1,0),e.allCircle=[],e.dragNodeRigi=null,e.yellowColor="#FDCB00",e.greenColor="#01DA00",e.curColor=e.yellowColor,e.isClear=!1,e}return __extends(e,t),e.prototype.start=function(){this.graphics1&&(this.graphics1.node.zIndex=10001),this.graphics2&&(this.graphics2.node.zIndex=10002),this.graphics3&&(this.graphics3.node.zIndex=10003)},e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.pm=cc.director.getPhysicsManager(),this.gameCamera=cc.find("Canvas/GameCamera")},e.prototype.pointInCircle=function(t,e){return!(!t||!e)&&e.node.convertToWorldSpaceAR(cc.v2()).subSelf(t).mag()<e.radius},e.prototype.findSolution4=function(t,e){if(t.sub(e).mag())for(var n,i,o,a,s,r=t.clone(),c=5;c-- >0;){this.colliderStack.slice(-2)[0];var l=0;if((o=this.colliderStack.slice(-1)[0]).collider){var d=this.getContactPoint(r,o.collider,!o.clockwise),u=this.getContactPoint(e,o.collider,!o.clockwise);i=(s=(l=this.vectorsAngle4(d,r,u,e))<0)==o.clockwise?2*l:o.angle0-o.angle1}else s=(l=this.vectorsAngle3(o.point1,r,e))<0,i=2*l;if(0==l)break;n=l;for(var h=void 0,p=0;p<this.allCircle.length;p++)if((a=this.allCircle[p])!=o.collider&&a&&a.node){var m=a.node.convertToWorldSpaceAR(cc.v2()),f=a.radius,g=void 0;if(o.collider){if(void 0==(g=this.angleColliders(o.collider,a,o.clockwise,s)))continue}else g=this.anglePointCircle(o.point1,m,f,s);var y=this.anglesAngle(o.angle1,g),v=o.collider?o.origin:o.point1,_=this.getContactPointByA(g,a,s);this.sameSide(_,v,t,e)&&(s?y<0&&n<=y&&(n=y,h?this.colliderDis(h,o.collider||o.point1)<this.colliderDis(a,o.collider||o.point1)&&e.sub(o.point1).mag()>m.sub(o.point1).mag()&&(h=a):e.sub(o.point1).mag()>m.sub(o.point1).mag()&&(h=a)):y>0&&n>=y&&(n=y,h?this.colliderDis(h,o.collider||o.point1)<this.colliderDis(a,o.collider||o.point1)&&e.sub(o.point1).mag()>m.sub(o.point1).mag()&&(h=a):e.sub(o.point1).mag()>m.sub(o.point1).mag()&&(h=a)))}if(Math.abs(n)<Math.abs(i)){if(!h){if(o.angle1+=n,o.collider){w=this.getContactPointByA(o.angle1,o.collider,o.clockwise);o.point1=w}break}if(o.angle1+=n,o.collider){var w=this.getContactPointByA(o.angle1,o.collider,o.clockwise);o.point1=w}var A=this.getContactPointByA(o.angle1,h,s),C={collider:h,origin:h&&h.node.convertToWorldSpaceAR(cc.v2()),angle0:o.angle1,angle1:o.angle1,clockwise:s,point0:A,point1:A.clone()};this.colliderStack.push(C),r=this.beamCrossPoint(C.point1,C.angle1,t,e)}else{if(o.angle1+=n,o.collider){w=this.getContactPointByA(o.angle1,o.collider,o.clockwise);o.point1=w}s?o.angle1<=o.angle0?(this.colliderStack.pop(),r=this.beamCrossPoint(o.point0,o.angle0,t,e)):r=this.beamCrossPoint(o.point1,o.angle1,t,e):o.angle1>=o.angle0?(this.colliderStack.pop(),r=this.beamCrossPoint(o.point0,o.angle0,t,e)):r=this.beamCrossPoint(o.point1,o.angle1,t,e)}}},e.prototype.colliderDis=function(t,e){if(t&&e){var n=t.node.convertToWorldSpaceAR(cc.v2());if(e instanceof cc.Vec2)return n.sub(e).mag();var i=e.node.convertToWorldSpaceAR(cc.v2());return n.sub(i).mag()}return 0},e.prototype.crossPoint=function(t,e,n,i){var o=e.y-t.y,a=t.x-e.x,s=e.x*t.y-t.x*e.y,r=i.y-n.y,c=n.x-i.x,l=i.x*n.y-n.x*i.y,d=o*c-r*a;if(d){var u=(l*a-s*c)/d,h=(s*r-l*o)/d;return cc.v2(u,h)}return null},e.prototype.beamCrossPoint=function(t,e,n,i){var o=cc.v2(1,0).rotateSelf(e).addSelf(t);return this.crossPoint(t,o,n,i)},e.prototype.anglePointCircle=function(t,e,n,i){var o=e.sub(t),a=Math.asin(n/o.mag());return o.rotateSelf(i?a:-a),this.vectorAngle(o)},e.prototype.angleCircles=function(t,e,n,i,o){return e==i?this.vectorAngle(n.sub(t)):e<i?this.anglePointCircle(t.clone(),n.clone(),i-e,o):this.anglePointCircle(n.clone(),t.clone(),e-i,!o)+Math.PI},e.prototype.angleColliders=function(t,e,n,i){var o=cc.v2(),a=t.node.convertToWorldSpaceAR(o),s=e.node.convertToWorldSpaceAR(o),r=t.radius,c=e.radius;if(n==i)return this.angleCircles(a,r,s,c,n);var l=s.sub(a);if(!(l.mag()<r+c)){var d=Math.asin((r+c)/l.mag());return this.vectorAngle(l.rotateSelf(n?-d:d))}},e.prototype.anglesAngle=function(t,e){var n=cc.v2(1,0).rotateSelf(t),i=cc.v2(1,0).rotateSelf(e);return n.signAngle(i)},e.prototype.sameSide=function(t,e,n,i){return this.pointsAngle(n,i,t)*this.pointsAngle(n,i,e)>0},e.prototype.isAcuteTriangle=function(t,e,n){var i=[t.sub(e).mag(),t.sub(n).mag(),e.sub(n).mag()].map(function(t){return t*t}).sort(function(t,e){return t-e});return i[0]+i[1]<i[2]},e.prototype.onEnable=function(){window.GameLogic1=this},e.prototype.init=function(t,e,n){var s=this;void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),this.showYellowRope(),t&&e?(this.startNode=t,this.dragNode=e):this.node.children.forEach(function(t){t.name.startsWith("guanka")&&(s.startNode=t.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("startImg"),s.dragNode=t.getChildByName("endAndStart").getChildByName("dragNode"))});var r=this.startNode.convertToWorldSpaceAR(cc.v2()),c=this.dragNode.convertToWorldSpaceAR(cc.v2()),l=this.vectorAngle2(r,c);this.colliderStack=[{collider:null,origin:null,angle0:0,angle1:l,clockwise:null,point0:null,point1:r}],this.allCircle=[],this.dragNodeRigi=this.dragNode.getComponent(cc.RigidBody);var d=this.dragNode.convertToWorldSpaceAR(cc.v2());d.y-=this.gameCamera.y,this.lastTouch=d.clone(),t&&e||(this.inited=!0,this.dragNode.on("touchstart",this._touchstart,this),this.dragNode.on("touchend",this._touchend,this),this.dragNode.on("touchcancel",this._touchend,this),this.missionMgr=this.getComponent(i.default),this.missionMgr=this.missionMgr?this.missionMgr:this.getComponent(o.default),this.missionMgr=this.missionMgr?this.missionMgr:this.getComponent(a.default))},e.prototype._touchstart=function(t){if(this.missionMgr.canDragNode()){this.points=[];t.touch.getLocation();this.allCircle=this.getComponentsInChildren(cc.PhysicsCircleCollider),this.allCircle=this.allCircle.filter(function(t){return"normalObstacle"==t.node.group})}},e.prototype.triHitTest=function(t,e){var n=e[0],i=e[1],o=e[2];return this.pointInTriangle(t.x,t.y,n.x,n.y,i.x,i.y,o.x,o.y)},e.prototype.pointInTriangle=function(t,e,n,i,o,a,s,r){var c=(a-r)*(n-s)+(s-o)*(i-r),l=((a-r)*(t-s)+(s-o)*(e-r))/c,d=((r-i)*(t-s)+(n-s)*(e-r))/c,u=1-l-d;return l>=0&&l<=1&&d>=0&&d<=1&&u>=0&&u<=1},e.prototype._touchMove=function(t){},e.prototype._touchend=function(t){this.dragNodeRigi.linearVelocity=cc.v2()},e.prototype.vectorAngle=function(t){return t&&t.mag()?this.normalRight.signAngle(t):0},e.prototype.vectorAngle2=function(t,e){return this.vectorAngle(e.sub(t))},e.prototype.pointsAngle=function(t,e,n){return this.vectorsAngle3(t,e,n)},e.prototype.vectorsAngle4=function(t,e,n,i){var o=e.sub(t);if(!o.mag())return 0;var a=i.sub(n);return a.mag()?o.signAngle(a):0},e.prototype.vectorsAngle3=function(t,e,n){var i=e.sub(t);if(!i.mag())return 0;var o=n.sub(t);return o.mag()?i.signAngle(o):0},e.prototype.getOrigin=function(t){return t instanceof cc.PhysicsCircleCollider?t.node.convertToWorldSpaceAR(t.offset):t instanceof cc.PhysicsBoxCollider?t.node.convertToWorldSpaceAR(t.offset):void 0},e.prototype.getContactPointByA=function(t,e,n){var i=cc.v2(e.radius,0).rotateSelf(t);i.rotateSelf(n?Math.PI/2:Math.PI/-2);var o=e.node.convertToWorldSpaceAR(cc.v2());return i.addSelf(o),i},e.prototype.getContactPoint=function(t,e,n){if(e instanceof cc.PhysicsCircleCollider){var i=e.node.convertToWorldSpaceAR(e.offset),o=t.sub(i),a=Math.acos(e.radius/o.mag());return o.normalizeSelf().mulSelf(e.radius).rotateSelf(n?-a:a).addSelf(i)}if(e instanceof cc.PhysicsBoxCollider){for(var s=e.node.convertToWorldSpaceAR(e.offset),r=(o=t.sub(s),[cc.v2(s.x+e.size.width/2,s.y+e.size.height/2),cc.v2(s.x+e.size.width/2,s.y-e.size.height/2),cc.v2(s.x-e.size.width/2,s.y+e.size.height/2),cc.v2(s.x-e.size.width/2,s.y-e.size.height/2)]),c=r.map(function(e){return s.sub(t).signAngle(e.sub(t))}),l=void 0,d=n?-Math.PI:Math.PI,u=0;u<r.length;u++)n?c[u]>d&&(l=r[u]):c[u]<d&&(l=r[u]);return l}return null},e.prototype.update=function(t){if(!this.isClear){this.graphics1&&this.graphics1.clear(),this.graphics2&&this.graphics2.clear(),this.graphics3&&this.graphics3.clear();try{if(this.lastTouch&&this.dragNode){var e=this.dragNode.convertToWorldSpaceAR(cc.v2());this.findSolution4(this.lastTouch.clone(),e.clone()),this.lastTouch.x=e.x,this.lastTouch.y=e.y-this.gameCamera.y}for(var n=Object.assign([],this.colliderStack),i=0,o=0;o<n.length;o++){var a=n[o],s=n[o+1];a.collider&&(i+=a.collider.radius*Math.abs(a.angle1-a.angle0)),s&&(i+=a.point1.sub(s.point0).mag())}n.length>0&&(i+=n.slice(-1)[0].point1.sub(this.lastTouch).mag()-15);var r=0;for(o=0;o<n.length;o++){a=n[o],s=n[o+1];if(a.collider){var c=a.collider.radius,l=a.angle0+(a.clockwise?Math.PI:-Math.PI)/2,d=a.angle1+(a.clockwise?Math.PI:-Math.PI)/2;this.drawRopeArc1(a.origin.clone(),c,l,d,a.clockwise,r,i,this.curColor),r+=c*Math.abs(a.angle0-a.angle1)}s&&(this.drawRopeLine1(a.point1,s.point0,r,i,!1,this.curColor),r+=a.point1.sub(s.point0).mag())}var u=n.slice(-1)[0];u&&this.drawRopeLine1(u.point1,this.lastTouch,r,i,!0,this.curColor)}catch(t){console.warn(t)}}},e.prototype.drawRopeLine1=function(t,e,n,i,o,a){if(void 0===o&&(o=!1),void 0===a&&(a="ffff00"),!this.isClear&&t&&e){var s=this.graphics1.node.convertToNodeSpaceAR(t),r=this.graphics1.node.convertToNodeSpaceAR(e),c=r.sub(s),l=c.mag();if(o){var d=(i-n)/l;l=i-n,r.x=s.x*(1-d)+r.x*d,r.y=s.y*(1-d)+r.y*d}var u=cc.v2(1,0).signAngle(c);this.graphics1.strokeColor=cc.color(0,0,0),this.graphics1.lineWidth=10,this.graphics1.moveTo(s.x-Math.cos(u),s.y-Math.sin(u)),this.graphics1.lineTo(r.x+Math.cos(u),r.y+Math.sin(u)),this.graphics1.stroke(),this.graphics1.strokeColor.fromHEX(a),this.graphics1.lineWidth=6,this.graphics1.moveTo(s.x-Math.cos(u),s.y-Math.sin(u)),this.graphics1.lineTo(r.x+Math.cos(u),r.y+Math.sin(u)),this.graphics1.stroke(),this.graphics1.strokeColor=cc.color(0,0,0),this.graphics1.lineWidth=2;var h=(i-n)%13/13,p=c.normalize().mulSelf(13),m=c.normalize().mulSelf(6/Math.cos(Math.PI/4)/2).rotateSelf(Math.PI/4),f=cc.v2();h>.8&&(f.x=s.x+(h-1)*p.x,f.y=s.y+(h-1)*p.y,this.graphics1.moveTo(f.x+m.x,f.y+m.y),this.graphics1.lineTo(f.x-m.x,f.y-m.y));for(var g=0,y=13*h;y<=l;g++,y+=13)f.x=s.x+(h+g)*p.x,f.y=s.y+(h+g)*p.y,this.graphics1.moveTo(f.x+m.x,f.y+m.y),this.graphics1.lineTo(f.x-m.x,f.y-m.y);this.graphics1.stroke()}},e.prototype.drawRopeArc1=function(t,e,n,i,o,a,s,r){if(void 0===r&&(r="ffff00"),!this.isClear&&t){var c=this.graphics1.node.convertToNodeSpaceAR(t);this.graphics1.strokeColor=cc.color(0,0,0),this.graphics1.lineWidth=10,this.graphics1.arc(c.x,c.y,e,n,i,!o),this.graphics1.stroke(),this.graphics1.strokeColor.fromHEX(r),this.graphics1.lineWidth=6,this.graphics1.arc(c.x,c.y,e,n,i,!o),this.graphics1.stroke(),this.graphics1.strokeColor=cc.color(0,0,0),this.graphics1.lineWidth=2;var l=e*Math.abs(n-i),d=(s-a)%13/13,u=cc.v2(e,0).rotateSelf(n),h=cc.v2(0,1).rotateSelf(n);h.mulSelf(6/Math.cos(Math.PI/4)/2).rotateSelf(Math.PI/4);var p=13*d/e;if(d>.8){var m=13*(d-1)/e,f=u.rotate(o?-m:m),g=h.rotate(o?-m:m);this.graphics1.moveTo(c.x+f.x+g.x,c.y+f.y+g.y),this.graphics1.lineTo(c.x+f.x-g.x,c.y+f.y-g.y),this.graphics1.stroke()}for(var y=0,v=13*d;v<=l;y++,v+=13){if(!((m=13*(d+y)/e)-p>2*Math.PI)){f=u.rotate(o?-m:m),g=h.rotate(o?-m:m);this.graphics1.moveTo(c.x+f.x+g.x,c.y+f.y+g.y),this.graphics1.lineTo(c.x+f.x-g.x,c.y+f.y-g.y),this.graphics1.stroke()}}}},e.prototype.getLines=function(){return Object.assign([],this.colliderStack)},e.prototype.showYellowRope=function(){this.curColor=this.yellowColor},e.prototype.showGreenRope=function(){this.curColor=this.greenColor},e.prototype.getCrossPoint=function(t,e,n,i){var o,a=0,s=0;switch(t.x!=e.x&&(o=(e.y-t.y)/(e.x-t.x),s|=1),n.x!=i.x&&(a=(i.y-n.y)/(i.x-n.x),s|=2),s){case 0:return t.x,n.x,new cc.Vec2(0,0);case 1:var r=n.x,c=(t.x-r)*-o+t.y;return new cc.Vec2(r,c);case 2:r=t.x,c=(n.x-r)*-a+n.y;return new cc.Vec2(r,c);case 3:if(o==a)return new cc.Vec2(0,0);c=o*(r=(o*t.x-a*n.x-t.y+n.y)/(o-a))-o*t.x+t.y;return new cc.Vec2(r,c)}return new cc.Vec2(0,0)},e.prototype.reDrawLine=function(t){this.lastTouch=t,this.lastTouch.y-=this.gameCamera.y},e.prototype.clearAndHideLine=function(){this.graphics1.clear(),this.graphics1.node.active=!1,this.isClear=!0},e.prototype.showLine=function(){this.graphics1.node.active=!0,this.isClear=!1},__decorate([c({type:cc.Graphics,tooltip:"\u753b\u7ebf\u53cd\u9988\uff08\u9ec4\u8272\uff09"})],e.prototype,"graphics1",void 0),__decorate([c({type:cc.Graphics,tooltip:"\u753b\u7ebf\u53cd\u9988\uff08\u7eff\u8272\uff09"})],e.prototype,"graphics2",void 0),__decorate([c({type:cc.Graphics,tooltip:"\u753b\u7ebf\u53cd\u9988\uff08\u9ed1\u8272\u7ebf\u6bb5\uff09"})],e.prototype,"graphics3",void 0),e=__decorate([r],e)}(cc.Component));n.default=l,cc._RF.pop()},{"./mission/HardMissMgr":"HardMissMgr","./mission/MissionMgr":"MissionMgr","./mission/TimeMissionMgr":"TimeMissionMgr"}],GameLogic:[function(t,e,n){"use strict";cc._RF.push(e,"675cdAWM1dKWJS5CFWuKS54","GameLogic"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./mission/MissionMgr"),o=cc._decorator,a=o.ccclass,s=o.property,r=Math.PI,c=2*Math.PI,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics1=null,e.graphics2=null,e.graphics3=null,e.pm=null,e.points=[],e.colliderStack=[],e.dragNode=null,e.startNode=null,e.normalRight=cc.v2(1,0),e.counter=0,e.lastTouch=cc.v2(),e.allCircle=[],e.lineLen=25,e.trueLastPoint=null,e.dragNodeRadius=0,e.yellowColor="#FDCB00",e.greenColor="#01DA00",e}return __extends(e,t),e.prototype.start=function(){},e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.pm=cc.director.getPhysicsManager()},e.prototype.onEnable=function(){window.GameLogic1=this},e.prototype.init=function(){var t=this;this.graphics1.strokeColor.fromHEX(this.yellowColor),this.node.children.forEach(function(e){e.name.startsWith("guanka")&&(t.startNode=e.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("startImg"),t.dragNode=e.getChildByName("endAndStart").getChildByName("dragNode"))});var e=this.startNode.convertToWorldSpaceAR(cc.v2());this.colliderStack=[{collider:null,origin:null,angle0:r,angle1:r,clockwise:null,point0:null,point1:e}],this.dragNode.on("touchstart",this._touchstart,this),this.dragNode.on("touchmove",this._touchmove,this),this.dragNode.on("touchend",this._touchend,this),this.dragNode.on("touchcancel",this._touchend,this),this.lastTouch=this.dragNode.convertToWorldSpaceAR(cc.v2()),this.dragNodeRadius=this.dragNode.getComponent(cc.PhysicsCircleCollider).radius},e.prototype._touchstart=function(t){if(i.default.instance.canDragNode()){this.points=[];var e=t.touch.getLocation();this.lastSawBlock=null,this.lastTouch.x=e.x,this.lastTouch.y=e.y,this.allCircle=this.getComponentsInChildren(cc.PhysicsCircleCollider),this.allCircle=this.allCircle.filter(function(t){return"normalObstacle"==t.node.group})}},e.prototype.touchmove=function(t,e){var n=this.colliderStack.slice(-1)[0];if(n){for(var i,o=n.point1,a=this.pointsAngle(o,t,e),s=0,r=a,c=null,l=0;l<this.allCircle.length;l++)(c=this.allCircle[l])!=n.collider&&this.triHitTest(c.node.convertToWorldSpaceAR(cc.v2()),[o,t,e])&&((s=this.pointsAngle(o,t,c.node.convertToWorldSpaceAR(cc.v2())))>0?s<r&&(r=s,i=c):s<0&&s>r&&(r=s,i=c));if(console.log("=================================="),i){var d=this.getContactPoint(o,i,a>=0),u=this.getCrossPoint(o,d,t,e).sub(t);return u.addSelf(u.normalize().mul(5)),console.log("iiii",u),this._touchmove2(u),void this.touchmove(t.add(u),e)}this._touchmove2(e.sub(t))}else this._touchmove2(e.sub(t))},e.prototype.triHitTest=function(t,e){var n=e[0],i=e[1],o=e[2];return this.pointInTriangle(t.x,t.y,n.x,n.y,i.x,i.y,o.x,o.y)},e.prototype.pointInTriangle=function(t,e,n,i,o,a,s,r){var c=(a-r)*(n-s)+(s-o)*(i-r),l=((a-r)*(t-s)+(s-o)*(e-r))/c,d=((r-i)*(t-s)+(n-s)*(e-r))/c,u=1-l-d;return l>=0&&l<=1&&d>=0&&d<=1&&u>=0&&u<=1},e.prototype._touchmove=function(t){i.default.instance.reel.runAction(cc.rotateBy(.1,360).repeatForever());var e=t.touch.getDelta();t.getLocation().sub(e);this._touchmove2(e)},e.prototype._touchmove2=function(t){if(i.default.instance.canDragNode()){this.counter++;var e=this.colliderStack.slice(-1)[0];this.dragNode.x=this.dragNode.x+t.x,this.dragNode.y=this.dragNode.y+t.y;var n,o=this.dragNode.convertToWorldSpaceAR(cc.v2());e.collider?(n=this.getContactPoint(o,e.collider,!e.clockwise),e.point1.x=n.x,e.point1.y=n.y):n=e.point1;var a=o.sub(n).mulSelf(1e4).addSelf(n);if(this.pm&&this.pm.rayCast){var s=this.pm.rayCast(n,o,cc.RayCastType.Closest)[0],r=this.pm.rayCast(n,a,cc.RayCastType.Closest)[0];if(s&&s.collider!=e.collider&&s.collider.node!=this.lastSawBlock&&"dragNode"!==s.collider.node.group&&"human"!==s.collider.node.group&&"endNode"!==s.collider.node.group&&"damageObstacle"!==s.collider.node.group&&"standHuman"!==s.collider.node.group){console.log("found!!!");var c=(h=this.pointsAngle(n,this.lastTouch,o))?this.getContactPoint(n,s.collider,h<0):o,l=this.vectorAngle(c.sub(n));e.angle1+=h;var d=h?this.getContactPoint(o,s.collider,h>0):o,u=c.sub(n).signAngle(o.sub(d));this.colliderStack.push({collider:s.collider,origin:this.getOrigin(s.collider),angle0:l,angle1:l+u,clockwise:h<0,point0:c,point1:d})}else{var h=this.pointsAngle(n,this.lastTouch,o);e.angle1+=h,e.collider&&e.clockwise==e.angle0<e.angle1&&this.colliderStack.pop()}this.lastTouch.x=o.x,this.lastTouch.y=o.y,this.lastSawBlock=r?r.collider.node:null}}},e.prototype._touchend=function(t){i.default.instance.reel.stopAllActions()},e.prototype.calcCircleRotate=function(t,e,n){t.sub(e);var i=t.sub(e).mag();Math.sqrt(i*i-n*n)},e.prototype.toLeastRange=function(t){var e=(t%c+c)%c;return e>r?e-c:e},e.prototype.vectorAngle=function(t){return t&&t.mag()?this.normalRight.signAngle(t):0},e.prototype.pointsAngle=function(t,e,n){var i=e.sub(t);if(!i.mag())return 0;var o=n.sub(t);return o.mag()?i.signAngle(o):0},e.prototype.getOrigin=function(t){return t instanceof cc.PhysicsCircleCollider?t.node.convertToWorldSpaceAR(t.offset):t instanceof cc.PhysicsBoxCollider?t.node.convertToWorldSpaceAR(t.offset):void 0},e.prototype.getContactPoint=function(t,e,n){if(e instanceof cc.PhysicsCircleCollider){var i=e.node.convertToWorldSpaceAR(e.offset),o=t.sub(i),a=Math.acos(e.radius/o.mag());return o.normalizeSelf().mulSelf(e.radius).rotateSelf(n?-a:a).addSelf(i)}if(e instanceof cc.PhysicsBoxCollider){for(var s=e.node.convertToWorldSpaceAR(e.offset),r=(o=t.sub(s),[cc.v2(s.x+e.size.width/2,s.y+e.size.height/2),cc.v2(s.x+e.size.width/2,s.y-e.size.height/2),cc.v2(s.x-e.size.width/2,s.y+e.size.height/2),cc.v2(s.x-e.size.width/2,s.y-e.size.height/2)]),c=r.map(function(e){return s.sub(t).signAngle(e.sub(t))}),l=void 0,d=n?-Math.PI:Math.PI,u=0;u<r.length;u++)n?c[u]>d&&(l=r[u]):c[u]<d&&(l=r[u]);return l}return null},e.prototype.drawLine=function(t,e,n,i){if(t&&e){t=this.node.convertToNodeSpaceAR(t),e=this.node.convertToNodeSpaceAR(e);var o=n?this.graphics1:this.graphics2;o&&(o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.stroke()),this.graphics3&&this.graphics3.moveTo(t.x,t.y);for(var a=o.lineWidth,s=e.sub(t).normalizeSelf(),r=s.rotate(Math.PI/2),c=t.add(r.mul(a/2).add(s.mul(this.lineLen))),l=t.add(s.rotate(-Math.PI/2).mul(a/2)),d=e.sub(t).mag(),u=Math.floor(d/this.lineLen),h=void 0,p=void 0,m=0;m<u;m++)h=new cc.Vec2(c.x,c.y),p=new cc.Vec2(l.x,l.y),c.addSelf(s.mul(this.lineLen)),l.addSelf(s.mul(this.lineLen)),this.graphics3.moveTo(h.x,h.y),this.graphics3.lineTo(c.x,c.y),this.graphics3.moveTo(h.x,h.y),this.graphics3.lineTo(p.x,p.y),this.graphics3.lineTo(l.x,l.y),m==u-1&&this.graphics3.lineTo(c.x,c.y),this.graphics3.stroke()}},e.prototype.update=function(t){this.graphics1&&this.graphics1.clear(),this.graphics3&&this.graphics3.clear();for(var e,n=Object.assign([],this.colliderStack),i=0;i<n.length;i++){var o=n[i];if(e&&o.point0&&this.drawLine(e,o.point0,!0,!1),o.collider)if(o.collider instanceof cc.PhysicsCircleCollider){var a=o.collider.node.convertToWorldSpaceAR(cc.v2()),s=(a=this.graphics1.node.convertToNodeSpaceAR(a)).x,r=a.y,c=o.collider.radius,l=o.angle0-o.angle1<0,d=l?-1:1,u=o.angle0+d*Math.PI/2,h=o.angle1+d*Math.PI/2;this.graphics1.arc(s,r,c,u,h,l)}else o.collider,cc.PhysicsBoxCollider;e=o.point1}this.trueLastPoint=this.lastTouch.sub(this.lastTouch.sub(e).normalize().mulSelf(this.dragNodeRadius)),this.drawLine(e,this.trueLastPoint,!0,!1)},e.prototype.getLines=function(){return Object.assign([],this.colliderStack)},e.prototype.showYellowRope=function(){this.graphics1.strokeColor.fromHEX(this.yellowColor)},e.prototype.showGreenRope=function(){this.graphics1.strokeColor.fromHEX(this.greenColor)},e.prototype.getCrossPoint=function(t,e,n,i){var o,a=0,s=0;switch(t.x!=e.x&&(o=(e.y-t.y)/(e.x-t.x),s|=1),n.x!=i.x&&(a=(i.y-n.y)/(i.x-n.x),s|=2),s){case 0:return t.x,n.x,new cc.Vec2(0,0);case 1:var r=n.x,c=(t.x-r)*-o+t.y;return new cc.Vec2(r,c);case 2:r=t.x,c=(n.x-r)*-a+n.y;return new cc.Vec2(r,c);case 3:if(o==a)return new cc.Vec2(0,0);c=o*(r=(o*t.x-a*n.x-t.y+n.y)/(o-a))-o*t.x+t.y;return new cc.Vec2(r,c)}return new cc.Vec2(0,0)},e.prototype.reDrawLine=function(t){this.lastTouch=t},__decorate([s({type:cc.Graphics,tooltip:"\u753b\u7ebf\u53cd\u9988\uff08\u7eff\u8272\uff09"})],e.prototype,"graphics1",void 0),__decorate([s({type:cc.Graphics,tooltip:"\u753b\u7ebf\u53cd\u9988\uff08\u7ea2\u8272\uff09"})],e.prototype,"graphics2",void 0),__decorate([s({type:cc.Graphics,tooltip:"\u753b\u7ebf\u53cd\u9988\uff08\u9ed1\u8272\u7ebf\u6bb5\uff09"})],e.prototype,"graphics3",void 0),e=__decorate([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./mission/MissionMgr":"MissionMgr"}],GameUtil:[function(t,e,n){"use strict";cc._RF.push(e,"fbd37SH+YZCp7BnZlFUZcPZ","GameUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.HOME_PAGE_BANNER_ADID="adunit-c4bf574aae363069",n.SUC_BANNER_ADID="adunit-5042dff5ae1e29a3";var i=function(){function t(){}return t.showWxBannerInHomePage=function(){var t=this;if(!this.wx)return Promise.reject();this.showBanner=!0;var e=this.wx.getSystemInfoSync(),i=e.screenHeight/e.screenWidth>1.9?520:380;return i=e.screenWidth*i/720,0==this.curBanner?(this.curBanner=1,this.bannerAd1&&this.bannerAd1.hide(),this.bannerAd1&&this.bannerAd1.destroy(),this.bannerAd1=this.wx.createBannerAd({adUnitId:n.HOME_PAGE_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.bannerAd1.onResize(function(n){n&&(t.bannerAd1.style.top=e.screenHeight-n.height-i,t.bannerAd1.style.left=(e.screenWidth-n.width)/2)}),this.bannerAd1.onError(function(){}),this.bannerAd1.style.width=300,this.bannerAd0||(this.bannerAd0&&this.bannerAd0.destroy(),this.bannerAd0=this.wx.createBannerAd({adUnitId:n.HOME_PAGE_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.bannerAd0.onResize(function(n){n&&(t.bannerAd0.style.top=e.screenHeight-n.height-i,t.bannerAd0.style.left=(e.screenWidth-n.width)/2)}),this.bannerAd0.style.width=300),this.bannerAd0.show(),new Promise(function(e,n){t.bannerAd0.onLoad(e),t.bannerAd0.onError(n)}).then(function(){return t.showBanner?t.bannerAd0.show():Promise.reject()})):(this.curBanner=0,this.bannerAd0&&this.bannerAd0.hide(),this.bannerAd0&&this.bannerAd0.destroy(),this.bannerAd0=this.wx.createBannerAd({adUnitId:n.HOME_PAGE_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.bannerAd0.onResize(function(n){n&&(t.bannerAd0.style.top=e.screenHeight-n.height-i,t.bannerAd0.style.left=(e.screenWidth-n.width)/2)}),this.bannerAd0.onError(function(){}),this.bannerAd0.style.width=300,this.bannerAd1||(this.bannerAd1&&this.bannerAd1.destroy(),this.bannerAd1=this.wx.createBannerAd({adUnitId:n.HOME_PAGE_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.bannerAd1.onResize(function(n){n&&(t.bannerAd1.style.top=e.screenHeight-n.height-i,t.bannerAd1.style.left=(e.screenWidth-n.width)/2)}),this.bannerAd1.style.width=300),this.bannerAd1.show(),new Promise(function(e,n){t.bannerAd1.onLoad(e),t.bannerAd1.onError(n)}).then(function(){return t.showBanner?t.bannerAd1.show():Promise.reject()}))},t.hideWxBanner=function(){t.showBanner=!1,t.bannerAd0&&t.bannerAd0.hide(),t.bannerAd1&&t.bannerAd1.hide(),t.sucbannerAd0&&t.sucbannerAd0.hide(),t.sucbannerAd1&&t.sucbannerAd1.hide(),t.chabannerAd0&&t.chabannerAd0.hide(),t.chabannerAd1&&t.chabannerAd1.hide()},t.showBannerInChapterOrChallenge=function(){var t=this;if(!this.wx)return Promise.reject();this.showBanner=!0;var e=this.wx.getSystemInfoSync(),i=e.screenHeight/e.screenWidth>1.9?410:310;return i=e.screenWidth*i/720,0==this.chacurBanner?(this.chacurBanner=1,this.chabannerAd1&&this.chabannerAd1.hide(),this.chabannerAd1&&this.chabannerAd1.destroy(),this.chabannerAd1=this.wx.createBannerAd({adUnitId:n.SUC_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.chabannerAd1.onResize(function(n){n&&(t.chabannerAd1.style.top=e.screenHeight-n.height-i,t.chabannerAd1.style.left=(e.screenWidth-n.width)/2)}),this.chabannerAd1.onError(function(){}),this.chabannerAd1.style.width=300,this.chabannerAd0||(this.chabannerAd0&&this.chabannerAd0.destroy(),this.chabannerAd0=this.wx.createBannerAd({adUnitId:n.SUC_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.chabannerAd0.onResize(function(n){n&&(t.chabannerAd0.style.top=e.screenHeight-n.height-i,t.chabannerAd0.style.left=(e.screenWidth-n.width)/2)}),this.chabannerAd0.style.width=300),this.chabannerAd0.show(),new Promise(function(e,n){t.chabannerAd0.onLoad(e),t.chabannerAd0.onError(n)}).then(function(){return t.showBanner?t.chabannerAd0.show():Promise.reject()})):(this.chacurBanner=0,this.chabannerAd0&&this.chabannerAd0.hide(),this.chabannerAd0&&this.chabannerAd0.destroy(),this.chabannerAd0=this.wx.createBannerAd({adUnitId:n.SUC_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.chabannerAd0.onResize(function(n){n&&(t.chabannerAd0.style.top=e.screenHeight-n.height-i,t.chabannerAd0.style.left=(e.screenWidth-n.width)/2)}),this.chabannerAd0.onError(function(){}),this.chabannerAd0.style.width=300,this.chabannerAd1||(this.chabannerAd1&&this.chabannerAd1.destroy(),this.chabannerAd1=this.wx.createBannerAd({adUnitId:n.SUC_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.chabannerAd1.onResize(function(n){n&&(t.chabannerAd1.style.top=e.screenHeight-n.height-i,t.chabannerAd1.style.left=(e.screenWidth-n.width)/2)}),this.chabannerAd1.style.width=300),this.chabannerAd1.show(),new Promise(function(e,n){t.chabannerAd1.onLoad(e),t.chabannerAd1.onError(n)}).then(function(){return t.showBanner?t.chabannerAd1.show():Promise.reject()}))},t.showBannerInSucOrFail=function(){var t=this;if(!this.wx)return Promise.reject();this.showBanner=!0;var e=this.wx.getSystemInfoSync(),i=e.screenHeight/e.screenWidth>1.9?200:140;return i=e.screenWidth*i/720,0==this.succurBanner?(this.succurBanner=1,this.sucbannerAd1&&this.sucbannerAd1.hide(),this.sucbannerAd1&&this.sucbannerAd1.destroy(),this.sucbannerAd1=this.wx.createBannerAd({adUnitId:n.SUC_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.sucbannerAd1.onResize(function(n){n&&(t.sucbannerAd1.style.top=e.screenHeight-n.height-i,t.sucbannerAd1.style.left=(e.screenWidth-n.width)/2)}),this.sucbannerAd1.onError(function(){}),this.sucbannerAd1.style.width=300,this.sucbannerAd0||(this.sucbannerAd0&&this.sucbannerAd0.destroy(),this.sucbannerAd0=this.wx.createBannerAd({adUnitId:n.SUC_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.sucbannerAd0.onResize(function(n){n&&(t.sucbannerAd0.style.top=e.screenHeight-n.height-i,t.sucbannerAd0.style.left=(e.screenWidth-n.width)/2)}),this.sucbannerAd0.style.width=300),this.sucbannerAd0.show(),new Promise(function(e,n){t.sucbannerAd0.onLoad(e),t.sucbannerAd0.onError(n)}).then(function(){return t.showBanner?t.sucbannerAd0.show():Promise.reject()})):(this.succurBanner=0,this.sucbannerAd0&&this.sucbannerAd0.hide(),this.sucbannerAd0&&this.sucbannerAd0.destroy(),this.sucbannerAd0=this.wx.createBannerAd({adUnitId:n.SUC_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.sucbannerAd0.onResize(function(n){n&&(t.sucbannerAd0.style.top=e.screenHeight-n.height-i,t.sucbannerAd0.style.left=(e.screenWidth-n.width)/2)}),this.sucbannerAd0.onError(function(){}),this.sucbannerAd0.style.width=300,this.sucbannerAd1||(this.sucbannerAd1&&this.sucbannerAd1.destroy(),this.sucbannerAd1=this.wx.createBannerAd({adUnitId:n.SUC_BANNER_ADID,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.sucbannerAd1.onResize(function(n){n&&(t.sucbannerAd1.style.top=e.screenHeight-n.height-i,t.sucbannerAd1.style.left=(e.screenWidth-n.width)/2)}),this.sucbannerAd1.style.width=300),this.sucbannerAd1.show(),new Promise(function(e,n){t.sucbannerAd1.onLoad(e),t.sucbannerAd1.onError(n)}).then(function(){return t.showBanner?t.sucbannerAd1.show():Promise.reject()}))},t.wx=window.wx,t.bannerAd0=null,t.bannerAd1=null,t.curBanner=0,t.showBanner=!1,t.chabannerAd0=null,t.chabannerAd1=null,t.chacurBanner=0,t.sucbannerAd0=null,t.sucbannerAd1=null,t.succurBanner=0,t}();n.default=i,cc._RF.pop()},{}],Gamecontrol:[function(t,e,n){"use strict";cc._RF.push(e,"8027c4u09FP1aH3e7FuOIgj","Gamecontrol");var i=a(t("Player")),o=a(t("./ad/AdPartAManager"));function a(t){return t&&t.__esModule?t:{default:t}}var s=t("./TgaPlatform");cc.Class({extends:cc.Component,properties:{configData:cc.JsonAsset,YouxiUi:cc.Node,pickzhangjieUi:cc.Node,pickLevelUi:cc.Node,zhuyeUi:cc.Node,checkInUi:cc.Node,skinTrial:cc.Node,zhuyeUi2:cc.Node},ctor:function(){window.GameControl={},GameControl.isMusic=!0,GameControl.isSound=!0,this.first=0},onLoad:function(){s.showTitleAd(),GameControl.jsonData={configData:this.configData.json},GameControl.GameObject=this,this.first=this.getFirstTag(),GameControl.config=GameControl.jsonData.configData,GameControl.newPlayer=new i.default,this.Get_Level_Data(),this.Get_Local_Data()},start:function(){var t=this;GameControl.newPlayer.isFirstLoginToady()&&(this.checkInUi.active=o.default.INST.isShowCheckInBtnInHomePage()),GameControl.newPlayer.login(),this.scheduleOnce(function(){t.zhuyeUi.active=o.default.INST.isShowOldHomePage(),t.zhuyeUi2.active=!t.zhuyeUi.active},.5)},getFirstTag:function(){var t=cc.sys.localStorage.getItem("coin_key");return t||(t=0),t},Share_wx:function(){cc.sys.isMobile&&"undefined"!=typeof wx&&(wx.showShareMenu(),wx.onShareAppMessage(function(){return{title:GameControl.config.wx_share_title,imageUrl:GameControl.config.wx_share_icon}}))},SaveGameOK:function(t,e,n){if("undefined"!=typeof wx){var i=wx.getFileSystemManager(),o=wx.env.USER_DATA_PATH+"/"+t+".txt",a=this;i.writeFile({filePath:o,data:e,encoding:"utf8",success:function(){a.first++,a.first=Math.min(a.first,10),cc.sys.localStorage.setItem("coin_key",a.first)}})}else cc.sys.localStorage.setItem("ROPE-"+t,e)},LoadGameOK:function(t){if("undefined"!=typeof wx){var e=wx.getFileSystemManager(),n="",i=wx.env.USER_DATA_PATH+"/"+t+".txt";try{n=e.readFileSync(i,"utf8")}catch(t){n=""}return console.log(t+": "+n),n}return cc.sys.localStorage.getItem("ROPE-"+t)},Set_Local_Data:function(){var t=GameControl.newPlayer.m_iMoney,e=GameControl.newPlayer.m_currOpenGuan+","+GameControl.newPlayer.m_iCompleteGuanNum+","+t+","+GameControl.newPlayer.isMusicOn+","+GameControl.newPlayer.isSoundOn+","+GameControl.newPlayer.isShakeOn+","+GameControl.newPlayer.coinNumber+","+GameControl.newPlayer.checkInTimes+","+GameControl.newPlayer.lastLoginDay+","+GameControl.newPlayer.curTimeChallengMissionIdx+","+GameControl.newPlayer.curHardMissionIdx;this.SaveGameOK("Playerinfo",e,"\u73a9\u5bb6\u4fe1\u606f\u4fdd\u5b58\u6210\u529f");var n=GameControl.newPlayer.unlockedSkins,i=GameControl.newPlayer.curSkin;cc.sys.localStorage.setItem("unlock_skins",JSON.stringify(n)),cc.sys.localStorage.setItem("cur_skin",i)},Get_Local_Data:function(){var t=this.LoadGameOK("Playerinfo");if(null!=t&&""!=t){var e=t.split(",");GameControl.newPlayer.m_iMoney=parseInt(e[2]),GameControl.newPlayer.m_currOpenGuan=parseInt(e[0]),GameControl.newPlayer.m_iCompleteGuanNum=parseInt(e[1]),GameControl.newPlayer.isMusicOn="true"===e[3],GameControl.newPlayer.isSoundOn="true"===e[4],GameControl.newPlayer.isShakeOn="true"===e[5],GameControl.newPlayer.coinNumber=parseInt(e[6]),GameControl.newPlayer.checkInTimes=parseInt(e[7]),GameControl.newPlayer.lastLoginDay=e[8],GameControl.newPlayer.curTimeChallengMissionIdx=e[9],GameControl.newPlayer.curHardMissionIdx=e[10];var n=cc.sys.localStorage.getItem("unlock_skins"),i=cc.sys.localStorage.getItem("cur_skin");n&&(GameControl.newPlayer.unlockedSkins=JSON.parse(n)),i&&(GameControl.newPlayer.curSkin=i)}},Set_Level_Data:function(){var t="",e=0;for(var n in GameControl.newPlayer.m_mapLevelStar){e++,t+=","+n+","+GameControl.newPlayer.m_mapLevelStar[n]}t=e+t,this.SaveGameOK("Levelinfo",t,"\u5173\u5361\u4fe1\u606f\u4fdd\u5b58\u6210\u529f")},Get_Level_Data:function(){var t=this.LoadGameOK("Levelinfo");if(null!=t&&""!=t)for(var e=t.split(","),n=parseInt(e[0]),i=1,o=0;o<n;o++){var a=parseInt(e[i]);i++;var s=parseInt(e[i]);i++,GameControl.newPlayer.setLevelifo(a,s)}},ChangeMp3:function(){GameControl.m_bPlayMp3=!GameControl.m_bPlayMp3,GameControl.m_bPlayMp3?GameControl.jiazai.downPlayMp3(88,!0):this.StopBackMp3()},StopBackMp3:function(){cc.audioEngine.stop(GameControl.m_iBackMp3),cc.audioEngine.stop(GameControl.m_iFightMp3)}}),cc._RF.pop()},{"./TgaPlatform":"TgaPlatform","./ad/AdPartAManager":"AdPartAManager",Player:"Player"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"5a6a52zq7VENJkPnSnFc8bK","Game"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gravity=cc.v2(0,0),e.debugDraw=!1,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!!this.gravity,cc.director.getPhysicsManager().gravity=this.gravity,cc.director.getPhysicsManager().enabled=!0,this.debugDraw&&(cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit),cc.sys.platform==cc.sys.OPPO_GAME?window.qg.setPreferredFramesPerSecond(30):cc.sys.platform==cc.sys.WECHAT_GAME&&cc.game.setFrameRate(30),cc.PhysicsManager.POSITION_ITERATIONS=8,cc.PhysicsManager.VELOCITY_ITERATIONS=8,console.warn(cc.PhysicsManager.VELOCITY_ITERATIONS,cc.PhysicsManager.POSITION_ITERATIONS,cc.PhysicsManager.FIXED_TIME_STEP)},e.prototype.start=function(){},e.prototype.onEnable=function(){},__decorate([a],e.prototype,"gravity",void 0),__decorate([a],e.prototype,"debugDraw",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],GuideArrow:[function(t,e,n){"use strict";cc._RF.push(e,"d0482ju/3ZIGoUgbUM04m00","GuideArrow"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPos=null,e.endPos=null,e.duration=.5,e}return __extends(e,t),e.prototype.onLoad=function(){this.startPos||(this.startPos=this.node.getPosition()),this.endPos||(this.endPos=cc.v2(this.startPos.x+20,this.startPos.y)),this.move()},e.prototype.move=function(){this.node.runAction(cc.sequence(cc.moveTo(this.duration,this.endPos),cc.moveTo(this.duration,this.startPos)).repeatForever())},__decorate([a({type:cc.Vec2,tooltip:"\u79fb\u52a8\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u662f\u5f53\u524d\u4f4d\u7f6e"})],e.prototype,"startPos",void 0),__decorate([a({type:cc.Vec2,tooltip:"\u79fb\u52a8\u7684\u76ee\u6807\u4f4d\u7f6e, \u9ed8\u8ba4\u662f\u5f00\u59cb\u4f4d\u7f6e\u5411\u53f350\u5355\u4f4d"})],e.prototype,"endPos",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],Gun:[function(t,e,n){"use strict";cc._RF.push(e,"e18d0UHXDtKP5eyclOL0k+A","Gun"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fireSpeed=1,e.bulletPrefab=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.fireSpeed=this.fireSpeed>0?this.fireSpeed:1;var e=null;this.schedule(function(){(e=cc.instantiate(t.bulletPrefab)).rotation=0;for(var n=t.node;!n.name.startsWith("guanka");)e.rotation+=n.rotation,n=n.parent;var i=t.node.convertToWorldSpaceAR(cc.v2());i=n.convertToNodeSpaceAR(i),e.setPosition(i.x,i.y),n.addChild(e),e.zIndex=0},1/this.fireSpeed,cc.macro.REPEAT_FOREVER,0)},__decorate([a({type:cc.Float,tooltip:"\u5f00\u706b\u901f\u5ea6\uff0c\u9ed8\u8ba4\u6bcf\u79d21\u53d1"})],e.prototype,"fireSpeed",void 0),__decorate([a(cc.Prefab)],e.prototype,"bulletPrefab",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],HardLoseUI:[function(t,e,n){"use strict";cc._RF.push(e,"e66b3tZ9dxAu6uNy4ZHJTzx","HardLoseUI"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./TimeLoseUi"),o=t("../mission/HardMissMgr"),a=t("../MusicMgr"),s=t("../ViewMgr"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skip=function(){this.node.active=!1,this.player.passHardMission(o.default.instance.getCurMissionIdx()),this.node.active=!1,o.default.instance.loadMission(o.default.instance.getCurMissionIdx()+1)},e.prototype.replayAction=function(){a.default.instance.playBtn(),this.node.active=!1,o.default.instance.loadMission(o.default.instance.getCurMissionIdx())},e.prototype.backHomeAction=function(){a.default.instance.playBtn(),this.node.active=!1,s.default.instance.hideHardModeView(),window.GameControl.zhuye.node.active=!0,window.GameControl.zhuye.upDatethis()},e=__decorate([c],e)}(i.default));n.default=l,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../ViewMgr":"ViewMgr","../mission/HardMissMgr":"HardMissMgr","./TimeLoseUi":"TimeLoseUi"}],HardMissMgr:[function(t,e,n){"use strict";cc._RF.push(e,"47ed5yiBzRMO6WWq7B1HI1B","HardMissMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../GameLogic3"),o=t("../prefab/StandHuman"),a=t("../prefab/DragNode"),s=t("../prefab/StartPoint"),r=t("../prefab/EndPoint"),c=t("../prefab/Human"),l=t("../ui/HardWinUI"),d=t("../ui/HardLoseUI"),u=t("../utils/MathUtil"),h=t("../utils/SpriteUtil"),p=t("LanguageData"),m=cc._decorator,f=m.ccclass,g=m.property;n.HARD_MISSION_PREFIX="hardMode/guanka";var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameLogic=null,e.gameLogicNode=null,e.humanPrefab=null,e.hardWinUI=null,e.hardLoseUI=null,e.mainCamera=null,e.gameCamera=null,e.missionLabel=null,e.dots1=[],e.dots2=[],e.progress3=[],e.progress4=[],e.bgSprite=null,e.curHardMisIdx=0,e.curMissionData=null,e.littleMisCount=0,e.curLittleMisIdx=1,e.curPlatformHumans=0,e.curSavedHumans=0,e.curNeedHumans=0,e.inSlideHumans=0,e.dragNode=null,e.startNodeList=[],e.endPointList=[],e.humanLabel=null,e.humanLabelList=[],e.humans=[],e.missionNode=null,e.nextHumans=[],e.dragNodes=[],e.isTouch=!1,e.timer=0,e.isFinish=!1,e.startPos=null,e.isNext=!1,e.skin=0,e._canSlideDown=!1,e.wx=window.wx,e.endPointInWorld=null,e.grassPla=null,e.woodPla=null,e}var m;return __extends(e,t),m=e,e.prototype.onLoad=function(){var t=this;m.instance=this,window.hardM=this,this.node.on("touchstart",function(){t.isTouch=!0},this),this.node.on("touchend",function(){t.isTouch=!1},this),this.node.on("touchcancel",function(){t.isTouch=!1},this),this.gameLogic=this.gameLogicNode.getComponent(i.default)},e.prototype.update=function(t){this.touchSlideDown(t)},e.prototype.touchSlideDown=function(t){this.isTouch&&(this.timer+=t,this.timer>=.1&&(this.timer=0,this.slideDownAction()))},e.prototype.reset=function(){var t=this;this.mainCamera.node.setPosition(cc.v2()),this.isTouch=!1,this._canSlideDown=!1,this.unscheduleAllCallbacks(),this.curHardMisIdx=0,this.curMissionData=null,this.littleMisCount=0,this.curLittleMisIdx=1,this.curPlatformHumans=0,this.curSavedHumans=0,this.curNeedHumans=0,this.inSlideHumans=0,this.dragNode=null,this.startNodeList=[],this.endPointList=[],this.humanLabel=null,this.humanLabelList=[],this.curHumanLableScaleX=1,this.curHumanLableScaleY=1,this.humans=[],this.missionNode=null,this.nextHumans=[],this.dragNodes=[],this.node.children.forEach(function(e){e&&e.name.startsWith("guanka")&&e.active&&(t.node.removeChild(e),e.destroy())}),this.isFinish=!1},e.prototype.loadMission=function(t,e){var i=this;if(void 0===e&&(e=null),console.log("harmis:"+t),!(t<=0||t>window.GameControl.config.hardChallengeMaxNum)){this.reset(),this.gameLogic.showLine(),this.initMissionData(t),this.missionLabel.string=p.t("home.level")+t,e=this.skinCheck(e),this.skin=e;var c=n.HARD_MISSION_PREFIX+String(t).padStart(3,"0");cc.loader.loadRes(c,function(t,n){if(t)console.error(t);else{var c=cc.instantiate(n);i.node.addChild(c),c.setPosition(cc.v2(0,0)),i.gameLogic.init(),c.getComponentsInChildren(o.default).forEach(function(t){t.init(e)}),i.dragNode=c.getComponentInChildren(a.default).node,c.getComponentsInChildren(s.default).forEach(function(t){i.startNodeList.push(t.node)}),i.startNodeList.forEach(function(t,e){0!=e&&(t.active=!1)}),c.getComponentsInChildren(r.default).forEach(function(t){i.endPointList.push(t.node)}),c.getComponentsInChildren(a.default).forEach(function(t,e){i.dragNodes.push(t.node)}),i.dragNodes.forEach(function(t,e){0!=e&&(t.active=!1)}),i.humanLabelList=c.getComponentsInChildren(cc.Label).filter(function(t){return"humanCount"==t.node.name}),i.humanLabel=i.humanLabelList[i.curLittleMisIdx-1],i.curHumanLableScaleX=i.humanLabel.node.scaleX,i.curHumanLableScaleY=i.humanLabel.node.scaleY,i.missionNode=c,i.changeSomeImg(c),i.changeBg(),i.addHumansIns(i.curPlatformHumans,e),i.updateInfo(),i.gameLogic.showLine(),i.node.active=!0}})}},e.prototype.initMissionData=function(t){if(!(t<=0||t>window.GameControl.config.hardChallengeMaxNum)){var e=String(t).padStart(3,"0"),n=window.GameControl.config["hard"+e],i=n[1];this.curHardMisIdx=t,this.curMissionData=n,this.littleMisCount=Object.keys(n).length,this.curLittleMisIdx=1,this.curPlatformHumans=i.bornHuman,this.curNeedHumans=i.needHuman,2==this.littleMisCount?(this.dots1.forEach(function(t,e){t.active=1!=e&&3!=e}),this.dots2.forEach(function(t,e){t.active=0!=e&&1!=e&&3!=e})):(this.dots1.forEach(function(t,e){t.active=2!=e}),this.dots2.forEach(function(t,e){t.active=0!=e&&2!=e})),this.progress3.forEach(function(t){t.active=!1}),this.progress4.forEach(function(t){t.active=!1})}},e.prototype.addHumansIns=function(t,e){var n=null,i=null,o=null;this.node.children.forEach(function(t){t.name.startsWith("guanka")&&(o=t,n=t.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("startPos"),i=t.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.v2())))}),i.y=i.y-n.height;for(var a=null,s=null,r=0;r<t;r++)a=null,s=null,(a=cc.instantiate(this.humanPrefab)).name="human"+r,s=a.getComponent(c.default),a.setPosition(i),o.addChild(a),s.initBySkinIdx(e),this.humans.push(s)},e.prototype.updateInfo=function(){this.humanLabel&&(this.humanLabel.node.stopAllActions(),this.humanLabel.node.scaleX=this.curHumanLableScaleX,this.humanLabel.node.scaleY=this.curHumanLableScaleY,this.humanLabel.node.runAction(cc.sequence(cc.scaleTo(.1,1.2*this.curHumanLableScaleX,1.2*this.curHumanLableScaleY),cc.scaleTo(.1,1*this.curHumanLableScaleX,1*this.curHumanLableScaleY)))),this.humanLabel&&(this.humanLabel.string=this.curSavedHumans+"/"+this.curNeedHumans)},e.prototype.skinCheck=function(t){var e=window.GameControl.newPlayer;return null==t?e.curSkin:e.isTrialSkin(t)&&e.isTrialSkinOutTime()?e.curSkin:t},e.prototype.savedStandHuman=function(t){void 0===t&&(t=1),this.isFinish||(this.curSavedHumans+=t,this.updateInfo(),this.winOrLost())},e.prototype.savedHuman=function(t){void 0===t&&(t=1),this.isFinish||(this.curSavedHumans+=t,this.curPlatformHumans-=t,this.updateInfo(),this.winOrLost())},e.prototype.dieHuman=function(t){var e=this;void 0===t&&(t=1),this.isFinish||(this.curPlatformHumans-=t,this.humanOutSlide(),this.curNeedHumans!=this.curPlatformHumans?this.winOrLost():this.schedule(function(){e.hardLoseUI.showView(e.curHardMisIdx)},5,0,.5))},e.prototype.winOrLost=function(){var t=this;if(!this.isFinish&&this.curPlatformHumans<=0&&this.inSlideHumans<=1){if(this.curSavedHumans>=this.curNeedHumans)return void this.schedule(function(){t.winOrNext()},5,0,1e-10);console.log("lose"),this.isFinish=!0,this.hardLoseUI.showView(this.curHardMisIdx)}},e.prototype.winOrNext=function(){var t=this,e=this.curLittleMisIdx;if(this.endPointList[e-1].active=!1,this.endPointList[e-1].destroy(),this.dragNode.getComponent(cc.MouseJoint).enabled=!1,this.dragNode.getComponent(cc.PhysicsCollider).enabled=!1,this.dragNode.getComponent(cc.RigidBody).enabled=!1,this._canSlideDown=!1,this.curLittleMisIdx==this.littleMisCount)return console.log("win"),this.isFinish=!0,this.hardWinUI.showView(this.curHardMisIdx),window.GameControl.newPlayer.passHardMission(this.curHardMisIdx),this.gameLogic.clearAndHideLine(),void this.node.children.forEach(function(e){e&&e.name.startsWith("guanka")&&e.active&&(t.node.removeChild(e),e.destroy())});if(!this.isNext){console.log("next"),this.isNext=!0,this.mainCamera.node.runAction(cc.moveBy(1,cc.v2(0,-640))),this.endPointList[e-1].active=!1;var n=this.startNodeList[e];n&&(n.active=!0);var i=this.endPointList[e];i&&(i.active=!0),this.humanLabel=this.humanLabelList[e],this.humanLabel&&(this.curHumanLableScaleX=this.humanLabel.node.scaleX,this.curHumanLableScaleY=this.humanLabel.node.scaleY),this.startNodeList.forEach(function(n,i){i==e&&(n&&n.position&&(t.startPos=n.convertToWorldSpaceAR(cc.v2())),n&&n.parent&&(n.parent.active=!0),n&&n.parent&&((o=n.parent.getChildByName("fireBig"))&&(o.active=!0),(o=n.parent.getChildByName("fireSmall"))&&(o.active=!0)))});var o=null;this.endPointList.forEach(function(t,n){n==e-1&&t&&t.parent&&((o=t.parent.getChildByName("wood"))&&(o.active=!1),(o=t.parent.getChildByName("xuxianquan"))&&(o.active=!1))}),this.showProgress(),this.gameLogic.clearAndHideLine(),this.schedule(function(){t.gameLogic.init(n,t.dragNode,i),t.gameLogic.reDrawLine(t.dragNode.convertToWorldSpaceAR(cc.v2())),t.curPlatformHumans=t.curSavedHumans,t.curSavedHumans=0;var e=t.curMissionData[String(t.curLittleMisIdx+1)];t.curNeedHumans=e.needHuman,t.humanLabel&&(t.humanLabel.string=t.curSavedHumans+"/"+t.curNeedHumans),t.schedule(function(){var e=cc.v2();e.x=t.dragNode.x+35,e.y=t.dragNode.y-t.gameCamera.node.y,t.dragNode.setPosition(e),t.dragNode.getComponent(cc.MouseJoint).enabled=!0,t.dragNode.getComponent(cc.PhysicsCollider).enabled=!0,t.dragNode.getComponent(cc.RigidBody).enabled=!0,t.humans=t.nextHumans,t.nextHumans=[],t.humans.forEach(function(e,n){e&&(e.node.getComponent(cc.PhysicsCollider).enabled=!0,e.initBySkinIdx&&e.initBySkinIdx(t.skin,t.startPos),e.init&&e.init(t.skin,t.startPos),e.init&&e.randomRun&&e.randomRun())}),t.isNext=!1},.2,0),t.inSlideHumans=0,t.gameLogic.showLine(),t.curLittleMisIdx++},1.5,0)}},e.prototype.showProgress=function(){for(var t=0;t<this.dots2.length;t++)if(this.dots2[t].active){this.dots2[t].active=!1;break}if(2==this.littleMisCount){for(t=0;t<this.progress3.length;t++)if(!this.progress3[t].active){this.progress3[t].active=!0;break}}else for(t=0;t<this.progress4.length;t++)if(!this.progress4[t].active){this.progress4[t].active=!0;break}},e.prototype.canSlideDown=function(){return this._canSlideDown},e.prototype.setCanSlideDown=function(t){t?this.gameLogic.showGreenRope():this.gameLogic.showYellowRope(),this._canSlideDown=t},e.prototype.slideDownAction=function(){if(this._canSlideDown&&this.humans&&!(this.humans.length<=0)){this.wx&&this.wx.vibrateShort(),this.humanInSlide();var t=this.humans.shift();t.node.getComponent(cc.PhysicsCollider).enabled=!0,t.slideDown2?(t.isFromPlat=!0,t.slideDown2(this.gameLogic.getLines())):t.slideDown(this.gameLogic.getLines())}},e.prototype.goInNextHumans=function(t){this.nextHumans.push(t)},e.prototype.getEndPoint=function(){return this.endPointInWorld},e.prototype.setEndPoint=function(t){this.endPointInWorld=t},e.prototype.humanInSlide=function(){this.inSlideHumans++},e.prototype.humanOutSlide=function(){this.inSlideHumans--},e.prototype.canDragNode=function(){return this.inSlideHumans<=0},e.prototype.getCurMissionIdx=function(){return this.curHardMisIdx},e.prototype.onDisable=function(){this.reset(),this.unscheduleAllCallbacks()},e.prototype.changeBg=function(){var t=u.default.getRandomInteger(1,8);h.default.LoadLocalImg(this.bgSprite,"bg/"+t)},e.prototype.changeSomeImg=function(t){var e=this;t.getComponentsInChildren(s.default).map(function(t){return t.node.parent}).forEach(function(t,e){0!=e&&t.children.forEach(function(t){if("startImg"!=t.name&&"fireBig"!=t.name&&"fireSmall"!=t.name&&"reel"!=t.name||(t.active=!1),"house"==t.name){t.anchorY=0,t.x=-10,t.y=15;var e=u.default.getRandomInteger(1,5);h.default.LoadLocalImg(t.getComponent(cc.Sprite),"house/house"+e)}})});var n=null,i=t.getComponentsInChildren(r.default).map(function(t){return t.node.parent});i.forEach(function(t,o){if(o!=i.length-1){t.getComponent(cc.Sprite).enabled=!1,(n=t.getChildByName("jiuhuche"))&&(n.active=!1);var a=cc.instantiate(e.woodPla);a.name="wood",a.setPosition(-80,-20),a.parent=t}})},e.instance=null,__decorate([g({type:cc.Node})],e.prototype,"gameLogicNode",void 0),__decorate([g(cc.Prefab)],e.prototype,"humanPrefab",void 0),__decorate([g(l.default)],e.prototype,"hardWinUI",void 0),__decorate([g(d.default)],e.prototype,"hardLoseUI",void 0),__decorate([g(cc.Camera)],e.prototype,"mainCamera",void 0),__decorate([g(cc.Camera)],e.prototype,"gameCamera",void 0),__decorate([g(cc.Label)],e.prototype,"missionLabel",void 0),__decorate([g([cc.Node])],e.prototype,"dots1",void 0),__decorate([g([cc.Node])],e.prototype,"dots2",void 0),__decorate([g([cc.Node])],e.prototype,"progress3",void 0),__decorate([g([cc.Node])],e.prototype,"progress4",void 0),__decorate([g(cc.Sprite)],e.prototype,"bgSprite",void 0),__decorate([g(cc.Prefab)],e.prototype,"grassPla",void 0),__decorate([g(cc.Prefab)],e.prototype,"woodPla",void 0),e=m=__decorate([f],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../GameLogic3":"GameLogic3","../prefab/DragNode":"DragNode","../prefab/EndPoint":"EndPoint","../prefab/Human":"Human","../prefab/StandHuman":"StandHuman","../prefab/StartPoint":"StartPoint","../ui/HardLoseUI":"HardLoseUI","../ui/HardWinUI":"HardWinUI","../utils/MathUtil":"MathUtil","../utils/SpriteUtil":"SpriteUtil",LanguageData:"LanguageData"}],HardModeGameUI:[function(t,e,n){"use strict";cc._RF.push(e,"f3f90dma3BHVovbjgTJ4Ymu","HardModeGameUI"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../mission/HardMissMgr"),o=t("../MusicMgr"),a=t("../TgaPlatform"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stopUi=null,e.player=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.player=window.GameControl.newPlayer},e.prototype.stopAction=function(){o.default.instance.playBtn(),this.stopUi.active=!0},e.prototype.skipAction=function(){var t=this;a.showRewardAd({onReward:function(){t._skip()}})},e.prototype._skip=function(){this.player.passHardMission(i.default.instance.getCurMissionIdx()),i.default.instance.loadMission(this.player.getCurHardMissionIdx())},e.prototype.replayAction=function(){i.default.instance.loadMission(i.default.instance.getCurMissionIdx())},__decorate([c(cc.Node)],e.prototype,"stopUi",void 0),e=__decorate([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../TgaPlatform":"TgaPlatform","../mission/HardMissMgr":"HardMissMgr"}],HardWinUI:[function(t,e,n){"use strict";cc._RF.push(e,"28e423rJghF7ZTidgydnWL6","HardWinUI"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./TimeWinUI"),o=t("../MusicMgr"),a=t("../mission/HardMissMgr"),s=t("../ViewMgr"),r=t("../utils/Common/GameUtil"),c=t("../ad/AdPartAManager"),l=cc._decorator,d=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onEnable=function(){var t=this;this.player.passHardMission(a.default.instance.getCurMissionIdx()),this.scheduleOnce(function(){t.nextguanBtn.active=!0},1.5),this.schedule(function(){r.default.showBannerInSucOrFail()},c.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},e.prototype.replayAction=function(){o.default.instance.playBtn(),this.node.active=!1,a.default.instance.loadMission(a.default.instance.getCurMissionIdx())},e.prototype.nextMissionAction=function(){o.default.instance.playBtn(),this.node.active=!1,console.log("mis:"+a.default.instance.getCurMissionIdx()),a.default.instance.loadMission(Number(a.default.instance.getCurMissionIdx())+1)},e.prototype.backHomeAction=function(){o.default.instance.playBtn(),this.node.active=!1,s.default.instance.hideHardModeView(),window.GameControl.zhuye.node.active=!0,window.GameControl.zhuye.upDatethis()},e=__decorate([d],e)}(i.default));n.default=u,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../ViewMgr":"ViewMgr","../ad/AdPartAManager":"AdPartAManager","../mission/HardMissMgr":"HardMissMgr","../utils/Common/GameUtil":"GameUtil","./TimeWinUI":"TimeWinUI"}],HttpUtils:[function(t,e,n){"use strict";cc._RF.push(e,"1e9feM1q6VP14bxZndUxc0f","HttpUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../querystring"),o=function(){function t(){}return t.requestSync=function(e,n,i,o,a,s){if(this.wx)this.wx.request({url:e,data:n,header:{"content-type":"application/x-www-form-urlencoded"},method:i,success:function(t){o&&o(t.data)},fail:function(t){a&&a(t)},complete:function(t){s&&s(t)}});else{var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState){var t=r.responseText;if(r.status>=200&&r.status<400){var e={};try{e=JSON.parse(t)}catch(e){console.error("json parse error ",t),a&&a(e)}o&&o(e)}else console.error("error ",t),a&&a(t)}},r.timeout=3e3,r.ontimeout=function(t){console.error("error ",t),a&&a(t)},r.open(i,e,!0),"POST"==i.toUpperCase()?(r.open("POST",e),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(t._object2Query(n))):r.send()}},t.requestAsync=function(e,n,o){return new Promise(function(a,s){var r=new XMLHttpRequest;r.timeout=3e3,r.ontimeout=function(t){console.error("error ",t),s(t)},r.onload=function(){return a(r.responseText)},r.onerror=function(t){return s("")},"POST"==o.toUpperCase()?(r.open(o,e),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(t._object2Query(n))):(e=e+"?"+i.encode(n),console.log(e),r.open(o,e,!0),r.send())}).then(function(t){try{var e=JSON.parse(t);return new Promise(function(t,n){e.code?t(e.result):n(e.msg)})}catch(t){return Promise.reject(t)}})},t._object2Query=function(t){var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")},t.wx=window.wx,t}();n.default=o,cc._RF.pop()},{"../querystring":"index"}],Human:[function(t,e,n){"use strict";cc._RF.push(e,"4464bp0ScZAJoRZMKf0quId","Human"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../mission/MissionMgr"),o=t("../utils/MathUtil"),a=t("../utils/CommonUtil"),s=t("./StandHuman"),r=t("../utils/SpriteUtil"),c=t("./DragNode"),l=t("../mission/TimeMissionMgr"),d=t("../mission/HardMissMgr"),u=t("../MusicMgr"),h=cc._decorator,p=h.ccclass,m=h.property,f=["ffb612","0dbbff","f53f2f","ff5b20","ffdf28","b0e300"],g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.blood=null,e.jumpName="jump",e.slideDownName="slideDown",e.startPos=null,e.collider=null,e.missionMgr=null,e.animState=null,e.isDie=!1,e.isWudi=!1,e.lines=[],e.actionIdx=0,e.speed=500,e}return __extends(e,t),e.prototype.start=function(){this.collider=this.getComponent(cc.Collider),this.missionMgr=this.node.parent.parent.getComponent(i.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.getComponent(l.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.getComponent(d.default)},e.prototype.initBySkinIdx=function(t,e){void 0===e&&(e=null),t<=0&&(console.warn("\u76ae\u80a4\u4e0d\u5408\u6cd5\uff0c\u5df2\u91cd\u7f6e\uff01"),t=1),this.startPos=e?this.node.parent.convertToNodeSpaceAR(e):this.node.position,this.startPos=e?cc.v2(this.startPos.x,this.startPos.y-25):this.startPos,e&&this.node.setPosition(this.startPos),this.node.getComponent(cc.RigidBody).fixedRotation=!0,this.changeSkin(t),this.lines=[],this.anim||(this.anim=this.getComponent(cc.Animation))},e.prototype.changeSkin=function(t){var e=this;if(!(t<=0)){var n=window.GameControl.config.skins[String(t)],i="skin"+t+"_"+this.getSkinABC(o.default.getRandomInteger(1,n.length+1));if(1==t){var s=a.default.getRandomElesFromListNoRepeat(f,1)[0];this.node&&(this.node.color=(new cc.Color).fromHEX(s))}this.jumpName="jump",this.slideDownName="slideDown",this.jumpName+="_"+i,this.slideDownName+="_"+i;var c="skin/"+i+"1",l=this.getComponent(cc.Sprite);r.default.LoadLocalImg(l,c),this.node.width=34,this.node.height=38,this.scheduleOnce(function(){e.randomRun()},.5)}},e.prototype.getSkinABC=function(t){switch(t){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D";case 5:return"E";case 6:return"F";case 7:return"G";default:return"A"}},e.prototype.randomRun=function(){var t=this.node.parent.getComponentInChildren(c.default).node.x-this.node.x>=0?1:-1;this.smallJumpAnim(0,this.jumpName,5);var e=cc.v2(this.startPos.x-o.default.getRandomInteger(100,150)*t,this.startPos.y);this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveTo(o.default.getRandomNumber(1,5),e),cc.moveTo(o.default.getRandomNumber(1,5),cc.v2(this.startPos.x-30*t-o.default.getRandomInteger(0,5)*t,this.startPos.y))).repeatForever())},e.prototype.smallJumpAnim=function(t,e,n){var i=this;return new Promise(function(t,o){if(!i.animState||!i.animState.isPlaying){i.anim.stop(),i.animState=i.anim.play(e);i.node.runAction(cc.sequence(cc.moveBy(.25,cc.v2(0,n)),cc.moveBy(.25,cc.v2(0,-n)),cc.callFunc(function(){t()})).repeatForever())}})},e.prototype.goInEndPoint=function(){var t=this;this.collider.enabled=!1,this.node.anchorY=0,this.node.rotation=0,this.isWudi=!0,u.default.instance.playHumanGoInEnd();var e=this.node.parent.convertToNodeSpaceAR(this.missionMgr.humanLabel.node.convertToWorldSpaceAR(cc.v2())).x-this.node.x>=0?1:-1;this.node.runAction(cc.sequence(cc.moveBy(o.default.getRandomInteger(0,1),cc.v2(o.default.getRandomInteger(20,50)*e,-40)),cc.callFunc(function(){t.anim.stop(),t.smallJumpAnim(0,t.jumpName,5)})))},e.prototype.onBeginContact=function(t,e,n){if("damageObstacle"!=n.node.group||this.isDie){if("standHuman"==n.node.group){var i=n.node.getComponent(s.default);if(i&&i.isMove)return;return i&&i.slideDown(this.lines,this.actionIdx-1,this.node.convertToWorldSpaceAR(cc.v2())),void this.missionMgr.humanInSlide()}n.node.group}else this.die()},e.prototype.die=function(){var t=this;if(!this.isWudi&&!this.isDie){this.isDie=!0,this.missionMgr.dieHuman(),this.node.stopAllActions();var e=this.node.getComponent(cc.RigidBody),n=Math.random()<.5?1:-1,i=Math.random()<.5?1:-1;this.node.runAction(cc.moveBy(.05,cc.v2(o.default.getRandomInteger(50,75)*n,o.default.getRandomInteger(50,75)*i)).repeatForever()),e.enabledContactListener=!1,this.scheduleOnce(function(){t.getComponent(cc.PhysicsBoxCollider).sensor=!0},.1),this.scheduleOnce(function(){for(var e=o.default.getRandomInteger(5,10),n=t.node.position,i=null,a=0;a<e;a++)n.x+=o.default.getRandomInteger(-90,90),n.y+=o.default.getRandomInteger(-90,90),(i=cc.instantiate(t.blood))&&i.setPosition(n),i&&t.node.parent.addChild(i);t.scheduleOnce(function(){t.node.active=!1,t.destroy()},3)},o.default.getRandomNumber(.01,.1))}},e.prototype.onEndContact=function(t,e,n){},e.prototype.slideDown=function(t){var e=this;if(t&&!(t.length<=0)){this.isWudi=!1,this.scheduleOnce(function(){u.default.instance.playSlide()},.2),this.lines=t,this.actionIdx=0,this.node&&this.node.stopAllActions(),this.node.anchorY=.6,this.collider.enabled=!1;var n=this.node.parent.convertToNodeSpaceAR(t[0].point1);this.node.setPosition(n),this.collider.enabled=!0;for(var i,o,a,s,r=[],c=0;c<t.length;c++)s=t[c],c>0&&(o=new cc.Vec2(s.point0.x,s.point0.y),o=this.node.parent.convertToNodeSpaceAR(s.point0),a=new cc.Vec2(s.point1.x,s.point1.y),a=this.node.parent.convertToNodeSpaceAR(s.point1),r.push(this.lineTo(i,o)),s.collider instanceof cc.PhysicsCircleCollider&&(r=r.concat(this.circleTo(o,a,s.angle0,s.angle1,s.collider,s.clockwise)))),i=new cc.Vec2(s.point1.x,s.point1.y),i=this.node.parent.convertToNodeSpaceAR(i);i=new cc.Vec2(t[t.length-1].point1.x,t[t.length-1].point1.y),i=this.node.parent.convertToNodeSpaceAR(i);var l=this.missionMgr.getEndPoint();l=this.node.parent.convertToNodeSpaceAR(l),r.push(this.lineTo(i,l)),this.scheduleOnce(function(){e.node.runAction(cc.sequence(cc.moveTo(0,e.startPos),cc.callFunc(function(){e.node.setPosition(e.startPos),e.slideAction(r)}))),e.anim.stop(),e.animState=e.anim.play(e.slideDownName)},.1)}},e.prototype.slideAction=function(t){var e=this;if(this.actionIdx>=t.length)return this.getComponent(cc.PhysicsCollider).enabled=!1,this.missionMgr.humanOutSlide(),this.missionMgr.savedHuman(),this.missionMgr.goInNextHumans&&this.missionMgr.goInNextHumans(this),void this.goInEndPoint();this.node.rotation=0;var n=t[this.actionIdx];this.actionIdx++,this.node.runAction(cc.sequence(n,cc.callFunc(function(){e.slideAction(t)})))},e.prototype.lineTo=function(t,e){var n=t.sub(e).mag()/this.speed;return cc.moveTo(n,e)},e.prototype.circleTo=function(t,e,n,i,o,a){var s=[],r=i-n,c=r/Math.PI,l=r%Math.PI,d=c>0?Math.PI:-Math.PI;c=Math.floor(Math.abs(c));for(var u=o.radius,h=t,p=n,m=[],f=0;f<c;f++)m=this.getBezier(h,p+d*f,d,o,a),s.push(cc.moveTo(0,m[0])),s.push(cc.bezierTo(Math.abs(d)*u/this.speed,[m[1],m[2],m[3]])),h=m[3];return 0!=l&&(m=this.getBezier(h,p+d*c,l,o,a),s.push(cc.moveTo(0,m[0])),s.push(cc.bezierTo(Math.abs(l)*u/this.speed,[m[1],m[2],m[3]]))),s},e.prototype.getBezier=function(t,e,n,i,o){var a=i.radius,s=4/3*((1-Math.cos(n/2))/Math.sin(n/2)),r=cc.v2(1,0),c=cc.v2(1,-s),l=r.rotate(n),d=c.rotate(n),u=cc.v2(1,s);l.mulSelf(a),d.mulSelf(a),u.mulSelf(a),r.mulSelf(a);var h=o?Math.PI/2:-Math.PI/2;l.rotateSelf(h+e),d.rotateSelf(h+e),u.rotateSelf(h+e),r.rotateSelf(h+e);var p=i.node.convertToWorldSpaceAR(cc.v2());return p=this.node.parent.convertToNodeSpaceAR(p),l.addSelf(p),d.addSelf(p),u.addSelf(p),r.addSelf(p),[r,u,d,l]},__decorate([m(cc.Animation)],e.prototype,"anim",void 0),__decorate([m(cc.Prefab)],e.prototype,"blood",void 0),e=__decorate([p],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../mission/HardMissMgr":"HardMissMgr","../mission/MissionMgr":"MissionMgr","../mission/TimeMissionMgr":"TimeMissionMgr","../utils/CommonUtil":"CommonUtil","../utils/MathUtil":"MathUtil","../utils/SpriteUtil":"SpriteUtil","./DragNode":"DragNode","./StandHuman":"StandHuman"}],IPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"ebdbbJPn7tNe7M0wj5FqSCI","IPlatform"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ITracker:[function(t,e,n){"use strict";cc._RF.push(e,"6083fvO8ilE5o9+51SISUk3","ITracker"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],JumpHuman:[function(t,e,n){"use strict";cc._RF.push(e,"d2feaZ9DAVPbJCQL98ia6A+","JumpHuman"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/MathUtil"),o=t("../utils/CommonUtil"),a=cc._decorator,s=a.ccclass,r=a.property,c=["ffb612","0dbbff","f53f2f","ff5b20","ffdf28","b0e300"],l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.jumpName="jump",e}return __extends(e,t),e.prototype.onEnable=function(){this.init(1)},e.prototype.init=function(t){t<=0&&(console.warn("\u76ae\u80a4\u4e0d\u5408\u6cd5\uff0c\u5df2\u91cd\u7f6e\uff01"),t=1),this.changeSkin(t)},e.prototype.changeSkin=function(t){var e=this;if(!(t<=0)){var n=window.GameControl.config.skins[String(t)],a="skin"+t+"_"+this.getSkinABC(i.default.getRandomInteger(1,n.length+1));if(1==t){var s=o.default.getRandomElesFromListNoRepeat(c,1)[0];this.node.color=(new cc.Color).fromHEX(s)}this.jumpName+="_"+a,this.scheduleOnce(function(){e.anim.stop(),e.anim.play(e.jumpName)},i.default.getRandomNumber(.1,2))}},e.prototype.getSkinABC=function(t){switch(t){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D";case 5:return"E";case 6:return"F";case 7:return"G";default:return"A"}},__decorate([r(cc.Animation)],e.prototype,"anim",void 0),e=__decorate([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../utils/CommonUtil":"CommonUtil","../utils/MathUtil":"MathUtil"}],LanguageData:[function(t,e,n){"use strict";cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var i=t("polyglot.min"),o=null;function a(t){return window.i18n.languages[t]}function s(t){t&&(o?o.replace(t):o=new i({phrases:t,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=a(t)||{};window.i18n.curLang=t,s(e),this.inst=o}},t:function(t,e){if(o)return o.t(t,e)},inst:o,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],n=0;n<t.length;++n){var i=t[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,i)}for(var o=0;o<e.length;++o){var a=e[o];a.node.active&&a.updateLabel()}for(var s=[],r=0;r<t.length;++r){var c=t[r].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(s,c)}for(var l=0;l<s.length;++l){var d=s[l];d.node.active&&d.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],Laser:[function(t,e,n){"use strict";cc._RF.push(e,"546dea9bWpElb4kI8JMHuxq","Laser"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./StandHuman"),o=t("./Human"),a=t("../MusicMgr"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRotate=!1,e.rotateSpeed=30,e.isMove=!1,e.moveSpeed=1,e.moveTargetPoint=null,e.light=null,e.lightLen=1500,e.isPowerOff=!1,e.powerOffInterval=5,e.powerOffTime=1,e.powerOffOffset=0,e.physicsMgr=null,e.baseStart=null,e.startPoint=null,e.endPoint=null,e.rayResults=[],e.rayResult=null,e.checkPoint=null,e.powerOffTimer=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.baseStart=this.node.position,this.physicsMgr=cc.director.getPhysicsManager(),this.light&&(this.light.width=this.lightLen),this.powerOffTimer=this.powerOffOffset,this.lightAction(),this.moveTargetPoint||(this.moveTargetPoint=cc.v2(this.node.x+200,this.node.y));var t=this.baseStart.sub(this.moveTargetPoint).mag()/500*this.moveSpeed;this.isRotate&&this.isMove?this.node.runAction(cc.sequence(cc.spawn(cc.rotateBy(1/t,this.rotateSpeed*t),cc.moveTo(1/t,this.moveTargetPoint)),cc.spawn(cc.rotateBy(1/t,this.rotateSpeed*t),cc.moveTo(1/t,this.baseStart))).repeatForever()):this.isRotate?this.node.runAction(cc.rotateBy(1,this.rotateSpeed).repeatForever()):this.isMove&&this.node.runAction(cc.sequence(cc.moveTo(1/t,this.moveTargetPoint),cc.moveTo(1/t,this.baseStart)).repeatForever())},e.prototype.lightAction=function(){var t=this.light.scaleX,e=this.light.scaleY;this.light.runAction(cc.sequence(cc.scaleTo(0,t,-1*e),cc.delayTime(.1),cc.scaleTo(0,t,1*e),cc.delayTime(.1)).repeatForever())},e.prototype.update=function(t){this.light&&(this.isPowerOff&&(this.powerOffTimer+=t,this.powerOffTimer>=this.powerOffInterval+this.powerOffTime&&(this.powerOffTimer=0,this.work()),this.powerOffTimer>=this.powerOffInterval)?this.powerOff():this.work())},e.prototype.powerOff=function(){this.light.width=0},e.prototype.work=function(){if(this.startPoint=this.node.convertToWorldSpaceAR(cc.v2()),this.endPoint=this.node.convertToWorldSpaceAR(cc.v2(this.lightLen,0)),this.rayResults=this.physicsMgr.rayCast(this.startPoint,this.endPoint,cc.RayCastType.Closest),(!this.rayResults||this.rayResults.length<=0)&&(this.light.width=this.lightLen),this.rayResults&&this.rayResults.length>0)switch(this.rayResult=this.rayResults[0],this.rayResult.collider.node.group){case"human":this.rayResult.collider.node.getComponent(o.default).die(),a.default.instance.playGearOrLaser();break;case"standHuman":this.rayResult.collider.node.getComponent(i.default).die(),a.default.instance.playGearOrLaser();break;case"damageObstacle":case"normalObstacle":case"default":this.checkPoint=this.rayResult.point,this.light.width=(this.startPoint.sub(this.checkPoint).mag()-this.node.width/2)/this.light.scaleX}},__decorate([c(Boolean)],e.prototype,"isRotate",void 0),__decorate([c({type:cc.Integer,tooltip:"\u81ea\u8f6c\uff0c\u6bcf\u79d2\u65cb\u8f6c\u7684\u89d2\u5ea6,\u5f00\u542f\u65cb\u8f6c\u540e\u6709\u6548"})],e.prototype,"rotateSpeed",void 0),__decorate([c(Boolean)],e.prototype,"isMove",void 0),__decorate([c({type:cc.Integer,tooltip:"\u79fb\u52a8\uff0c\u6bcf\u79d2\u79fb\u52a8\u7684\u8ddd\u79bb,\u5f00\u542f\u79fb\u52a8\u540e\u6709\u6548"})],e.prototype,"moveSpeed",void 0),__decorate([c({type:cc.Vec2,tooltip:"\u79fb\u52a8\u7684\u76ee\u6807\u70b9,\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u5750\u6807\u7cfb\u4e0b,\u53f3\u65b9200\u50cf\u7d20\u5904,\u5f00\u542f\u79fb\u52a8\u540e\u6709\u6548"})],e.prototype,"moveTargetPoint",void 0),__decorate([c(cc.Node)],e.prototype,"light",void 0),__decorate([c({type:cc.Integer,tooltip:"\u6fc0\u5149\u7684\u9ed8\u8ba4\u957f\u5ea6"})],e.prototype,"lightLen",void 0),__decorate([c({type:Boolean,tooltip:"\u662f\u5426\u542f\u52a8\u65ad\u7535"})],e.prototype,"isPowerOff",void 0),__decorate([c({type:cc.Float,tooltip:"\u4e24\u6b21\u65ad\u7535\u4e4b\u95f4\u7684\u95f4\u9694, \u5f00\u542f\u65ad\u7535\u540e\u6709\u6548"})],e.prototype,"powerOffInterval",void 0),__decorate([c({type:cc.Float,tooltip:"\u6bcf\u6b21\u65ad\u7535\u7684\u65f6\u957f, \u5f00\u542f\u65ad\u7535\u540e\u6709\u6548"})],e.prototype,"powerOffTime",void 0),__decorate([c({type:cc.Float,tooltip:"\u7b2c\u4e00\u6b21\u65ad\u7535\u7684\u63d0\u524d\u65f6\u95f4, \u5f00\u542f\u65ad\u7535\u540e\u6709\u6548"})],e.prototype,"powerOffOffset",void 0),e=__decorate([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../MusicMgr":"MusicMgr","./Human":"Human","./StandHuman":"StandHuman"}],LevelItem:[function(t,e,n){"use strict";cc._RF.push(e,"46fa9bg/8pDQKSurBrHi3gK","LevelItem"),cc.Class({extends:cc.Component,properties:{guanIndex:cc.Label,sprbg:[cc.Node],starList:[cc.Node],lock:cc.Node},ctor:function(){this.m_iGuanIndex=0},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.clickthis,this)},currLevel:function(){this.sprbg[0].active=!1,this.sprbg[1].active=!0;var t=cc.sequence(cc.scaleTo(1,1.1),cc.scaleTo(.2,1));this.node.runAction(t.repeatForever())},updatethis:function(t){this.m_iGuanIndex=t,this.node.scale=cc.v2(1,1),this.node.stopAllActions(),this.sprbg[0].active=!0,this.sprbg[1].active=!1,this.m_iGuanIndex>GameControl.newPlayer.m_currOpenGuan?(this.lock.active=!0,this.guanIndex.string=""):(this.lock.active=!1,this.guanIndex.string=this.m_iGuanIndex.toString());for(var e=0;e<3;e++)this.starList[e].active=!1;var n=GameControl.newPlayer.m_mapLevelStar[this.m_iGuanIndex];if(n)for(var i=0;i<n;i++)this.starList[i].active=!0;GameControl.newPlayer.m_currOpenGuan==this.m_iGuanIndex&&(this.m_iGuanIndex<GameControl.config.guankaMaxNum||!n||0==n)&&this.currLevel()},clickthis:function(){GameControl.GameObject.pickzhangjieUi.active=!1,GameControl.zhuye.node.active=!1,GameControl.GameObject.YouxiUi.active=!0,GameControl.GameObject.pickLevelUi.active=!1,GameControl.youxiUi.updatethis(this.m_iGuanIndex)}}),cc._RF.pop()},{}],LoadScene:[function(t,e,n){"use strict";cc._RF.push(e,"d000aNL5m1IbYY2skcqXlxz","LoadScene"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=t("./TgaPlatform"),r=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.progress=null,t.pLabel=null,t.itemLabel=null,t.lastP=0,t}return __extends(n,e),n.prototype.onLoad=function(){this.initLang(),this.pLabel&&(this.pLabel.string="0%"),this.progress&&(this.progress.progress=0),this.lastP=0},n.prototype.start=function(){var t=this,e=new Promise(function(e,n){cc.director.preloadScene("game",function(e,n,i){t.itemLabel&&t.itemLabel.node.active&&(t.itemLabel.string=i.url);var o=e/n;o>t.lastP&&(t.lastP=o,t.progress&&(t.progress.progress=o),t.pLabel&&(t.pLabel.string=(100*o).toFixed(0)+"%"),s.reportProgress((100*o).toFixed(0)/100))},function(t,n){e()})}),n=new Promise(function(t,e){setTimeout(function(){return t()},1e3)}),i=new Promise(function(t,e){s.login(function(e){e.avatar,e.nickname,e.openId;t()})});Promise.all([e,n,i]).catch().then(function(){cc.director.loadScene("game"),s.closeLoadingModal()})},n.prototype.initLang=function(){var e=t("LanguageData"),n=s.getLang();switch(console.log("lang is...:",n),n){case"zh":e.init("zh");break;default:e.init("en")}},n.prototype.onEnable=function(){},n.prototype.onDisable=function(){},__decorate([a(cc.ProgressBar)],n.prototype,"progress",void 0),__decorate([a(cc.Label)],n.prototype,"pLabel",void 0),__decorate([a(cc.Label)],n.prototype,"itemLabel",void 0),n=__decorate([o],n)}(cc.Component);n.default=r,cc._RF.pop()},{"./TgaPlatform":"TgaPlatform",LanguageData:"LanguageData"}],LocalizedLabel:[function(t,e,n){"use strict";cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var i=t("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){i.inst||i.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?i.t(this.dataID)&&(this.label.string=i.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e,n){"use strict";cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var i=t("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:i}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],LoseUi:[function(t,e,n){"use strict";cc._RF.push(e,"7ba8dyxyjNEYL2W/ZDLgeHR","LoseUi");var i=t("./ad/AdPartAManager"),o=l(i),a=l(t("./ViewMgr")),s=l(t("./utils/Platform")),r=l(t("./utils/Common/GameUtil")),c=l(t("./MusicMgr"));function l(t){return t&&t.__esModule?t:{default:t}}var d=t("LanguageData"),u=t("./TgaPlatform");cc.Class({extends:cc.Component,properties:{guannum:cc.Label,replaybtn:cc.Node,skipbtn:cc.Node,homebtn:cc.Node,coinNumber:cc.Label},ctor:function(){this.m_iGuanIndex=0,this.wx=window.wx},onLoad:function(){GameControl.loseUi=this,this.replaybtn.on(cc.Node.EventType.TOUCH_END,this.replayFunc,this),this.skipbtn.on(cc.Node.EventType.TOUCH_END,this.skipFunc,this),this.homebtn.on(cc.Node.EventType.TOUCH_END,this.backHome,this)},onEnable:function(){var t=this;this.wx&&this.wx.aldShowEvent(i.FAIL_PAGE),this.replaybtn.active=!1,this.coinNumber.string=String(window.GameControl.newPlayer.coinNumber),this.scheduleOnce(function(){t.replaybtn.active=!0},1.5),this.schedule(function(){r.default.showBannerInSucOrFail()},o.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},updatethis:function(t){this.m_iGuanIndex=t,this.guannum.string=d.t("home.level")+t,this.skipbtn.active=t<GameControl.config.guankaMaxNum},showAction:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(i.SHOW_BTN,i.FAIL_PAGE);var t=o.default.INST.getRandomOneShareData();s.default.share(t.title,t.img,t.path)},drawerAction:function(){c.default.instance.playBtn(),a.default.instance.showDrawerView()},skipFunc:function(){var t=this;u.showRewardAd({onReward:function(){o.default.INST.isShowGameCenterAftrtVideo(),t.skip()}})},skip:function(){this.node.active=!1,this.m_iGuanIndex>=GameControl.newPlayer.m_currOpenGuan&&GameControl.newPlayer.m_currOpenGuan++,GameControl.youxiUi.m_iGuanIndex++,GameControl.youxiUi.updatethis(GameControl.youxiUi.m_iGuanIndex),GameControl.GameObject.Set_Local_Data(),GameControl.GameObject.Set_Level_Data()},replayFunc:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(i.RESTART_BTN,i.FAIL_PAGE),o.default.INST.isShowGameCenterInFailPage(),this.node.active=!1,GameControl.youxiUi.replayFunc()},backHomeAction:function(){c.default.instance.playBtn(),this.node.active=!1,GameControl.GameObject.YouxiUi.active=!1,GameControl.zhuye.node.active=!0,GameControl.zhuye.upDatethis()},onDisable:function(){r.default.hideWxBanner(),s.default.hideBannerAd(),this.unscheduleAllCallbacks()}}),cc._RF.pop()},{"./MusicMgr":"MusicMgr","./TgaPlatform":"TgaPlatform","./ViewMgr":"ViewMgr","./ad/AdPartAManager":"AdPartAManager","./utils/Common/GameUtil":"GameUtil","./utils/Platform":"Platform",LanguageData:"LanguageData"}],MaiLiangUtil:[function(t,e,n){"use strict";cc._RF.push(e,"8fb1dPYl8ZCPaNOBEZcf6QI","MaiLiangUtil"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Utils/Common/HttpUtils"),o="wx065018aa1a63b995",a=function(){function t(){}return t.clickReport=function(){var t=this;if(this.wx){var e=this.wx.getLaunchOptionsSync();console.log("wxRes:"+JSON.stringify(e));var n=this.clickReq.params,a=window._openId;a=a||"";var s=e.query.key?e.query.key:"",r=e.referrerInfo.appId;r=r||"",this.getOpenId().then(function(e){var c=e.openid;c=c||"",t.wxOpenId=c,n.appid=o,n.openid=a,n.posttime=Math.round((new Date).getTime()/1e3),n.key=s,n.wxopenid=c,n.fromapp=r,t.clickTime=n.posttime,t.openId=n.wxopenid,i.default.requestSync(t.clickReq.url,n,t.clickReq.method,function(e){console.log("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u70b9\u51fb\u6570\u636e\uff0cres:"+JSON.stringify(e)),e?200===e.Status?(console.log("[AdPartAManager.onLoad]============== \u8bf7\u6c42\u7532\u65b9\u70b9\u51fb\u6570\u636e\u6210\u529f! ================="),window._openId=e.Result.OpenId,console.log("[openId]"+e.Result.OpenId),t.clickData=e):console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u70b9\u51fb\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!"):console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u70b9\u51fb\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5!")},function(t){console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u70b9\u51fb\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5!")},function(t){})})}},t.authoReport=function(){var t=this;if(window.wx){var e=this.authoReq.url,n=this.authoReq.method,a=this.authoReq.params,s=window._openId;s&&(a.appid=o,a.openid=s,a.posttime=Math.round((new Date).getTime()/1e3),i.default.requestSync(e,a,n,function(e){console.log("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u6388\u6743\u6570\u636e\uff0cres:"+JSON.stringify(e)),e?200===e.Status?(console.log("[AdPartAManager.onLoad]============== \u8bf7\u6c42\u7532\u65b9\u6388\u6743\u6570\u636e\u6210\u529f! ================="),t.clickData=e):console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u6388\u6743\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!"):console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u6388\u6743\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5!")},function(t){console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u6388\u6743\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5!")},function(t){}))}},t.stayReport=function(){var t=this;if(this.wx){var e=this.stayReq.url,n=this.stayReq.method,a=this.stayReq.params,s=window._openId;s&&(a.appid=o,a.openid=s,a.posttime=Math.round((new Date).getTime()/1e3),a.time=a.posttime-this.clickTime,i.default.requestSync(e,a,n,function(e){console.log("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u505c\u7559\u6570\u636e\uff0cres:"+JSON.stringify(e)),e?200===e.Status?(console.log("[AdPartAManager.onLoad]============== \u8bf7\u6c42\u7532\u65b9\u505c\u7559\u6570\u636e\u6210\u529f! ================="),t.stayData=e):console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u505c\u7559\u6570\u636e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5!"):console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u505c\u7559\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5!")},function(t){console.error("[AdPartAManager.onLoad]\u8bf7\u6c42\u7532\u65b9\u505c\u7559\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5!err:"+JSON.stringify(t))},function(t){}))}},t.getOpenId=function(){var t=this;return this.wx?new Promise(function(e,n){t.wx.login({success:function(a){if(a.code){var s=t.openIdReq.params;s.appid=o,s.code=a.code,e(i.default.requestAsync(t.openIdReq.url,s,t.openIdReq.method))}else n(new Promise(function(t,e){e("wx login error")}))},fail:function(t){n(new Promise(function(t,e){e("wx login error")}))}})}):null},t.wx=window.wx,t.clickReq={url:"https://tj.geyian.ink/v1.1/api/Activity/uclick.html",method:"POST",params:{appid:"",openid:"",posttime:void 0,key:"",wxopenid:"",fromapp:""}},t.clickData=void 0,t.clickTime=void 0,t.authoReq={url:"https://tj.geyian.ink/v1.1/api/Activity/auth.html",method:"POST",params:{appid:o,openid:"",posttime:void 0}},t.authoData=void 0,t.stayReq={url:"https://tj.geyian.ink/v1.1/api/Activity/stay.html",method:"POST",params:{appid:o,openid:"",posttime:void 0,time:void 0}},t.openIdReq={url:"https://ad.geyian.ink/v1.1/api/sendSessionCode.html",method:"POST",params:{appid:"",code:""}},t.stayData=void 0,t.openId=void 0,t.wxOpenId=void 0,t}();n.default=a,cc._RF.pop()},{"../Utils/Common/HttpUtils":"HttpUtils"}],MathUtil:[function(t,e,n){"use strict";cc._RF.push(e,"3161eTiMghDC6RGOlzTuEsM","MathUtil"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.getRandomNumber=function(t,e){return t>e?0:Math.random()*(e-t)+t},t.getRandomInteger=function(e,n){return e>n?0:Math.floor(t.getRandomNumber(e,n))},t.getRandomNumberFix2=function(t,e){return t>e?0:Number((Math.random()*(e-t)+t).toFixed(2))},t}();n.default=i,cc._RF.pop()},{}],Mine:[function(t,e,n){"use strict";cc._RF.push(e,"71fffxstvdN3JoEDVU0tgiH","Mine"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/CocosUtil"),o=t("../MusicMgr"),a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRevolute=!1,e.revoluteSpeed=50,e.revoluteCenter=null,e.revoluteAntiCw=!0,e.isMove=!1,e.moveSpeed=1,e.moveTargetPoint=null,e.baseStart=null,e.radius=0,e.anim=null,e.baseRadian=0,e.a=0,e.isBoom=!1,e}return __extends(e,t),e.prototype.onLoad=function(){if(this.baseStart=this.node.position,this.isRevolute&&this.revoluteCenter){this.radius=Math.abs(this.baseStart.sub(this.revoluteCenter).mag());var t=cc.v2(this.revoluteCenter.x+1,this.revoluteCenter.y);this.baseRadian=i.default.pointsAngle(this.revoluteCenter,t,this.baseStart)}if(this.isMove){var e=this.baseStart.sub(this.moveTargetPoint).mag()/500*this.moveSpeed;this.node.runAction(cc.sequence(cc.moveTo(1/e,this.moveTargetPoint),cc.moveTo(1/e,this.baseStart)).repeatForever())}this.anim=this.getComponent(cc.Animation)},e.prototype.update=function(t){this.rotate(t)},e.prototype.rotate=function(t){this.isRevolute&&this.revoluteCenter&&(this.node.position=this.getTar(this.circleMove(t,this.revoluteSpeed,this.revoluteCenter,this.radius,this.revoluteAntiCw),this.revoluteCenter,this.baseRadian))},e.prototype.getTar=function(t,e,n){var i=(t.x-e.x)*Math.cos(n)-(t.y-e.y)*Math.sin(n)+e.x,o=(t.x-e.x)*Math.sin(n)+(t.y-e.y)*Math.cos(n)+e.y;return cc.v2(i,o)},e.prototype.circleMove=function(t,e,n,i,o){var a=o?1:-1;this.a+=t*(e/100)*a;var s=i*Math.cos(this.a)+n.x,r=i*Math.sin(this.a)+n.y;return cc.v2(s,r)},e.prototype.onBeginContact=function(t,e,n){var i=this;if(!this.isBoom&&("human"==n.node.group||"standHuman"==n.node.group))return this.isBoom=!0,this.node.getComponent(cc.PhysicsCircleCollider).radius*=2,this.anim.play("mineBoom"),this.anim.on("finished",function(){i.node.active=!1,i.node.destroy()}),void o.default.instance.playBoom()},e.prototype.onEndContact=function(t,e,n){},__decorate([r({type:Boolean,tooltip:"\u516c\u8f6c"})],e.prototype,"isRevolute",void 0),__decorate([r({type:cc.Integer,tooltip:"\u516c\u8f6c,\u6bcf\u79d2\u65cb\u8f6c\u7684\u89d2\u5ea6,\u5f00\u542f\u516c\u8f6c\u540e\u6709\u6548"})],e.prototype,"revoluteSpeed",void 0),__decorate([r({type:cc.Vec2,tooltip:"\u516c\u8f6c,\u65cb\u8f6c\u7684\u4e2d\u5fc3,\u5f00\u542f\u516c\u8f6c\u540e\u6709\u6548"})],e.prototype,"revoluteCenter",void 0),__decorate([r({type:Boolean,tooltip:"\u516c\u8f6c,\u65cb\u8f6c\u7684\u65b9\u5411,\u9ed8\u8ba4\u4e3a\u9006\u65f6\u9488,\u5f00\u542f\u516c\u8f6c\u540e\u6709\u6548"})],e.prototype,"revoluteAntiCw",void 0),__decorate([r(Boolean)],e.prototype,"isMove",void 0),__decorate([r({type:cc.Integer,tooltip:"\u6bcf\u79d2\u79fb\u52a8\u7684\u8ddd\u79bb,\u5f00\u542f\u79fb\u52a8\u540e\u6709\u6548"})],e.prototype,"moveSpeed",void 0),__decorate([r({type:cc.Vec2,tooltip:"\u79fb\u52a8\u7684\u76ee\u6807\u70b9,\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u5750\u6807\u7cfb\u4e0b,\u53f3\u65b9200\u50cf\u7d20\u5904,\u5f00\u542f\u79fb\u52a8\u540e\u6709\u6548"})],e.prototype,"moveTargetPoint",void 0),e=__decorate([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../utils/CocosUtil":"CocosUtil"}],MissionMgr:[function(t,e,n){"use strict";cc._RF.push(e,"4b119Q9XQVCfLzIuB44Pbk3","MissionMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../SettingUi"),o=t("../prefab/Human"),a=t("../prefab/Finger1"),s=t("../GameLogic3"),r=t("../prefab/StandHuman"),c=t("../utils/MathUtil"),l=t("../utils/SpriteUtil"),d=t("LanguageData"),u=cc._decorator,h=u.ccclass,p=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.humanPrefab=null,e.bg=null,e.missionHumans=0,e.givedHumans=0,e.needHumans=0,e.savedHumans=0,e.humanLabel=null,e.humans=[],e.gameLogic=null,e.inSlideHumans=0,e.dragNode=null,e.reel=null,e.isTouch=!1,e.rate=1,e.timer=0,e._canSlideDown=!1,e.wx=window.wx,e.endPointInWorld=null,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){var t=this;n.instance=this,window.a=this,this.node.on("touchstart",function(){t.isTouch=!0},this),this.node.on("touchend",function(){t.isTouch=!1},this),this.node.on("touchcancel",function(){t.isTouch=!1},this)},e.prototype.update=function(t){this.isTouch&&(this.timer+=t,this.timer>=.1&&(this.timer=0,this.slideDownAction()))},e.prototype.loadMission=function(t,e){var n=this;void 0===e&&(e=null),this.missionHumans=10,this.needHumans=10,this.savedHumans=0,this.givedHumans=0,this.humanLabel=null,this.node.active=!1,this._canSlideDown=!1,this.gameLogic=this.getComponent(s.default),this.rate=1,this.endPointInWorld=null,this.humans=[],this.inSlideHumans=0,this.dragNode=null,this.reel=null,e=this.skinCheck(e),this.bg.active=t>=121,this.node.children.forEach(function(t){t.name.startsWith("guanka")&&(n.node.removeChild(t),t.destroy())});var o=String(t).padStart(3,"0");cc.loader.loadRes(i.MISSION_PREFIX+o,function(t,i){if(t)console.error(t);else{var a=cc.instantiate(i);n.node.addChild(a),a.setPosition(cc.v2()),n.gameLogic.init(),a.getComponentsInChildren(r.default).forEach(function(t){t.init(e)});var s=a.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("house");s.anchorY=0,s.x=-10,s.y=15;var u=c.default.getRandomInteger(1,5);l.default.LoadLocalImg(s.getComponent(cc.Sprite),"house/house"+u);var h=a.getChildByName("endAndStart").getChildByName("endPlant");h||(h=a.getChildByName("endPlant2")),n.humanLabel=h.getChildByName("humanCount").getComponent(cc.Label),n.humanLableScaleX=n.humanLabel.node.scaleX,n.humanLableScaleY=n.humanLabel.node.scaleY,n.dragNode=a.getChildByName("endAndStart").getChildByName("dragNode"),n.reel=a.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("reel");var p=window.GameControl.config["guanka"+o];n.missionHumans=p.bornHuman,n.givedHumans=p.giveHuman,n.needHumans=p.needHuman;var m=p.bornHuman;n.addHumansIns(m,e);try{a.getChildByName("endAndStart").getChildByName("tips").getComponent(cc.RichText).string="<color=#000000>"+d.t("game.tip")+"</c>"}catch(t){}n.updateInfo(),n.node.active=!0}})},e.prototype.skinCheck=function(t){var e=window.GameControl.newPlayer;return null==t?e.curSkin:e.isTrialSkin(t)&&e.isTrialSkinOutTime()?e.curSkin:t},e.prototype.addRate=function(t){t<=0||(this.rate*=t)},e.prototype.getRate=function(){return this.rate},e.prototype.addHumansIns=function(t,e){var n=null,i=null,a=null;this.node.children.forEach(function(t){t.name.startsWith("guanka")&&(a=t,n=t.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("startPos"),i=t.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.v2())))}),i.y=i.y-n.height;for(var s=null,r=null,c=0;c<t;c++)s=null,r=null,(s=cc.instantiate(this.humanPrefab)).name="human"+c,r=s.getComponent(o.default),s.setPosition(i),a.addChild(s),r.initBySkinIdx(e),this.humans.push(r)},e.prototype.updateInfo=function(){this.humanLabel&&(this.humanLabel.node.stopAllActions(),this.humanLabel.node.scaleX=this.humanLableScaleX,this.humanLabel.node.scaleY=this.humanLableScaleY,this.humanLabel.node.runAction(cc.sequence(cc.scaleTo(.1,1.2*this.humanLableScaleX,1.2*this.humanLableScaleY),cc.scaleTo(.1,1*this.humanLableScaleX,1*this.humanLableScaleY)))),this.humanLabel&&(this.humanLabel.string=this.savedHumans+"/"+this.needHumans)},e.prototype.savedStandHuman=function(t){void 0===t&&(t=1),this.savedHumans+=t,this.updateInfo(),this.winOrLost()},e.prototype.savedHuman=function(t){void 0===t&&(t=1),this.savedHumans+=t,this.missionHumans-=t,this.updateInfo(),this.winOrLost()},e.prototype.dieHuman=function(t){var e=this;void 0===t&&(t=1),this.missionHumans-=t,this.humanOutSlide(),this.needHumans!=this.givedHumans?this.winOrLost():this.scheduleOnce(function(){e.hideMission(),window.GameControl.youxiUi.loseFunc()},.5)},e.prototype.winOrLost=function(){var t=this;this.scheduleOnce(function(){if(t.missionHumans<=0&&t.inSlideHumans<=0){if(t.savedHumans>=t.needHumans)return void t.scheduleOnce(function(){t.hideMission(),window.GameControl.youxiUi.winFunc(t.getStarNum())},.5);t.hideMission(),window.GameControl.youxiUi.loseFunc()}},.1)},e.prototype.hideMission=function(){this.node.children.forEach(function(t){t.name.startsWith("guanka")&&(t.active=!1)})},e.prototype.getStarNum=function(){return this.savedHumans>=this.givedHumans?3:this.savedHumans==this.needHumans?this.needHumans==this.givedHumans?3:1:2},e.prototype.canSlideDown=function(){return this._canSlideDown},e.prototype.setCanSlideDown=function(t){t?this.gameLogic.showGreenRope():this.gameLogic.showYellowRope(),this._canSlideDown=t},e.prototype.slideDownAction=function(){!this._canSlideDown||!this.humans||this.humans.length<=0||(this.wx&&this.wx.vibrateShort(),this.humanInSlide(),this.humans.shift().slideDown(this.gameLogic.getLines()))},e.prototype.getEndPoint=function(){return this.endPointInWorld},e.prototype.setEndPoint=function(t){this.endPointInWorld=t},e.prototype.humanInSlide=function(){this.inSlideHumans++},e.prototype.humanOutSlide=function(){this.inSlideHumans--},e.prototype.canDragNode=function(){return this.inSlideHumans<=0},e.prototype.showGuideFinger=function(){this.node.children.forEach(function(t){if(t.name.startsWith("guanka")){var e=t.getChildByName("endAndStart").getChildByName("shouzhi1");e&&e.getComponent(a.default).hide();var n=t.getChildByName("endAndStart").getChildByName("shouzhi2");n&&(n.active=!0)}})},e.instance=null,__decorate([p(cc.Prefab)],e.prototype,"humanPrefab",void 0),__decorate([p(cc.Node)],e.prototype,"bg",void 0),e=n=__decorate([h],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../GameLogic3":"GameLogic3","../SettingUi":"SettingUi","../prefab/Finger1":"Finger1","../prefab/Human":"Human","../prefab/StandHuman":"StandHuman","../utils/MathUtil":"MathUtil","../utils/SpriteUtil":"SpriteUtil",LanguageData:"LanguageData"}],Move1:[function(t,e,n){"use strict";cc._RF.push(e,"ea3c0jYKzhHDq5Sr7Gka00v","Move1"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMove=!1,e.moveSpeed=1,e.moveTargetPoint=null,e.baseStart=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.baseStart=this.node.position,this.moveTargetPoint||(this.moveTargetPoint=cc.v2(this.node.x+200,this.node.y));var t=this.baseStart.sub(this.moveTargetPoint).mag()/500*this.moveSpeed;this.isMove&&this.node.runAction(cc.sequence(cc.moveTo(1/t,this.moveTargetPoint),cc.moveTo(1/t,this.baseStart)).repeatForever())},__decorate([a(Boolean)],e.prototype,"isMove",void 0),__decorate([a({type:cc.Integer,tooltip:"\u6bcf\u79d2\u79fb\u52a8\u7684\u8ddd\u79bb,\u5f00\u542f\u79fb\u52a8\u540e\u6709\u6548"})],e.prototype,"moveSpeed",void 0),__decorate([a({type:cc.Vec2,tooltip:"\u79fb\u52a8\u7684\u76ee\u6807\u70b9,\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u5750\u6807\u7cfb\u4e0b,\u53f3\u65b9200\u50cf\u7d20\u5904,\u5f00\u542f\u79fb\u52a8\u540e\u6709\u6548"})],e.prototype,"moveTargetPoint",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],MoveTo:[function(t,e,n){"use strict";cc._RF.push(e,"bf8f6kUga9Dk5GifSxy06eH","MoveTo"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=0,e.startPosX=0,e.startPosY=0,e.endPosX=0,e.endPosY=0,e.huitanX=10,e.huitanY=0,e.huitanTime=.3,e}return __extends(e,t),e.prototype.onEnable=function(){var t=cc.moveTo(.3*this.time,cc.v2(this.endPosX+this.huitanX,this.endPosY+this.huitanY)),e=cc.moveTo(this.huitanTime,cc.v2(this.endPosX,this.endPosY)),n=cc.sequence(t,e);this.node.runAction(n)},e.prototype.onDisable=function(){this.node.position=cc.v2(this.startPosX,this.startPosY)},__decorate([a],e.prototype,"time",void 0),__decorate([a],e.prototype,"startPosX",void 0),__decorate([a],e.prototype,"startPosY",void 0),__decorate([a],e.prototype,"endPosX",void 0),__decorate([a],e.prototype,"endPosY",void 0),__decorate([a],e.prototype,"huitanX",void 0),__decorate([a],e.prototype,"huitanY",void 0),__decorate([a],e.prototype,"huitanTime",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],MusicMgr:[function(t,e,n){"use strict";cc._RF.push(e,"63c23/02+pKT7O+Pc390TqG","MusicMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgm=null,e.fireBell=null,e.boom=null,e.dragLeaveEnd=null,e.gearOrLaser=null,e.sucPage=null,e.dragToEnd=null,e.humanGoInEnd=null,e.slide=null,e.btn=null,e.player=null,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.start=function(){this.player=this.player=window.GameControl.newPlayer,this.playBgm()},e.prototype.onEnable=function(){},e.prototype.playMusic=function(t,e){void 0===e&&(e=!1),this.player.isMusicOn&&cc.audioEngine.playMusic(t,e)},e.prototype.playEffect=function(t,e){void 0===e&&(e=!1),this.player.isSoundOn&&cc.audioEngine.playEffect(t,e)},e.prototype.playBgm=function(t){void 0===t&&(t=!0),this.playMusic(this.bgm,t)},e.prototype.playFireBell=function(t){void 0===t&&(t=!1),this.playEffect(this.fireBell,t)},e.prototype.playBoom=function(t){void 0===t&&(t=!1),this.playEffect(this.boom,t)},e.prototype.playDragLeaveEnd=function(t){void 0===t&&(t=!1),this.playEffect(this.dragLeaveEnd,t)},e.prototype.playGearOrLaser=function(t){void 0===t&&(t=!1),this.playEffect(this.gearOrLaser,t)},e.prototype.playSucPage=function(t){void 0===t&&(t=!1),this.playEffect(this.sucPage,t)},e.prototype.playDragToEnd=function(t){void 0===t&&(t=!1),this.playEffect(this.dragToEnd,t)},e.prototype.playHumanGoInEnd=function(t){void 0===t&&(t=!1),this.playEffect(this.humanGoInEnd,t)},e.prototype.playSlide=function(t){void 0===t&&(t=!1),this.playEffect(this.slide,t)},e.prototype.playBtn=function(t){void 0===t&&(t=!1),this.playEffect(this.btn,t)},e.prototype.stopAllMusic=function(){this.player.isMusicOn||cc.audioEngine.stopMusic()},e.prototype.stopAllEffect=function(){this.player.isSoundOn||cc.audioEngine.stopAllEffects()},e.instance=null,__decorate([a(cc.AudioClip)],e.prototype,"bgm",void 0),__decorate([a(cc.AudioClip)],e.prototype,"fireBell",void 0),__decorate([a(cc.AudioClip)],e.prototype,"boom",void 0),__decorate([a(cc.AudioClip)],e.prototype,"dragLeaveEnd",void 0),__decorate([a(cc.AudioClip)],e.prototype,"gearOrLaser",void 0),__decorate([a(cc.AudioClip)],e.prototype,"sucPage",void 0),__decorate([a(cc.AudioClip)],e.prototype,"dragToEnd",void 0),__decorate([a(cc.AudioClip)],e.prototype,"humanGoInEnd",void 0),__decorate([a(cc.AudioClip)],e.prototype,"slide",void 0),__decorate([a(cc.AudioClip)],e.prototype,"btn",void 0),e=n=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],PersonGame:[function(t,e,n){"use strict";cc._RF.push(e,"cced3ua1TRC6Kz5e2Flulj0","PersonGame"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],PersonZhuye:[function(t,e,n){"use strict";cc._RF.push(e,"50c28qgXT9K95qK3qHAMRi3","PersonZhuye"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],PickguanUi:[function(t,e,n){"use strict";cc._RF.push(e,"83d35yFrtNPNoN2f7Kd4A1r","PickguanUi");var i=t("./ad/AdPartAManager"),o=r(i),a=r(t("./utils/Platform")),s=r(t("./MusicMgr"));function r(t){return t&&t.__esModule?t:{default:t}}var c=t("LanguageData");cc.Class({extends:cc.Component,properties:{backbtn:cc.Node,guannodeList:[cc.Node],pickzhanglUi:cc.Node,guankanum:cc.Label,starnum:cc.Label,title:cc.Label,leftBtn:cc.Node,leftLa:cc.Label,rightBtn:cc.Node,rightLa:cc.Label,missionProg:cc.ProgressBar,starProg:cc.ProgressBar},ctor:function(){this.m_pItemList=[],this.m_iZhanIndex=0,this.wx=window.wx},onLoad:function(){var t=this;GameControl.pickguanUi=this,this.backbtn.on(cc.Node.EventType.TOUCH_END,this.backzhuyeFunc,this);for(var e=0;e<this.guannodeList.length;e++){var n=this.guannodeList[e].getComponent("LevelItem");this.m_pItemList.push(n)}this.leftBtn.on(cc.Node.EventType.TOUCH_END,function(){t.qiehuanzhang(1)},this),this.rightBtn.on(cc.Node.EventType.TOUCH_END,function(){t.qiehuanzhang(2)},this)},onEnable:function(){this.wx&&this.wx.aldShowEvent(i.MISSION_SETLET_PAGE),this.schedule(function(){a.default.showBannerAd()},o.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},onDisable:function(){a.default.hideBannerAd(),this.unscheduleAllCallbacks()},backzhuyeFunc:function(){s.default.instance.playBtn(),this.node.active=!1,this.pickzhanglUi.active=!1,GameControl.zhuye.node.active=!0,GameControl.zhuye.upDatethis()},updatethis:function(t){this.title.string=c.t("level.c")+t,this.m_iZhanIndex=t,this.starnum.string=GameControl.newPlayer.getzhangstarnum(this.m_iZhanIndex)+"/36",this.starProg.progress=GameControl.newPlayer.getzhangstarnum(this.m_iZhanIndex)/36;for(var e=12*(this.m_iZhanIndex-1)+1,n=0,i=e;i<e+12;i++)GameControl.newPlayer.m_mapLevelStar[i]&&GameControl.newPlayer.m_mapLevelStar[i]>0&&n++;this.guankanum.string=n+"/12",this.missionProg.progress=n/12;for(var o=0;o<this.guannodeList.length;o++)this.m_pItemList[o].updatethis(e+o);this.upfanyeBtn(),this.leftLa.string=(t-1).toString(),this.rightLa.string=(t+1).toString()},qiehuanzhang:function(t){1==t?this.updatethis(this.m_iZhanIndex-1):this.updatethis(this.m_iZhanIndex+1)},upfanyeBtn:function(){this.m_iZhanIndex<=1?this.leftBtn.active=!1:this.leftBtn.active=!0,this.m_iZhanIndex>=14?this.rightBtn.active=!1:this.rightBtn.active=!0}}),cc._RF.pop()},{"./MusicMgr":"MusicMgr","./ad/AdPartAManager":"AdPartAManager","./utils/Platform":"Platform",LanguageData:"LanguageData"}],PickzhangUi:[function(t,e,n){"use strict";cc._RF.push(e,"be117MyeJ1HH63N1b9/ll2S","PickzhangUi");var i=t("./ad/AdPartAManager"),o=r(i),a=r(t("./utils/Platform")),s=r(t("./MusicMgr"));function r(t){return t&&t.__esModule?t:{default:t}}var c=["ch/f1","ch/f2","ch/f3","ch/f4","ch/f5","ch/f6","ch/f7","ch/f8","ch/f9","ch/f10","ch/f11","ch/f12","ch/f13","ch/f14"];cc.Class({extends:cc.Component,properties:{backbtn:cc.Node,zhangnodeList:[cc.Node],pickLevelUi:cc.Node,guankanum:cc.Label,starnum:cc.Label,missionProg:cc.ProgressBar,starProg:cc.ProgressBar},ctor:function(){this.m_pItemList=[],this.wx=window.wx},onLoad:function(){var t=this;GameControl.pickzhangUi=this,this.backbtn.on(cc.Node.EventType.TOUCH_END,this.backzhuyeFunc,this);for(var e=function(e){var n=t.zhangnodeList[e].getComponent("ZhangItem");t.m_pItemList.push(n),n.m_iZhangjie=e+1,t.zhangnodeList[e].on(cc.Node.EventType.TOUCH_END,function(){t.node.active=!1,t.pickLevelUi.active=!0,GameControl.pickguanUi.updatethis(e+1)}),cc.loader.loadRes(c[e],null,function(n,i){if(!n&&i){var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i),o.width=174,o.height=210,t.zhangnodeList[e].addChild(o),o.zIndex=-1}})},n=0;n<this.zhangnodeList.length;n++)e(n)},onEnable:function(){this.wx&&this.wx.aldShowEvent(i.CHAPTER_SETLET_PAGE),this.schedule(function(){a.default.showBannerAd()},o.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},onDisable:function(){a.default.hideBannerAd(),this.unscheduleAllCallbacks()},backzhuyeFunc:function(){s.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(i.BACK_BTN,i.CHAPTER_SETLET_PAGE),this.node.active=!1,GameControl.zhuye.node.active=!0,GameControl.zhuye.upDatethis()},updatethis:function(){this.starnum.string=GameControl.newPlayer.getAllStarNum()+"/"+GameControl.config.starMaxNum,this.guankanum.string=GameControl.newPlayer.m_iCompleteGuanNum+"/"+GameControl.config.guankaMaxNum,this.starProg.progress=GameControl.newPlayer.getAllStarNum()/GameControl.config.starMaxNum,this.missionProg.progress=GameControl.newPlayer.m_iCompleteGuanNum/GameControl.config.guankaMaxNum;for(var t=0;t<this.zhangnodeList.length;t++)this.m_pItemList[t].updatethis()}}),cc._RF.pop()},{"./MusicMgr":"MusicMgr","./ad/AdPartAManager":"AdPartAManager","./utils/Platform":"Platform"}],Platform:[function(t,e,n){"use strict";cc._RF.push(e,"0b084rhpwZCKa/vQ8nCs9Sx","Platform"),Object.defineProperty(n,"__esModule",{value:!0});var i,o=t("./Platforms/WechatPlatform"),a=t("./Platforms/WebPlatform");switch(cc.sys.platform){case cc.sys.WECHAT_GAME:i=new o.default;break;default:i=new a.default}n.default=i,cc._RF.pop()},{"./Platforms/WebPlatform":"WebPlatform","./Platforms/WechatPlatform":"WechatPlatform"}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"c4043jJweBLoKLl7/ok9iVW","Player");(function(t){t&&t.__esModule})(t("./utils/CommonUtil"));cc.Class({init:function(){},ctor:function(){this.m_iCompleteGuanNum=0,this.m_currOpenGuan=1,this.m_mapLevelStar={},this.m_iMoney=0,this.isMusicOn=!0,this.isSoundOn=!0,this.isShakeOn=!0,this.coinNumber=0,this.checkInTimes=1,this.lastLoginDay="",this.unlockedSkins=[1],this.curSkin=1,this.lastSkin=1,this.trialSKin={},this.curTimeChallengMissionIdx=1,this.curHardMissionIdx=1},setLevelifo:function(t,e){this.m_mapLevelStar[t]=e},addCompleteGuanNum:function(t){this.m_iCompleteGuanNum+=t},addcurrOpenGuanNum:function(t){this.m_currOpenGuan+=t},getlevelstarnum:function(t){var e=this.m_mapLevelStar[t];return e||0},getAllStarNum:function(){if(this.m_mapLevelStar){var t=0;for(var e in this.m_mapLevelStar)t+=this.m_mapLevelStar[e]?this.m_mapLevelStar[e]:0;return t}},getzhangstarnum:function(t){for(var e=12*(t-1)+1,n=0,i=0;i<12;i++)this.m_mapLevelStar[e+i]&&(n+=this.m_mapLevelStar[e+i]);return n},initData:function(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.m_iMoney=t,this.m_iUpMoney=e,this.m_iZhuanShi=n,this.isMusicOn=i,this.isSoundOn=o,this.isShakeOn=a},isFirstLoginToady:function(){return(new Date).toDateString()!=this.lastLoginDay},login:function(){this.lastLoginDay=(new Date).toDateString(),GameControl.GameObject.Set_Local_Data()},unlockSkin:function(t){if(!(t<=0||this.unlockedSkins.indexOf(t)>=0)){var e=this.trialSKin.trialSKinIdx;e==t&&(this.curSkin=e,this.trialSKin={}),this.unlockedSkins.push(t),GameControl.GameObject.Set_Local_Data()}},costCoins:function(t){return!(t<=0)&&(!(t>this.coinNumber)&&(this.coinNumber-=t,GameControl.GameObject.Set_Local_Data(),!0))},changeSkin:function(t){t<=0||(this.lastSkin=this.curSkin,this.curSkin=t,GameControl.GameObject.Set_Local_Data())},addCoin:function(t){return!(t<=0)&&(this.coinNumber+=t,GameControl.GameObject.Set_Local_Data(),window.GameControl.zhuye.node.emit("dataChange"),!0)},getLockedSkins:function(){var t=window.GameControl.newPlayer.unlockedSkins,e=window.GameControl.config.skins,n=[];for(var i in e)t.indexOf(Number(i))<0&&n.push(Number(i));return n},trialSKinFunc:function(t){var e={trialSKinIdx:t,trialTime:(new Date).getTime()};this.trialSKin=e,this.changeSkin(t)},getTrialSKin:function(){return this.trialSKin.trialSKinIdx},isTrialSkin:function(t){var e=this.trialSKin.trialSKinIdx;return!!e&&e==t},isTrialSkinOutTime:function(){var t=this.trialSKin.trialTime;if(!t)return!0;var e=(new Date).getTime()-t>=3e5;return e&&(this.curSkin=this.lastSKin,this.changeSkin(this.lastSkin)),e},getCurTimeChallengeMissionIdx:function(){return this.curTimeChallengMissionIdx},timeChallengePass:function(t){t<this.curTimeChallengMissionIdx||(this.curTimeChallengMissionIdx++,this.curTimeChallengMissionIdx=this.curTimeChallengMissionIdx>=15?15:this.curTimeChallengMissionIdx,GameControl.GameObject.Set_Local_Data())},passHardMission:function(t){!t||t>=15||t<this.curHardMissionIdx||(this.curHardMissionIdx++,GameControl.GameObject.Set_Local_Data())},getCurHardMissionIdx:function(){return this.curHardMissionIdx}}),cc._RF.pop()},{"./utils/CommonUtil":"CommonUtil"}],PrivateTracker:[function(t,e,n){"use strict";cc._RF.push(e,"1baceQyu2dFzqz4eEEhKFOd","PrivateTracker"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){return function(){}}(),o="";switch(cc.sys.platform){case cc.sys.WECHAT_GAME:o=window.tt?(window.tt.getSystemInfoSync().appName+"_maomibei_hk").toLowerCase():"wx_maomibei_hk";break;case cc.sys.BAIDU_GAME:o="baidu_maomibei_hk";break;case cc.sys.OPPO_GAME:o="oppo_maomibei_hk";break;case cc.sys.VIVO_GAME:o="vivo_maomibei_hk"}var a=function(){function t(){}return t.prototype.request=function(t){var e=cc.loader.getXMLHttpRequest();e.open("POST","https://openapi.jiegames.com/logger/logInfoUpload"),e.setRequestHeader("Content-Type","application/json"),e.onerror=function(t){return console.error("ccc",t)},e.send(JSON.stringify([t]))},t.prototype.getInfo=function(){var t=new i;return t.appId=o,t.sdkId=o+"_sdk_1",t.pluginId=o+"_plugin_1",t.logType="tracker_info_log",t},t.prototype.onLogin=function(t){},t.prototype.onBannerShown=function(t,e){},t.prototype.onVideoAdPlayed=function(t,e){},t.prototype.onEvent=function(t,e,n){var i=this.getInfo();i.uuid=i.userId=t,i.timestamp=(new Date).getTime(),i.logInfo={event:e,label:n||1}},t}();n.default=a,cc._RF.pop()},{}],Rotate:[function(t,e,n){"use strict";cc._RF.push(e,"8a3cdEvSJhO5bFcbXWlM2rx","Rotate"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/CocosUtil"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRotate=!1,e.rotateSpeed=30,e.isPingPang=!1,e.startAngle=0,e.endAngle=90,e.isRevolute=!1,e.revoluteSpeed=50,e.revoluteCenter=null,e.revoluteAntiCw=!0,e.baseStart=null,e.radius=0,e.anim=null,e.baseRadian=0,e.a=0,e}return __extends(e,t),e.prototype.onLoad=function(){if(this.isRotate)this.node.runAction(cc.rotateBy(1/this.rotateSpeed,1).repeatForever());else{var t=Math.abs(this.startAngle-this.endAngle);if(this.isPingPang)this.node.runAction(cc.sequence(cc.rotateTo(1/this.rotateSpeed*t,this.endAngle),cc.rotateTo(1/this.rotateSpeed*t,this.startAngle)).repeatForever());else if(this.isRevolute&&this.revoluteCenter){this.radius=Math.abs(this.baseStart.sub(this.revoluteCenter).mag());var e=cc.v2(this.revoluteCenter.x+1,this.revoluteCenter.y);this.baseRadian=i.default.pointsAngle(this.revoluteCenter,e,this.baseStart)}}},e.prototype.update=function(t){this.rotate(t)},e.prototype.rotate=function(t){this.isRevolute&&this.revoluteCenter&&(this.node.position=this.getTar(this.circleMove(t,this.revoluteSpeed,this.revoluteCenter,this.radius,this.revoluteAntiCw),this.revoluteCenter,this.baseRadian))},e.prototype.getTar=function(t,e,n){var i=(t.x-e.x)*Math.cos(n)-(t.y-e.y)*Math.sin(n)+e.x,o=(t.x-e.x)*Math.sin(n)+(t.y-e.y)*Math.cos(n)+e.y;return cc.v2(i,o)},e.prototype.circleMove=function(t,e,n,i,o){var a=o?1:-1;this.a+=t*(e/100)*a;var s=i*Math.cos(this.a)+n.x,r=i*Math.sin(this.a)+n.y;return cc.v2(s,r)},__decorate([s({type:Boolean,tooltip:"\u81ea\u8f6c"})],e.prototype,"isRotate",void 0),__decorate([s({type:cc.Integer,tooltip:"\u81ea\u8f6c\uff0c\u6bcf\u79d2\u65cb\u8f6c\u7684\u89d2\u5ea6,\u5f00\u542f\u65cb\u8f6c\u6216\u4e52\u4e53\u540e\u6709\u6548"})],e.prototype,"rotateSpeed",void 0),__decorate([s({tooltip:"\u662f\u5426\u4ee5\u4e52\u4e53\u6a21\u5f0f\u81ea\u65cb\u8f6c,\u5f00\u542f\u81ea\u8f6c\u540e\uff0c\u8be5\u9009\u9879\u65e0\u6548"})],e.prototype,"isPingPang",void 0),__decorate([s({type:cc.Integer,tooltip:"\u4e52\u4e53\u6a21\u5f0f\u65cb\u8f6c\u5f00\u59cb\u7684\u89d2\u5ea6\u3002\u4e52\u4e53\u6a21\u5f0f\u5f00\u542f\u540e\u6709\u6548"})],e.prototype,"startAngle",void 0),__decorate([s({type:cc.Integer,tooltip:"\u4e52\u4e53\u6a21\u5f0f\u65cb\u8f6c\u7ed3\u675f\u7684\u89d2\u5ea6\u3002\u4e52\u4e53\u6a21\u5f0f\u5f00\u542f\u540e\u6709\u6548"})],e.prototype,"endAngle",void 0),__decorate([s({type:Boolean,tooltip:"\u516c\u8f6c,\u5f00\u542f\u81ea\u8f6c\u6216\u4e52\u4e53\u6a21\u5f0f\u540e\u65e0\u6548"})],e.prototype,"isRevolute",void 0),__decorate([s({type:cc.Integer,tooltip:"\u516c\u8f6c,\u6bcf\u79d2\u65cb\u8f6c\u7684\u89d2\u5ea6,\u5f00\u542f\u516c\u8f6c\u540e\u6709\u6548"})],e.prototype,"revoluteSpeed",void 0),__decorate([s({type:cc.Vec2,tooltip:"\u516c\u8f6c,\u65cb\u8f6c\u7684\u4e2d\u5fc3,\u5f00\u542f\u516c\u8f6c\u540e\u6709\u6548"})],e.prototype,"revoluteCenter",void 0),__decorate([s({type:Boolean,tooltip:"\u516c\u8f6c,\u65cb\u8f6c\u7684\u65b9\u5411,\u9ed8\u8ba4\u4e3a\u9006\u65f6\u9488,\u5f00\u542f\u516c\u8f6c\u540e\u6709\u6548"})],e.prototype,"revoluteAntiCw",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{"../utils/CocosUtil":"CocosUtil"}],SettingUi:[function(t,e,n){"use strict";cc._RF.push(e,"8df53VVXvdMOZ7VLTIzpmp0","SettingUi"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./MusicMgr"),o=t("./ad/AdPartAManager"),a=t("./TgaPlatform"),s=cc._decorator,r=s.ccclass,c=s.property;n.MISSION_PREFIX="prefab/guanka";var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicOff=null,e.soundOff=null,e.shakeOff=null,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.start=function(){},e.prototype.onEnable=function(){this.musicOff.active=!window.GameControl.newPlayer.isMusicOn,this.soundOff.active=!window.GameControl.newPlayer.isSoundOn,this.shakeOff.active=!window.GameControl.newPlayer.isShakeOn;var t=window.wx;t&&t.aldShowEvent(o.SETTING_PAGE)},e.prototype.showView=function(){this.node.active=!0},e.prototype.homeAction=function(){this.node.active=!1,window.GameControl.zhuye.node.active=!0,i.default.instance.playBtn()},e.prototype.musicAction=function(){var t=window.GameControl.newPlayer.isMusicOn;window.GameControl.newPlayer.isMusicOn=!t,window.GameControl.GameObject.Set_Local_Data(),this.musicOff.active=t,t?(i.default.instance.stopAllMusic(),a.reportSoundStatus(!1)):(i.default.instance.playBgm(),a.reportSoundStatus(!0)),i.default.instance.playBtn()},e.prototype.soundAction=function(){var t=window.GameControl.newPlayer.isSoundOn;window.GameControl.newPlayer.isSoundOn=!t,window.GameControl.GameObject.Set_Local_Data(),this.soundOff.active=t,i.default.instance.playBtn()},e.prototype.shakeAction=function(){var t=window.GameControl.newPlayer.isShakeOn;window.GameControl.newPlayer.isShakeOn=!t,window.GameControl.GameObject.Set_Local_Data(),this.shakeOff.active=t,i.default.instance.playBtn()},__decorate([c(cc.Node)],e.prototype,"musicOff",void 0),__decorate([c(cc.Node)],e.prototype,"soundOff",void 0),__decorate([c(cc.Node)],e.prototype,"shakeOff",void 0),e=n=__decorate([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./MusicMgr":"MusicMgr","./TgaPlatform":"TgaPlatform","./ad/AdPartAManager":"AdPartAManager"}],SkinAndCoinUI:[function(t,e,n){"use strict";cc._RF.push(e,"82310Q5g3dGtLRdiLyllpTx","SkinAndCoinUI"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../MusicMgr"),o=t("../ad/AdPartAManager"),a=t("../TgaPlatform"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinLabel=null,e.skinTitle=null,e.coinTitle=null,e.skinBtnOn=null,e.skinBtnOff=null,e.coinBtnOn=null,e.coinBtnOff=null,e.skinToggle=null,e.coinToggle=null,e.ftip=null,e.coinCount=100,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.skinAction(),this.updateCoins()},e.prototype.onEnable=function(){var t=window.wx;t&&t.aldShowEvent(o.SKIN_PAGE),this.updateCoins()},e.prototype.updateCoins=function(){this.coinLabel.string=String(window.GameControl.newPlayer.coinNumber)},e.prototype.homeAction=function(){i.default.instance.playBtn(),this.node.active=!1,window.GameControl.zhuye.node.active=!0},e.prototype.skinAction=function(){this.skinTitle.active=!0,this.skinBtnOn.active=!0,this.skinBtnOff.active=!1,this.skinToggle.active=!0,this.coinTitle.active=!1,this.coinBtnOn.active=!1,this.coinBtnOff.active=!0,this.coinToggle.active=!1,i.default.instance.playBtn()},e.prototype.coinAction=function(){this.skinTitle.active=!1,this.skinBtnOn.active=!1,this.skinBtnOff.active=!0,this.skinToggle.active=!1,this.coinTitle.active=!0,this.coinBtnOn.active=!0,this.coinBtnOff.active=!1,this.coinToggle.active=!0,this.ftip.active=!1,i.default.instance.playBtn()},e.prototype.videoCoinAction=function(){var t=this,e="ROPE-adToGoldTime",n=(new Date).getTime();n-cc.sys.localStorage.getItem(e)<12e4?this.ftip.active=!0:a.showRewardAd({onReward:function(){window.GameControl.newPlayer.addCoin(t.coinCount),t.updateCoins(),cc.sys.localStorage.setItem(e,n)}})},e.instance=null,__decorate([c(cc.Label)],e.prototype,"coinLabel",void 0),__decorate([c(cc.Node)],e.prototype,"skinTitle",void 0),__decorate([c(cc.Node)],e.prototype,"coinTitle",void 0),__decorate([c(cc.Node)],e.prototype,"skinBtnOn",void 0),__decorate([c(cc.Node)],e.prototype,"skinBtnOff",void 0),__decorate([c(cc.Node)],e.prototype,"coinBtnOn",void 0),__decorate([c(cc.Node)],e.prototype,"coinBtnOff",void 0),__decorate([c(cc.Node)],e.prototype,"skinToggle",void 0),__decorate([c(cc.Node)],e.prototype,"coinToggle",void 0),__decorate([c(cc.Node)],e.prototype,"ftip",void 0),e=n=__decorate([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../TgaPlatform":"TgaPlatform","../ad/AdPartAManager":"AdPartAManager"}],SkinData:[function(t,e,n){"use strict";cc._RF.push(e,"0cfbd0Ct3RHS6sL7QttYR+X","SkinData"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},__decorate([a(cc.Label)],e.prototype,"label",void 0),__decorate([a],e.prototype,"text",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],SkinItem:[function(t,e,n){"use strict";cc._RF.push(e,"bda07sjANFIva7KLyYNMzR8","SkinItem"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/SpriteUtil"),o=t("./SkinList"),a=t("../ui/SkinAndCoinUI"),s=t("../MusicMgr"),r=cc._decorator,c=r.ccclass,l=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skin=null,e.costLabel=null,e.useBtn=null,e.usingBtn=null,e.costBtn=null,e.skinData=null,e}return __extends(e,t),e.prototype.init=function(t){this.useBtn.active=!1,this.usingBtn.active=!1,this.costBtn.active=!1,this.skinData=t;var e="skin/skin_total"+t.no;(i.default.LoadLocalImg(this.skin,e),this.costLabel.string=String(t.cost),window.GameControl.newPlayer.unlockedSkins.indexOf(t.no)<0)?this.costBtn.active=!0:window.GameControl.newPlayer.curSkin!=t.no?this.useBtn.active=!0:this.usingBtn.active=!0},e.prototype.costAction=function(){s.default.instance.playBtn();var t=window.GameControl.newPlayer;if(t.costCoins(this.skinData.cost))t.unlockSkin(this.skinData.no),a.default.instance.updateCoins(),this.costBtn.active=!1,this.useBtn.active=!0,this.usingBtn.active=!1;else{var e=window.wx;e&&e.showToast({title:"\u91d1\u5e01\u4e0d\u8db3",icon:"none",duration:2e3})}},e.prototype.useAction=function(){window.GameControl.newPlayer.changeSkin(this.skinData.no),this.node.parent.getComponent(o.default).changeCurUsing(this.skinData.no),s.default.instance.playBtn()},e.prototype.crystalShoes=function(t){return this.skinData.no==t?(this.using(),!0):(this.usingBtn.active&&this.cancleUsing(),!1)},e.prototype.using=function(){this.usingBtn.active=!0,this.useBtn.active=!1,this.costBtn.active=!1},e.prototype.cancleUsing=function(){this.usingBtn.active=!1,this.useBtn.active=!0,this.costBtn.active=!1},__decorate([l(cc.Sprite)],e.prototype,"skin",void 0),__decorate([l(cc.Label)],e.prototype,"costLabel",void 0),__decorate([l(cc.Node)],e.prototype,"useBtn",void 0),__decorate([l(cc.Node)],e.prototype,"usingBtn",void 0),__decorate([l(cc.Node)],e.prototype,"costBtn",void 0),e=__decorate([c],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../ui/SkinAndCoinUI":"SkinAndCoinUI","../utils/SpriteUtil":"SpriteUtil","./SkinList":"SkinList"}],SkinList:[function(t,e,n){"use strict";cc._RF.push(e,"5c6c3jixpFIBYyFv5MPeMZz","SkinList"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./SkinItem"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skinItemPrefab=null,e.skinItems=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.node.destroyAllChildren();var t,e,n,o=window.GameControl.config.skins;for(var a in o)n=o[a],(e=(t=cc.instantiate(this.skinItemPrefab)).getComponent(i.default)).init(n),this.skinItems.push(e),this.node.addChild(t)},e.prototype.changeCurUsing=function(t){this.skinItems.forEach(function(e){e.crystalShoes(t)})},__decorate([s(cc.Node)],e.prototype,"skinItemPrefab",void 0),e=__decorate([a],e)}(cc.Component);n.default=r,cc._RF.pop()},{"./SkinItem":"SkinItem"}],SkinTrialUI:[function(t,e,n){"use strict";cc._RF.push(e,"3a50dRTKrJIzpLSE/J+Wve/","SkinTrialUI"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/CommonUtil"),o=t("../utils/SpriteUtil"),a=t("../MusicMgr"),s=t("../TgaPlatform"),r=cc._decorator,c=r.ccclass,l=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skinList=null,e.skinItemPrefab=null,e.missionIdx=null,e.skinNo=null,e}return __extends(e,t),e.prototype.showView=function(t,e){if(void 0===e&&(e=null),this.missionIdx=t,this.skinNo=null,null==e){var n=window.GameControl.newPlayer.getLockedSkins();if(!n||n.length<=0)return void(this.node.active=!1);e=i.default.getRandomElesFromListNoRepeat(n,1)[0]}e<=0||t<=0||(this.skinNo=e,this.assignSkinImgs(e),this.node.active=!0)},e.prototype.assignSkinImgs=function(t){this.skinList.destroyAllChildren();for(var e,n,i,a=window.GameControl.config.skins[String(t)],s=1;s<=a.length;s++)n=(e=cc.instantiate(this.skinItemPrefab)).getComponent(cc.Sprite),i=this.getSkinItemUrl(t,this.getSkinABC(t)),o.default.LoadLocalImg(n,i),e.active=!0,this.skinList.addChild(e)},e.prototype.getSkinItemUrl=function(t,e){if(!(t<=0))return"skin/skin"+t+"_"+e+"1"},e.prototype.getSkinABC=function(t){switch(t){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D";case 5:return"E";case 6:return"F";case 7:return"G";default:return"A"}},e.prototype.closeAction=function(){a.default.instance.playBtn(),this.node.active=!1},e.prototype.videoAction=function(){var t=this;s.showRewardAd({onReward:function(){window.GameControl.newPlayer.trialSKinFunc(t.skinNo),t.node.active=!1}})},__decorate([l(cc.Node)],e.prototype,"skinList",void 0),__decorate([l(cc.Node)],e.prototype,"skinItemPrefab",void 0),e=__decorate([c],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../TgaPlatform":"TgaPlatform","../utils/CommonUtil":"CommonUtil","../utils/SpriteUtil":"SpriteUtil"}],SpriteFrameSet:[function(t,e,n){"use strict";cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var i=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=i,cc._RF.pop()},{}],SpriteUtil:[function(t,e,n){"use strict";cc._RF.push(e,"5b89cJoX0FF05W/f/GNTYhK","SpriteUtil"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=(i.ccclass,i.property,function(){function t(){}return t.LoadOnlineImage=function(t,e){t&&e&&""!==e?cc.loader.load(e,function(e,n){if(e)console.error("[SpriteUtil.LoadOnlineImage]\u52a0\u8f7d\u8fdc\u7a0b\u56fe\u7247\u9519\u8bef,error:"+JSON.stringify(e));else{t.spriteFrame=void 0;var i=new cc.SpriteFrame(n);t.spriteFrame=i}}):console.error("[SpriteUtil.LoadOnlineImage]\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\uff1aimage:"+t+", url:"+e)},t.LoadLocalImg=function(t,e){t&&e&&""!==e||console.error("[SpriteUtil.LoadLocalImg]\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\uff1aimage:"+t+", url:"+e),cc.loader.loadRes(e,function(e,n){if(e)console.error("[SpriteUtil.LoadLocalImg]\u52a0\u8f7d\u672c\u5730\u56fe\u7247\u9519\u8bef,error:"+JSON.stringify(e));else{t.spriteFrame=void 0;var i=new cc.SpriteFrame(n);t.spriteFrame=i}})},t.LoadLocalImgToSpriteFrame=function(t){return new Promise(function(e,n){t&&""!==t||(console.error("[SpriteUtil.LoadLocalImg]\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\uff1aurl:"+t),n()),cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){t?console.error("[SpriteUtil.LoadLocalImg]\u52a0\u8f7d\u672c\u5730\u56fe\u7247\u9519\u8bef,error:"+JSON.stringify(t)):e(n)})})},t}());n.default=o,cc._RF.pop()},{}],StandHuman:[function(t,e,n){"use strict";cc._RF.push(e,"de232ic7LhC+YYEFLx1uqao","StandHuman"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../mission/MissionMgr"),o=t("../utils/MathUtil"),a=t("../utils/CommonUtil"),s=t("../mission/TimeMissionMgr"),r=t("../mission/HardMissMgr"),c=t("../MusicMgr"),l=t("./DragNode"),d=cc._decorator,u=d.ccclass,h=d.property,p=["ffb612","0dbbff","f53f2f","ff5b20","ffdf28","b0e300"],m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.blood=null,e.jumpName="jump",e.slideDownName="slideDown",e.collider=null,e.missionMgr=null,e.isFromPlat=!1,e.animState=null,e.animState=null,e.contactStandMan=!1,e.lines=[],e.isMove=!1,e.actionIdx=0,e.speed=500,e.startPos=null,e.isWudi=!1,e}var n;return __extends(e,t),n=e,e.prototype.start=function(){this.collider=this.getComponent(cc.Collider),this.missionMgr=this.node.parent.parent.getComponent(i.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.parent.getComponent(i.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.getComponent(s.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.parent.getComponent(s.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.getComponent(r.default),this.missionMgr=this.missionMgr?this.missionMgr:this.node.parent.parent.parent.getComponent(r.default)},e.prototype.init=function(t,e){t<=0&&(console.warn("\u76ae\u80a4\u4e0d\u5408\u6cd5\uff0c\u5df2\u91cd\u7f6e\uff01"),t=1),this.startPos=e?this.node.parent.convertToNodeSpaceAR(e):this.node.position,this.startPos=e?cc.v2(this.startPos.x,this.startPos.y-25):this.startPos,e&&this.node.setPosition(this.startPos),this.lines=[],this.changeSkin(t)},e.prototype.changeSkin=function(t){var e=this;if(!(t<=0)){var n=window.GameControl.config.skins[String(t)],i="skin"+t+"_"+this.getSkinABC(o.default.getRandomInteger(1,n.length+1));if(1==t){var s=a.default.getRandomElesFromListNoRepeat(p,1)[0];this.node.color=(new cc.Color).fromHEX(s)}this.jumpName="jump",this.slideDownName="slideDown",this.jumpName+="_"+i,this.slideDownName+="_"+i,this.scheduleOnce(function(){e.anim.stop(),e.anim.play(e.jumpName)},o.default.getRandomNumber(.1,2))}},e.prototype.randomRun=function(){var t=this.node.parent.getComponentInChildren(l.default).node.x-this.node.x>=0?1:-1;this.smallJumpAnim(0,this.jumpName,5);var e=cc.v2(this.startPos.x-o.default.getRandomInteger(100,150)*t,this.startPos.y);this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveTo(o.default.getRandomNumber(1,5),e),cc.moveTo(o.default.getRandomNumber(1,5),cc.v2(this.startPos.x-30*t-o.default.getRandomInteger(0,5)*t,this.startPos.y))).repeatForever())},e.prototype.smallJumpAnim=function(t,e,n){var i=this;return new Promise(function(t,o){if(!i.animState||!i.animState.isPlaying){i.anim.stop(),i.animState=i.anim.play(e);i.node.runAction(cc.sequence(cc.moveBy(.25,cc.v2(0,n)),cc.moveBy(.25,cc.v2(0,-n)),cc.callFunc(function(){t()})).repeatForever())}})},e.prototype.getSkinABC=function(t){switch(t){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D";case 5:return"E";case 6:return"F";case 7:return"G";default:return"A"}},e.prototype.jumpAnim=function(t,e,n){if(!this.animState||!this.animState.isPlaying){this.anim.stop(),this.animState=this.anim.play(e);this.node.runAction(cc.sequence(cc.moveBy(.2,cc.v2(0,n)),cc.moveBy(.2,cc.v2(0,-n))).repeatForever())}},e.prototype.goInEndPoint=function(){var t=this;this.collider.enabled=!1,this.node.anchorY=0,this.node.rotation=0,this.isWudi=!0,this.contactStandMan=!0,this.lines=[],c.default.instance.playHumanGoInEnd();var e=this.node.parent.convertToNodeSpaceAR(this.missionMgr.humanLabel.node.convertToWorldSpaceAR(cc.v2())).x-this.node.x>=0?1:-1;this.node.runAction(cc.sequence(cc.moveBy(o.default.getRandomInteger(0,1),cc.v2(o.default.getRandomInteger(20,50)*e,-40)),cc.callFunc(function(){t.anim.stop(),t.jumpAnim(0,t.jumpName,5)})))},e.prototype.onBeginContact=function(t,e,i){if("damageObstacle"!=i.node.group){if("standHuman"==i.node.group&&this.contactStandMan){var o=i.node.getComponent(n);if(o&&o.isMove)return;return o&&o.slideDown(this.lines,this.actionIdx-1,this.node.convertToWorldSpaceAR(cc.v2())),void this.missionMgr.humanInSlide()}}else this.die()},e.prototype.onEndContact=function(t,e,n){},e.prototype.die=function(){var t=this;if(!this.isWudi){this.missionMgr.dieHuman(),this.node.stopAllActions();var e=this.node.getComponent(cc.RigidBody),n=Math.random()<.5?1:-1,i=Math.random()<.5?1:-1;this.node.runAction(cc.moveBy(.05,cc.v2(o.default.getRandomInteger(50,75)*n,o.default.getRandomInteger(50,75)*i)).repeatForever()),e.enabledContactListener=!1,this.scheduleOnce(function(){t.getComponent(cc.PhysicsBoxCollider).sensor=!0},.1),this.scheduleOnce(function(){for(var e=o.default.getRandomInteger(5,10),n=t.node.position,i=null,a=0;a<e;a++)n.x+=o.default.getRandomInteger(-90,90),n.y+=o.default.getRandomInteger(-90,90),(i=cc.instantiate(t.blood))&&i.setPosition(n),i&&t.node.parent.addChild(i);t.scheduleOnce(function(){t.node.active=!1,t.destroy()},3)},o.default.getRandomNumber(.01,.1))}},e.prototype.slideDown=function(t,e,n){var i=this;this.isMove||!t||t.length<=0||e<0||(this.node.group="standHuman",this.scheduleOnce(function(){c.default.instance.playSlide()},.2),this.lines=t,this.actionIdx=e,this.node.anchorY=.6,this.node.rotation=0,this.node.scaleX=Math.abs(this.node.scaleX),this.node.scaleY=Math.abs(this.node.scaleY),this.isMove=!0,this.scheduleOnce(function(){for(var e,o,a,s,r=[],c=0;c<t.length;c++)s=t[c],c>0&&(o=new cc.Vec2(s.point0.x,s.point0.y),o=i.node.parent.convertToNodeSpaceAR(s.point0),a=new cc.Vec2(s.point1.x,s.point1.y),a=i.node.parent.convertToNodeSpaceAR(s.point1),r.push(i.lineTo(e,o)),s.collider instanceof cc.PhysicsCircleCollider&&(r=r.concat(i.circleTo(o,a,s.angle0,s.angle1,s.collider,s.clockwise)))),e=new cc.Vec2(s.point1.x,s.point1.y),e=i.node.parent.convertToNodeSpaceAR(e);e=new cc.Vec2(t[t.length-1].point1.x,t[t.length-1].point1.y),e=i.node.parent.convertToNodeSpaceAR(e);var l=i.missionMgr.getEndPoint();l=i.node.parent.convertToNodeSpaceAR(l),r.push(i.lineTo(e,l)),i.node.stopAllActions(),i.anim.stop(),i.node.runAction(cc.sequence(cc.rotateTo(0,0),cc.moveTo(0,i.node.parent.convertToNodeSpaceAR(n)))),i.animState=i.anim.play(i.slideDownName),i.resetFirstAction(r),i.slideAction(r)},.1))},e.prototype.resetFirstAction=function(t){var e,n,i,o=t[this.actionIdx],a=this.node.position;switch(o.__classname__){case"cc.MoveTo":e=o._startPosition,n=o._endPosition,i=a.sub(n).mag()/o._positionDelta.mag()*o.getDuration(),o.setDuration(i);break;case"cc.BezierTo":e=o._config[0],n=o._config[1],i=a.angle(n)/e.angle(n)*o.getDuration();break;default:return}},e.prototype.slideAction=function(t){var e=this;if(this.actionIdx>=t.length)return this.getComponent(cc.PhysicsCollider).enabled=!1,this.missionMgr.humanOutSlide(),this.missionMgr.goInNextHumans&&this.missionMgr.goInNextHumans(this),this.goInEndPoint(),void(this.isFromPlat?this.missionMgr.savedHuman():this.missionMgr.savedStandHuman());var n=t[this.actionIdx];this.actionIdx++,this.node.runAction(cc.sequence(n,cc.callFunc(function(){e.slideAction(t)})))},e.prototype.lineTo=function(t,e){var n=t.sub(e).mag()/this.speed;return cc.moveTo(n,e)},e.prototype.circleTo=function(t,e,n,i,o,a){var s=[],r=i-n,c=r/Math.PI,l=r%Math.PI,d=c>0?Math.PI:-Math.PI;c=Math.floor(Math.abs(c));for(var u=o.radius,h=t,p=n,m=[],f=0;f<c;f++)m=this.getBezier(h,p+d*f,d,o,a),s.push(cc.moveTo(0,m[0])),s.push(cc.bezierTo(Math.abs(d)*u/this.speed,[m[1],m[2],m[3]])),h=m[3];return 0!=l&&(m=this.getBezier(h,p+d*c,l,o,a),s.push(cc.moveTo(0,m[0])),s.push(cc.bezierTo(Math.abs(l)*u/this.speed,[m[1],m[2],m[3]]))),s},e.prototype.getBezier=function(t,e,n,i,o){var a=i.radius,s=4/3*((1-Math.cos(n/2))/Math.sin(n/2)),r=cc.v2(1,0),c=cc.v2(1,-s),l=r.rotate(n),d=c.rotate(n),u=cc.v2(1,s);l.mulSelf(a),d.mulSelf(a),u.mulSelf(a),r.mulSelf(a);var h=o?Math.PI/2:-Math.PI/2;l.rotateSelf(h+e),d.rotateSelf(h+e),u.rotateSelf(h+e),r.rotateSelf(h+e);var p=i.node.convertToWorldSpaceAR(cc.v2());return p=this.node.parent.convertToNodeSpaceAR(p),l.addSelf(p),d.addSelf(p),u.addSelf(p),r.addSelf(p),[r,u,d,l]},e.prototype.slideDown2=function(t){var e=this;if(t&&!(t.length<=0)){this.isWudi=!1,this.scheduleOnce(function(){c.default.instance.playSlide()},.2),this.lines=t,this.actionIdx=0,this.node&&this.node.stopAllActions(),this.node.anchorY=.6,this.collider.enabled=!1;var n=this.node.parent.convertToNodeSpaceAR(t[0].point1);this.node.setPosition(n),this.collider.enabled=!0;for(var i,o,a,s,r=[],l=0;l<t.length;l++)s=t[l],l>0&&(o=new cc.Vec2(s.point0.x,s.point0.y),o=this.node.parent.convertToNodeSpaceAR(s.point0),a=new cc.Vec2(s.point1.x,s.point1.y),a=this.node.parent.convertToNodeSpaceAR(s.point1),r.push(this.lineTo(i,o)),s.collider instanceof cc.PhysicsCircleCollider&&(r=r.concat(this.circleTo(o,a,s.angle0,s.angle1,s.collider,s.clockwise)))),i=new cc.Vec2(s.point1.x,s.point1.y),i=this.node.parent.convertToNodeSpaceAR(i);i=new cc.Vec2(t[t.length-1].point1.x,t[t.length-1].point1.y),i=this.node.parent.convertToNodeSpaceAR(i);var d=this.missionMgr.getEndPoint();d=this.node.parent.convertToNodeSpaceAR(d),r.push(this.lineTo(i,d)),this.scheduleOnce(function(){e.node.runAction(cc.sequence(cc.moveTo(0,e.startPos),cc.callFunc(function(){e.node.setPosition(e.startPos),e.slideAction(r)}))),e.anim.stop(),e.animState=e.anim.play(e.slideDownName)},.1)}},__decorate([h(cc.Animation)],e.prototype,"anim",void 0),__decorate([h(cc.Prefab)],e.prototype,"blood",void 0),e=n=__decorate([u],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../mission/HardMissMgr":"HardMissMgr","../mission/MissionMgr":"MissionMgr","../mission/TimeMissionMgr":"TimeMissionMgr","../utils/CommonUtil":"CommonUtil","../utils/MathUtil":"MathUtil","./DragNode":"DragNode"}],StartPoint:[function(t,e,n){"use strict";cc._RF.push(e,"bfe49503LRO64Ez+vMF5604","StartPoint"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([o],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],StopUi:[function(t,e,n){"use strict";cc._RF.push(e,"8ad4413Q7dBCbjUblsZF5LW","StopUi");var i=c(t("./utils/Platform")),o=c(t("./ad/AdPartAManager")),a=c(t("./ViewMgr")),s=c(t("./mission/TimeMissionMgr")),r=c(t("./MusicMgr"));function c(t){return t&&t.__esModule?t:{default:t}}var l=t("./TgaPlatform");cc.Class({extends:cc.Component,properties:{btnList:[cc.Node],jixuBtn:cc.Node,guankaLa:cc.Label,bgSpr:cc.Node,gameCamera:cc.Node},onLoad:function(){var t=this;GameControl.stopUi=this;for(var e=function(e){t.btnList[e].on(cc.Node.EventType.TOUCH_END,function(){t.btnListFunc(e)})},n=0;n<4;n++)e(n);this.jixuBtn.on(cc.Node.EventType.TOUCH_END,this.jixuFunc,this),l.showSlotAd({type:"pause"})},onEnable:function(){var t=cc.callFunc(function(){this.bgSpr.runAction(cc.fadeTo(.3,150))},this,0),e=cc.sequence(cc.scaleTo(.3,1.2),cc.scaleTo(.1,1),t);this.node.runAction(e),this.btnList[1].children[0].active=!window.GameControl.newPlayer.isMusicOn,this.btnList[2].children[0].active=!window.GameControl.newPlayer.isSoundOn,this.schedule(function(){i.default.showBannerAd()},o.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},onDisable:function(){this.node.scale=0,i.default.hideBannerAd(),this.unscheduleAllCallbacks()},btnListFunc:function(t){switch(t){case 0:this.backHomePage(!1);break;case 1:this.musicControl();break;case 2:this.soundControl();break;case 3:this.backHomePage(!0),GameControl.zhuye.pickguankaFunc()}},backHomePage:function(t){r.default.instance.playBtn(),this.node.active=!1,this.bgSpr.opacity=0,GameControl.GameObject.YouxiUi.active=!1,GameControl.zhuye.node.active=!t,GameControl.zhuye.upDatethis(),GameControl.youxiUi&&GameControl.youxiUi.removeMission(),a.default.instance.hideTimeModeView(),a.default.instance.hideHardModeView()},jixuFunc:function(){r.default.instance.playBtn(),this.bgSpr.runAction(cc.fadeOut(.1));var t=cc.callFunc(function(){this.node.active=!1,GameControl.youxiUi&&GameControl.youxiUi.activeStop()},this,0),e=cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.3,0),t);this.node.runAction(e),s.default.instance&&s.default.instance.setIsPause(!1)},musicControl:function(){var t=window.GameControl.newPlayer.isMusicOn;window.GameControl.newPlayer.isMusicOn=!t,window.GameControl.GameObject.Set_Local_Data(),t?(r.default.instance.stopAllMusic(),l.reportSoundStatus(!1)):(r.default.instance.playBgm(),l.reportSoundStatus(!0)),this.btnList[1].children[0].active=!GameControl.newPlayer.isMusicOn,r.default.instance.playBtn(),l.reportSoundStatus(GameControl.isMusic)},soundControl:function(){var t=window.GameControl.newPlayer.isSoundOn;window.GameControl.newPlayer.isSoundOn=!t,window.GameControl.GameObject.Set_Local_Data(),this.btnList[2].children[0].active=!GameControl.newPlayer.isSoundOn,r.default.instance.playBtn()}}),cc._RF.pop()},{"./MusicMgr":"MusicMgr","./TgaPlatform":"TgaPlatform","./ViewMgr":"ViewMgr","./ad/AdPartAManager":"AdPartAManager","./mission/TimeMissionMgr":"TimeMissionMgr","./utils/Platform":"Platform"}],Sys:[function(t,e,n){"use strict";cc._RF.push(e,"04478vin15Bbb2ZtaN8NVXf","Sys"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){return function(){this.NONE="NONE",this.vendor=this.NONE}}();n.default=new i,cc._RF.pop()},{}],Testscript:[function(t,e,n){"use strict";cc._RF.push(e,"43525LFp11IGrcJhm7whJom","Testscript");cc.Class({extends:cc.Component,properties:{PointArea:cc.Node,endnode:cc.Node,graph:cc.Node},ctor:function(){this.pm=null},onLoad:function(){this.PointArea.on(cc.Node.EventType.TOUCH_START,this.touchstart,this),this.PointArea.on(cc.Node.EventType.TOUCH_MOVE,this.touchmove,this),this.PointArea.on(cc.Node.EventType.TOUCH_END,this.touchup,this),this.PointArea.on(cc.Node.EventType.TOUCH_CANCEL,this.touchup,this),cc.director.getPhysicsManager().enabled=!0,this.pm=cc.director.getPhysicsManager()},start:function(){this.ctx=this.getComponent(cc.Graphics),this.ctx.lineWidth=10,this.ctx.strokeColor=cc.Color.GREEN,this.startpos=this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.points=[startpos]},touchstart:function(t){this.mouseWorldPos=t.getLocation();var e=t.getLocation();this.points=[e]},touchmove:function(t){this.mouseWorldPos=t.getLocation()},touchup:function(t){},update:function(t){this.ctx.clear(),this.endnode.getComponent(cc.RigidBody).linearVelocity=this.mouseWorldPos.sub(this.endnode.parent.convertToWorldSpaceAR(this.endnode.position)).mul(30);var e=cc.director.getPhysicsManager().rayCast(this.startpos,this.endnode.parent.convertToWorldSpaceAR(this.endnode.position),cc.RayCastType.Closest);if(e[0]&&(e=this.excludeResults(e)).length){var n=e[e.length-1].point;this.m_lastPivot.point.sub(n).mag()>1&&this.points.push(n)}}}),cc._RF.pop()},{}],Texiao:[function(t,e,n){"use strict";cc._RF.push(e,"992d5zsQ95ITJ0CuNc+UuMe","Texiao"),cc.Class({extends:cc.Component,properties:{spr_texiao:cc.Sprite},ctor:function(){this.chixutime=0,this.maxframe=0,this.frametime=0,this.currframe=0,this.id=0,this.texiaoSprite=[],this.ischixu=!0,this.yctime=0},start:function(){},playTexiao:function(t,e,n){this.chixutime=0,this.maxframe=0,this.frametime=0,this.currframe=0,this.id=this.m_pEffect.m_pic,this.chixutime=t,this.ischixu=e,this.maxframe=this.m_pEffect.m_maxframe,this.texiaoSprite=GameControl.SpriteList[this.id+"effect"],this.yctime=n},update:function(t){if(this.yctime>0)this.yctime-=t;else if(this.ischixu)this.chixutime>0&&(this.node.active=!0,this.chixutime=this.chixutime-t,this.chixutime<=0&&(this.node.active=!1,this.node.destroy()),this.frametime=this.frametime+t,this.frametime>.2&&(this.frametime=0,this.texiaoSprite[this.currframe]&&(this.spr_texiao.spriteFrame=this.texiaoSprite[this.currframe],this.spr_texiao.node.width=this.texiaoSprite[this.currframe].getOriginalSize().width,this.spr_texiao.node.height=this.texiaoSprite[this.currframe].getOriginalSize().height),this.currframe++,this.currframe>=this.maxframe&&(this.currframe=0)));else if(this.frametime=this.frametime+t,this.frametime>this.m_pEffect.m_looptime){if(this.frametime=0,this.currframe++,this.currframe>=this.maxframe+1)return this.node.destroy(),this.ischixu=!0,void(this.spr_texiao.spriteFrame=null);this.texiaoSprite&&this.texiaoSprite[this.currframe]&&(this.spr_texiao.spriteFrame=this.texiaoSprite[this.currframe],4444==this.m_pEffect.m_id?(this.spr_texiao.node.width=1.5*this.texiaoSprite[this.currframe].getOriginalSize().width,this.spr_texiao.node.height=1.5*this.texiaoSprite[this.currframe].getOriginalSize().height):(this.spr_texiao.node.width=this.texiaoSprite[this.currframe].getOriginalSize().width,this.spr_texiao.node.height=this.texiaoSprite[this.currframe].getOriginalSize().height))}}}),cc._RF.pop()},{}],TgaPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"caebfMJ60dOy4/hnUoQNrDP","TgaPlatform");var i=function(t){return t&&t.__esModule?t:{default:t}}(t("./MusicMgr"));var o="en",a=["zh","en"],s=function(t){return d()[t]}("lang"),r="undefined"!=typeof tgaGameSDK,c="undefined"!=typeof minigame,l=(new Date).getTime()-3e4;function d(){var t=window.location.href.split("?")[1],e={};t&&(t.indexOf("#")>-1&&(t=t.split(/\/?#/)[0]),t.split("&").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]}));return e}e.exports={getLang:function(){return a.indexOf(s)<0?o:s},reportProgress:function(t){r?tgaGameSDK.reportProgress(t):c&&minigame.setLoadingProgress(100*t)},closeLoadingModal:function(){r&&tgaGameSDK.closeLoadingModal()},login:function(t){r?tgaGameSDK.isLogin(function(e){var n=e.code,i=e.payload;1e3===n?i?tgaGameSDK.getUserInfo(function(e){var n=e.code,i=e.payload;if(1e3===n){var o=i.avatar,a=i.nickname,s=i.openId;t({avatar:o,nickname:a,openId:s})}else t(null)}):tgaGameSDK.login(function(e){var n=e.code,i=e.payload;if(1e3===n){var o=i.avatar,a=i.nickname,s=i.openId;t({avatar:o,nickname:a,openId:s})}else t(null)}):t(null)}):(console.warn("\u672a\u63a5\u5165\u4efb\u4f55\u5e73\u53f0\uff0c\u8fd4\u56de\u4e00\u4e2a\u4e34\u65f6\u7528\u6237"),t({avatar:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fup.enterdesk.com%2Fedpic_360_360%2F72%2F2e%2F7a%2F722e7a8d2f8e6da91f683313a1cf1258.jpg&refer=http%3A%2F%2Fup.enterdesk.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1656145207&t=2cbf57955a1d78176ba134d547de8ca3",nickname:"Test User",openId:"1ddf6d57e49944dc97e446a7901de0fe"}))},reportLevelPassed:function(t){r&&tgaGameSDK.reportLevelPassed({level:t,levelTitle:"\u7b2c"+t+"\u5173"})},reportClearGame:function(){r&&tgaGameSDK.reportClearGame()},reportRankScore:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(r){var n=t.rankId,i=t.score;tgaGameSDK.reportRankScore({scoreInfo:{rankId:n,score:i},callback:function(t){1e3===t.code?e({code:1e3}):(console.warn("\u4e0a\u62a5\u6392\u884c\u6570\u636e\u5931\u8d25\uff01",t),e({code:1e3}))}})}else console.warn("\u672a\u63a5\u5165\u4efb\u4f55\u6e38\u620f\u5e73\u53f0\uff0c\u4e0a\u62a5\u6392\u884c\u699c\u6570\u636e\u5931\u8d25\uff01"),e({code:1e3})},showRankModal:function(){r&&tgaGameSDK.showRankModal()},share:function(){r&&tgaGameSDK.share()},reportSoundStatus:function(t){r&&tgaGameSDK.reportSoundStatus(t)},showTitleAd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onPlay,n=void 0===e?function(){}:e,o=t.onFinish,a=void 0===o?function(){}:o;r?tgaGameSDK.showTitleAd({onPlay:function(){cc.audioEngine.pauseMusic(),n()},onFinish:function(){i.default.instance.playBgm(),a()}}):(n(),setTimeout(a,50))},showSlotAd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onPlay,n=void 0===e?function(){}:e,o=t.onFinish,a=void 0===o?function(){}:o,s=t.onError,d=void 0===s?function(){}:s,u=t.type;if(r)tgaGameSDK.showSlotAd({type:u,onPlay:function(){cc.audioEngine.pauseMusic(),n()},onFinish:function(){i.default.instance.playBgm(),a()}});else if(c){var h=(new Date).getTime();h-l>=3e4?(l=h,MiniGameAds.isInterstitialReady()?(n(),cc.audioEngine.pauseMusic(),MiniGameAds.showInterstitial().then(function(){console.info("====> show interstitial success")}).catch(function(t){console.error("====> show interstitial error: "+t.message),d({code:"AD/UNKNOWN_ERROR",message:t.message})}).finally(function(){a(),i.default.instance.playBgm()})):(d({code:"AD/UNKNOWN_ERROR",message:"resource not ready"}),a())):(d({code:"AD/FREQUENTLY",message:"ad frequently"}),a())}else n(),setTimeout(a,50)},showRewardAd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onPlay,n=void 0===e?function(){}:e,o=t.onReward,a=void 0===o?function(){}:o,s=t.onFinish,l=void 0===s?function(){}:s,d=t.onError,u=void 0===d?function(t){}:d;r?tgaGameSDK.showRewardAd({beforePlay:function(t){t()},onPlay:function(){cc.audioEngine.pauseMusic(),n()},onReward:a,onFinish:function(){i.default.instance.playBgm(),l()},onError:u}):c?MiniGameAds.isRewardvideoReady()&&(n(),cc.audioEngine.pauseMusic(),MiniGameAds.showRewardedVideo().then(function(){a(),console.info("====> show RewardedVideo success")}).catch(function(t){console.error("====> show RewardedVideo error: "+t.message),u({code:"AD/UNKNOWN_ERROR",message:t.message})}).finally(function(){i.default.instance.playBgm(),l()})):(n(),setTimeout(function(){a(),l()},50))},showBannerAd:function(){r?tgaGameSDK.showBannerAd():c&&"fbig"===window.minigamePlatform&&(MiniGameAds.isBannerReady()?MiniGameAds.showBanner().then(function(){console.info("====> show banner success")}).catch(function(t){console.error("====> show banner error: "+t.message)}):console.info("====> banner not ready"))},hideBannerAd:function(){r?tgaGameSDK.hideBannerAd():c&&"fbig"===window.minigamePlatform&&MiniGameAds.hideBanner().then(function(){console.info("====> hide banner success")}).catch(function(t){console.error("====> hide banner error: "+t.message)})}},cc._RF.pop()},{"./MusicMgr":"MusicMgr"}],TimeLoseUi:[function(t,e,n){"use strict";cc._RF.push(e,"2a1e1K1ohdIOqIS2v6rZ8lm","TimeLoseUi"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../ad/AdPartAManager"),o=t("../utils/Platform"),a=t("../mission/TimeMissionMgr"),s=t("../ViewMgr"),r=t("../MusicMgr"),c=t("../utils/Common/GameUtil"),l=t("LanguageData"),d=t("../TgaPlatform"),u=cc._decorator,h=u.ccclass,p=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.player=window.GameControl.newPlayer},e.prototype.onEnable=function(){var t=this;this.replayBtn.active=!1,this.scheduleOnce(function(){t.replayBtn.active=!0},1.5),this.schedule(function(){c.default.showBannerInSucOrFail()},i.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},e.prototype.onDisable=function(){o.default.hideBannerAd(),this.unscheduleAllCallbacks()},e.prototype.showView=function(t){this.guannum.string=l.t("home.level")+t,this.node.active=!0},e.prototype.shareAction=function(){r.default.instance.playBtn();var t=i.default.INST.getRandomOneShareData();o.default.share(t.title,t.img,t.path)},e.prototype.skipAction=function(){var t=this;d.showRewardAd({onReward:function(){t.skip()}})},e.prototype.skip=function(){this.player.timeChallengePass(a.default.instance.getCurMissionIdx()),this.node.active=!1,a.default.instance.loadMission(this.player.getCurTimeChallengeMissionIdx())},e.prototype.replayAction=function(){r.default.instance.playBtn(),this.node.active=!1,a.default.instance.loadMission(a.default.instance.getCurMissionIdx())},e.prototype.backHomeAction=function(){r.default.instance.playBtn(),this.node.active=!1,s.default.instance.hideTimeModeView(),window.GameControl.zhuye.node.active=!0,window.GameControl.zhuye.upDatethis()},e.prototype.drawerAction=function(){r.default.instance.playBtn(),s.default.instance.showDrawerView()},__decorate([p(cc.Label)],e.prototype,"guannum",void 0),__decorate([p(cc.Node)],e.prototype,"replayBtn",void 0),e=__decorate([h],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../TgaPlatform":"TgaPlatform","../ViewMgr":"ViewMgr","../ad/AdPartAManager":"AdPartAManager","../mission/TimeMissionMgr":"TimeMissionMgr","../utils/Common/GameUtil":"GameUtil","../utils/Platform":"Platform",LanguageData:"LanguageData"}],TimeMissionMgr:[function(t,e,n){"use strict";cc._RF.push(e,"a8dd3Wew/xCm6Hfr3m7jVRi","TimeMissionMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../prefab/Human"),o=t("../prefab/Finger1"),a=t("../GameLogic3"),s=t("../prefab/StandHuman"),r=t("../ui/TimeWinUI"),c=t("../ui/TimeLoseUi"),l=t("../utils/MathUtil"),d=t("../utils/SpriteUtil"),u=t("LanguageData"),h=cc._decorator,p=h.ccclass,m=h.property,f=[15,15,15,15,20,10,15,15,15,15,15,10,15,15,15],g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.humanPrefab=null,e.dengDaiUI=null,e.lvlLabel=null,e.missionHumans=0,e.givedHumans=0,e.needHumans=0,e.savedHumans=0,e.humanLabel=null,e.humans=[],e.gameLogic=null,e.inSlideHumans=0,e.dragNode=null,e.reel=null,e.isTouch=!1,e.timeProg=null,e.timeLabel=null,e.curMissionTotalTime=0,e.curMissionTimer=0,e.timeWinUI=null,e.timeLoseUI=null,e.curMissionIdx=0,e._isPause=!0,e.timer=0,e.lerp=.5,e._canSlideDown=!1,e.wx=window.wx,e.endPointInWorld=null,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){var t=this;n.instance=this,this.node.on("touchstart",function(){t.isTouch=!0},this),this.node.on("touchend",function(){t.isTouch=!1},this),this.node.on("touchcancel",function(){t.isTouch=!1},this)},e.prototype.update=function(t){this.touchSlideDown(t),this.missionCountDown(t)},e.prototype.touchSlideDown=function(t){this.isTouch&&(this.timer+=t,this.timer>=.1&&(this.timer=0,this.slideDownAction()))},e.prototype.missionCountDown=function(t){if(this.timeProg.node.active&&!this._isPause){if(this.curMissionTimer>=this.curMissionTotalTime){this._isPause=!0,this.timeProg.progress=0,this.timeLabel.string=String(0),console.log("update fail");var e=window.GameControl.newPlayer.getCurTimeChallengeMissionIdx();return this.timeLoseUI.showView(e),void this.hideMission()}this.curMissionTimer+=t,this.curMissionTimer=Number(this.curMissionTimer.toFixed(2)),this.timeLabel.string=(this.curMissionTotalTime-this.curMissionTimer).toFixed(0),Number(this.timeLabel.string)>5?this.timeProg.node.children[0].color=(new cc.Color).fromHEX("#92D050"):this.timeProg.node.children[0].color=(new cc.Color).fromHEX("#FF0000"),this.a=(1-this.curMissionTimer/this.curMissionTotalTime)*this.lerp,this.b=this.timeProg.progress*(1-this.lerp),this.timeProg.progress=this.a+this.b}},e.prototype.loadMission=function(t,e){var n=this;void 0===e&&(e=null),this.timeWinUI.node.active=!1,this.timeLoseUI.node.active=!1,this._isPause=!0,this.timeProg.node.active=!1,this.timeProg.progress=1,this.timeProg.node.children[0].color=(new cc.Color).fromHEX("#92D050");var i=window.GameControl.newPlayer.getCurTimeChallengeMissionIdx();this.curMissionTotalTime=f[i-1],this.timeLabel.string=String(this.curMissionTotalTime),this.timeLabel.node.active=!1,this.curMissionTimer=0,this.curMissionIdx=t,this.lvlLabel.string=u.t("home.level")+t,this.missionHumans=10,this.needHumans=10,this.savedHumans=0,this.givedHumans=0,this.humanLabel=null,this.node.active=!1,this._canSlideDown=!1,this.gameLogic=this.getComponent(a.default),this.endPointInWorld=null,this.humans=[],this.inSlideHumans=0,this.dragNode=null,this.reel=null,this.isTouch=!1,e=this.skinCheck(e),this.node.children.forEach(function(t){t.name.startsWith("guanka")&&(n.node.removeChild(t),t.destroy())});var o=String(t).padStart(3,"0");cc.loader.loadRes("timeMode/guanka"+o,function(t,i){if(t)console.error(t);else{var a=cc.instantiate(i);n.node.addChild(a),a.setPosition(cc.v2()),n.gameLogic.init(),a.getComponentsInChildren(s.default).forEach(function(t){t&&t.init(e)});var r=a.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("house");r.anchorY=0,r.x=-10,r.y=15;var c=l.default.getRandomInteger(1,5);d.default.LoadLocalImg(r.getComponent(cc.Sprite),"house/house"+c),0!=(c=l.default.getRandomInteger(0,2))&&cc.loader.loadRes("endNode/Plane",function(t,e){if(t)console.warn(t);else{var n=a.getChildByName("endAndStart").getChildByName("endPlant").getChildByName("jiuhuche"),i=cc.instantiate(e);i.x=50,i.y=-47,i.parent=n.parent,n.active=!1,n.destroy()}}),n.humanLabel=a.getChildByName("endAndStart").getChildByName("endPlant").getChildByName("humanCount").getComponent(cc.Label),n.humanLableScaleX=n.humanLabel.node.scaleX,n.humanLableScaleY=n.humanLabel.node.scaleY,n.dragNode=a.getChildByName("endAndStart").getChildByName("dragNode"),n.reel=a.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("reel");var u=window.GameControl.config.hurry["guanka"+o];n.missionHumans=u.bornHuman,n.givedHumans=u.giveHuman,n.needHumans=u.needHuman;var h=u.bornHuman;n.addHumansIns(h,e),n.updateInfo(),n.scheduleOnce(function(){n.timeProg.node.active=!0,n.timeLabel.node.active=!0},3),n.node.active=!0,n._isPause=!1,n.dengDaiUI.active=!0}})},e.prototype.skinCheck=function(t){var e=window.GameControl.newPlayer;return null==t?e.curSkin:e.isTrialSkin(t)&&e.isTrialSkinOutTime()?e.curSkin:t},e.prototype.addHumansIns=function(t,e){var n=null,o=null,a=null;this.node.children.forEach(function(t){t.name.startsWith("guanka")&&(a=t,n=t.getChildByName("endAndStart").getChildByName("startPlant").getChildByName("startPos"),o=t.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.v2())))}),o.y=o.y-n.height;for(var s=null,r=null,c=0;c<t;c++)s=null,r=null,(s=cc.instantiate(this.humanPrefab)).name="human"+c,r=s.getComponent(i.default),s.setPosition(o),a.addChild(s),r.initBySkinIdx(e),this.humans.push(r)},e.prototype.updateInfo=function(){this.humanLabel&&(this.humanLabel.node.stopAllActions(),this.humanLabel.node.scaleX=this.humanLableScaleX,this.humanLabel.node.scaleY=this.humanLableScaleY,this.humanLabel.node.runAction(cc.sequence(cc.scaleTo(.1,1.2*this.humanLableScaleX,1.2*this.humanLableScaleY),cc.scaleTo(.1,1*this.humanLableScaleX,1*this.humanLableScaleY)))),this.humanLabel&&(this.humanLabel.string=this.savedHumans+"/"+this.needHumans)},e.prototype.savedStandHuman=function(t){void 0===t&&(t=1),this.savedHumans+=t,this.updateInfo(),this.winOrLost(this.missionHumans)},e.prototype.savedHuman=function(t){void 0===t&&(t=1),this.savedHumans+=t,this.missionHumans-=t,this.updateInfo(),this.winOrLost(this.missionHumans)},e.prototype.dieHuman=function(t){var e=this;if(void 0===t&&(t=1),this.missionHumans-=t,this.humanOutSlide(),this.needHumans==this.givedHumans){if(this._isPause)return;return this._isPause=!0,console.log("die fail"),void this.scheduleOnce(function(){e.hideMission();var t=window.GameControl.newPlayer.getCurTimeChallengeMissionIdx();e.timeLoseUI.showView(t)},.5)}this.winOrLost(this.missionHumans)},e.prototype.winOrLost=function(t){var e=this;if(!this._isPause&&t<=0&&this.inSlideHumans<=0){if(this._isPause=!0,this.savedHumans>=this.needHumans)return console.log("end suc"),void this.scheduleOnce(function(){e.node.active=!1;var t=window.GameControl.newPlayer.getCurTimeChallengeMissionIdx();e.timeWinUI.showView(t),e.hideMission()},.5);console.log("end fail"),this.node.active=!1;var n=window.GameControl.newPlayer.getCurTimeChallengeMissionIdx();this.timeLoseUI.showView(n),this.hideMission()}},e.prototype.hideMission=function(){this.node.children.forEach(function(t){t.name.startsWith("guanka")&&(t.active=!1)})},e.prototype.canSlideDown=function(){return this._canSlideDown},e.prototype.setCanSlideDown=function(t){t?this.gameLogic.showGreenRope():this.gameLogic.showYellowRope(),this._canSlideDown=t},e.prototype.slideDownAction=function(){!this._canSlideDown||!this.humans||this.humans.length<=0||(this.wx&&this.wx.vibrateShort(),this.humanInSlide(),this.humans.shift().slideDown(this.gameLogic.getLines()))},e.prototype.getEndPoint=function(){return this.endPointInWorld},e.prototype.setEndPoint=function(t){this.endPointInWorld=t},e.prototype.humanInSlide=function(){this.inSlideHumans++},e.prototype.humanOutSlide=function(){this.inSlideHumans--},e.prototype.canDragNode=function(){return this.inSlideHumans<=0},e.prototype.showGuideFinger=function(){this.node.children.forEach(function(t){if(t.name.startsWith("guanka")){var e=t.getChildByName("endAndStart").getChildByName("shouzhi1");e&&e.getComponent(o.default).hide();var n=t.getChildByName("endAndStart").getChildByName("shouzhi2");n&&(n.active=!0)}})},e.prototype.getCurMissionIdx=function(){return this.curMissionIdx},e.prototype.setIsPause=function(t){this._isPause=t},e.instance=null,__decorate([m(cc.Prefab)],e.prototype,"humanPrefab",void 0),__decorate([m(cc.Node)],e.prototype,"dengDaiUI",void 0),__decorate([m(cc.Label)],e.prototype,"lvlLabel",void 0),__decorate([m(cc.ProgressBar)],e.prototype,"timeProg",void 0),__decorate([m(cc.Label)],e.prototype,"timeLabel",void 0),__decorate([m(r.default)],e.prototype,"timeWinUI",void 0),__decorate([m(c.default)],e.prototype,"timeLoseUI",void 0),e=n=__decorate([p],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../GameLogic3":"GameLogic3","../prefab/Finger1":"Finger1","../prefab/Human":"Human","../prefab/StandHuman":"StandHuman","../ui/TimeLoseUi":"TimeLoseUi","../ui/TimeWinUI":"TimeWinUI","../utils/MathUtil":"MathUtil","../utils/SpriteUtil":"SpriteUtil",LanguageData:"LanguageData"}],TimeModeGameUI:[function(t,e,n){"use strict";cc._RF.push(e,"2331clDfxxMg4g7gdDvSciR","TimeModeGameUI"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../mission/TimeMissionMgr"),o=t("../MusicMgr"),a=t("../TgaPlatform"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stopUi=null,e.zantingBtn=null,e.replayBtn=null,e.skipBtn=null,e.player=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.player=window.GameControl.newPlayer},e.prototype.stopAction=function(){o.default.instance.playBtn(),this.stopUi.active=!0,i.default.instance.setIsPause(!0)},e.prototype.skipAction=function(){var t=this;a.showRewardAd({onReward:function(){t._skip(),i.default.instance.setIsPause(!1)}})},e.prototype._skip=function(){this.player.timeChallengePass(i.default.instance.getCurMissionIdx()),i.default.instance.loadMission(this.player.getCurTimeChallengeMissionIdx())},e.prototype.replayAction=function(){o.default.instance.playBtn(),i.default.instance.loadMission(i.default.instance.getCurMissionIdx())},__decorate([c(cc.Node)],e.prototype,"stopUi",void 0),__decorate([c(cc.Node)],e.prototype,"zantingBtn",void 0),__decorate([c(cc.Node)],e.prototype,"replayBtn",void 0),__decorate([c(cc.Node)],e.prototype,"skipBtn",void 0),e=__decorate([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../TgaPlatform":"TgaPlatform","../mission/TimeMissionMgr":"TimeMissionMgr"}],TimeWinUI:[function(t,e,n){"use strict";cc._RF.push(e,"3de7fTZ/UVJKLpujCwLvglX","TimeWinUI"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../mission/TimeMissionMgr"),o=t("../ViewMgr"),a=t("../MusicMgr"),s=t("../utils/Common/GameUtil"),r=t("../ad/AdPartAManager"),c=t("../utils/Platform"),l=t("LanguageData"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.player=window.GameControl.newPlayer},e.prototype.onEnable=function(){var t=this;this.player.timeChallengePass(i.default.instance.getCurMissionIdx()),this.scheduleOnce(function(){t.nextguanBtn.active=!0},1.5),this.schedule(function(){s.default.showBannerInSucOrFail()},r.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},e.prototype.showView=function(t){this.anim(),this.guankaLa.string=l.t("game.levelNum",{level:t}),this.nextguanBtn.active=t<window.GameControl.config.timeChallengeMaxNum,this.node.active=!0},e.prototype.replayAction=function(){a.default.instance.playBtn(),this.node.active=!1,i.default.instance.loadMission(i.default.instance.getCurMissionIdx())},e.prototype.nextMissionAction=function(){a.default.instance.playBtn(),this.node.active=!1,i.default.instance.loadMission(this.player.getCurTimeChallengeMissionIdx())},e.prototype.drawerAction=function(){a.default.instance.playBtn(),o.default.instance.showDrawerView()},e.prototype.backHomeAction=function(){a.default.instance.playBtn(),this.node.active=!1,o.default.instance.hideTimeModeView(),window.GameControl.zhuye.node.active=!0,window.GameControl.zhuye.upDatethis()},e.prototype.showAction=function(){a.default.instance.playBtn();var t=r.default.INST.getRandomOneShareData();c.default.share(t.title,t.img,t.path)},e.prototype.anim=function(){var t=this;this.feiji.setPosition(510,442),this.rope1.setPosition(647,466),this.hengfu.setPosition(933,459),this.feiji.stopAllActions(),this.rope1.stopAllActions(),this.hengfu.stopAllActions(),this.nextguanBtn.scale=0,this.nextguanBtn.opacity=0,this.feiji.runAction(cc.sequence(cc.moveTo(.5,cc.v2(-250,this.feiji.position.y)),cc.rotateBy(.1,20),cc.rotateBy(.1,-20),cc.rotateBy(.1,-10),cc.rotateBy(.1,10),cc.moveBy(.2,cc.v2(10,0)),cc.moveBy(.2,cc.v2(-1e3,0)))),this.rope1.runAction(cc.sequence(cc.moveTo(.5,cc.v2(-100,this.rope1.position.y)),cc.delayTime(.4),cc.moveBy(.2,cc.v2(10,0)),cc.moveBy(.2,cc.v2(-1e3,0)))),this.hengfu.runAction(cc.sequence(cc.moveTo(.5,cc.v2(200,this.hengfu.position.y)),cc.delayTime(.4),cc.moveBy(.2,cc.v2(10,0)),cc.moveTo(.2,cc.v2(0,this.hengfu.position.y)),cc.callFunc(function(){t.scheduleOnce(function(){t.hengfu.runAction(cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1)).repeatForever())},.1),t.nextguanBtn.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1.2),cc.fadeIn(.1)),cc.scaleTo(.1,1)))})))},e.prototype.onDisable=function(){this.nextguanBtn.active=!1,this.feiji.rotation=0,this.feiji.setPosition(492.5,242),this.rope1.setPosition(629,286),this.hengfu.setPosition(914,249),this.feiji.stopAllActions(),this.rope1.stopAllActions(),this.hengfu.stopAllActions(),c.default.hideBannerAd(),this.unscheduleAllCallbacks()},__decorate([h(cc.Label)],e.prototype,"guankaLa",void 0),__decorate([h(cc.Node)],e.prototype,"hengfu",void 0),__decorate([h(cc.Node)],e.prototype,"feiji",void 0),__decorate([h(cc.Node)],e.prototype,"nextguanBtn",void 0),__decorate([h(cc.Node)],e.prototype,"rope1",void 0),e=__decorate([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../MusicMgr":"MusicMgr","../ViewMgr":"ViewMgr","../ad/AdPartAManager":"AdPartAManager","../mission/TimeMissionMgr":"TimeMissionMgr","../utils/Common/GameUtil":"GameUtil","../utils/Platform":"Platform",LanguageData:"LanguageData"}],Tracker:[function(t,e,n){"use strict";cc._RF.push(e,"dcab2+frbFJva1AeBQphgLt","Tracker"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./trackers/AldTracker"),o=t("./trackers/PrivateTracker"),a=t("../uuid/UUIDV4"),s=t("../Platform"),r=t("./trackers/EwanH5Tracker");(function(t){t[t.ZERO=0]="ZERO",t[t.SPEED_UP=1]="SPEED_UP",t[t.DAILY=2]="DAILY",t[t.SHOP=3]="SHOP",t[t.DAILY_TASK=4]="DAILY_TASK",t[t.GIFTVIEW2=5]="GIFTVIEW2",t[t.TASK_ADVIEW=6]="TASK_ADVIEW",t[t.MAIN=7]="MAIN"})(n.BANNER_POS_ID||(n.BANNER_POS_ID={}));var c=function(){function t(){var t=this;this.trackers=[],this.lastTimeStamp=0;try{this.openId=JSON.parse(cc.sys.localStorage.getItem("et_uuid")),!1,this.openId||(this.openId=a.v4(0,0,0),!0)}catch(t){this.openId=a.v4(0,0,0),!0}switch(cc.sys.localStorage.setItem("et_uuid",JSON.stringify(this.openId)),cc.sys.platform){case cc.sys.WECHAT_GAME:this.trackers=[new o.default],this.trackers.push(new i.default);break;case cc.sys.BAIDU_GAME:default:this.trackers=[new o.default]}window.EwSuperH5&&this.trackers.push(new r.default),this.onLogin(),s.default.onShow(function(){t.lastTimeStamp=(new Date).getTime()}),s.default.onHide(function(){(new Date).getTime()})}return t.prototype.onLogin=function(){var t=this;this.trackers.forEach(function(e){return e.onLogin(t.openId)})},t.prototype.onBannerShown=function(t){var e=this;this.trackers.forEach(function(n){return n.onBannerShown(e.openId,t)})},t.prototype.onVideoAdPlayed=function(t){var e=this;this.trackers.forEach(function(n){return n.onVideoAdPlayed(e.openId,t)})},t.prototype.onEvent=function(t,e){var n=this;this.trackers.forEach(function(i){return i.onEvent(n.openId,t,e)})},t}();n.default=new c,cc._RF.pop()},{"../Platform":"Platform","../uuid/UUIDV4":"UUIDV4","./trackers/AldTracker":"AldTracker","./trackers/EwanH5Tracker":"EwanH5Tracker","./trackers/PrivateTracker":"PrivateTracker"}],UUIDV4:[function(t,e,n){"use strict";cc._RF.push(e,"00bc3bJaERAQoMIfiMU9yEC","UUIDV4"),Object.defineProperty(n,"__esModule",{value:!0});for(var i=[],o=0;o<256;++o)i[o]=(o+256).toString(16).substr(1);function a(t,e){var n=e||0,o=i;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}n.v4=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};for(var o=new Array(16),s=0,r=void 0;s<16;s++)0==(3&s)&&(r=4294967296*Math.random()),o[s]=r>>>((3&s)<<3)&255;if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var c=0;c<16;++c)e[i+c]=o[c];return e||a(o,0)},cc._RF.pop()},{}],VStuntCRecorder:[function(t,e,n){"use strict";cc._RF.push(e,"d317aNDz4JPi6qJ1gTcfiD7","VStuntCRecorder"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Platform"),o=window.tt,a=function(){function t(){var t=this;o&&(this.recorder=o.getGameRecorderManager(),this.recorder&&(i.default.onShow(function(){return t.recorder&&t.recorder.resume()}),i.default.onHide(function(){return t.recorder&&t.recorder.pause()}),this.recorder.onStart(function(){t.startAt=(new Date).getTime(),console.log("recorder start")}),this.recorder.onPause(function(){return console.log("recorder pause")}),this.recorder.onResume(function(){return console.log("recorder resume")}),this.recorder.onInterruptionBegin(function(){return t.recorder&&t.recorder.pause()}),this.recorder.onInterruptionEnd(function(){return t.recorder&&t.recorder.resume()}),this.recorder.onError(function(t){return console.log("recorder",t)}),this.recorder.onStop(function(e){console.log(e.videoPath),t.onStopCb&&t.onStopCb(e)})))}return t.prototype.getElapse=function(){return((new Date).getTime()-this.startAt)/1e3},t.prototype.start=function(t){void 0===t&&(t=120),this.recorder&&this.recorder.start({duration:t})},t.prototype.stop=function(){this.recorder&&this.recorder.stop()},t.prototype.pause=function(){this.recorder&&this.recorder.pause()},t.prototype.resume=function(){this.recorder&&this.recorder.resume()},t.prototype.recordClip=function(t,e){this.recorder&&this.recorder.recordClip({timeRange:[t,e]})},t.prototype.clipVideo=function(t){var e=this;return console.log("clipVideo:"+t),t?new Promise(function(n,i){e.recorder&&e.recorder.clipVideo({path:t,success:n,fail:i})}):Promise.reject("videoPath null")},t.prototype.setOnStopCb=function(t){this.onStopCb=t},t}();n.default=new a,cc._RF.pop()},{"../Platform":"Platform"}],ViewMgr:[function(t,e,n){"use strict";cc._RF.push(e,"74b90twf2lFRJBHcAMRCFi6","ViewMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./ui/SkinTrialUI"),o=t("./ad/GameCenter"),a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameCenter=null,e.drawerUi=null,e.skinAndCoinUi=null,e.skinTrialUi=null,e.challengeUi=null,e.timeModeUI=null,e.hardModeUI=null,e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.showGameCenter=function(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=1),void 0===n&&(n=!1),this.gameCenter.showView(t,e,n)},e.prototype.hideGameCenter=function(){this.gameCenter.node.active=!1},e.prototype.showDrawerView=function(){this.drawerUi.active=!0},e.prototype.hideDrawerView=function(){this.drawerUi.active=!1},e.prototype.showSkinAndCoinView=function(){this.skinAndCoinUi.active=!0},e.prototype.hideSkinAndCoinView=function(){this.skinAndCoinUi.active=!1},e.prototype.showSkinTrialView=function(t,e){void 0===e&&(e=null),this.skinTrialUi.showView(t,e)},e.prototype.hideSkinTrialView=function(){this.skinTrialUi.node.active=!1},e.prototype.showChallengeView=function(){this.challengeUi.active=!0},e.prototype.hideChallengeView=function(){this.challengeUi.active=!1},e.prototype.showTimeModeView=function(){this.timeModeUI.active=!0},e.prototype.hideTimeModeView=function(){this.timeModeUI.active=!1},e.prototype.showHardModeView=function(){this.hardModeUI.active=!0},e.prototype.hideHardModeView=function(){this.hardModeUI.active=!1},e.instance=null,__decorate([r(o.default)],e.prototype,"gameCenter",void 0),__decorate([r(cc.Node)],e.prototype,"drawerUi",void 0),__decorate([r(cc.Node)],e.prototype,"skinAndCoinUi",void 0),__decorate([r(i.default)],e.prototype,"skinTrialUi",void 0),__decorate([r(cc.Node)],e.prototype,"challengeUi",void 0),__decorate([r(cc.Node)],e.prototype,"timeModeUI",void 0),__decorate([r(cc.Node)],e.prototype,"hardModeUI",void 0),e=n=__decorate([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{"./ad/GameCenter":"GameCenter","./ui/SkinTrialUI":"SkinTrialUI"}],WebPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"2c62cgg8ZBHfZ4OoDhDL5t2","WebPlatform"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.onShow=function(t){},t.prototype.onHide=function(t){},t.prototype.offShow=function(t){},t.prototype.offHide=function(t){},t.prototype.getUserSignature=function(){return Promise.reject()},t.prototype.getOpenId=function(){return Promise.reject()},t.prototype.share=function(t,e,n){return Math.random()<.7?Promise.resolve():Promise.reject()},t.prototype.showBannerAd=function(){return Promise.resolve()},t.prototype.hideBannerAd=function(){},t.prototype.showInsertAd=function(){},t.prototype.loadVideoAd=function(){return Math.random()<.7?Promise.resolve():Promise.reject()},t.prototype.playVideoAd=function(){return Math.random()<.7?Promise.resolve():Promise.reject()},t.prototype.setUserCloudStorage=function(t){return Promise.reject()},t.prototype.updateRankData=function(t){return Promise.reject()},t.prototype.getUserData=function(){return Promise.reject()},t.prototype.getRankData=function(){return Promise.reject()},t.prototype.getChallengeData=function(){return Promise.reject()},t.prototype.getRecentUserData=function(t){return Promise.reject()},t}();n.default=i,cc._RF.pop()},{}],WechatPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"638c3mojNlFnJLk7lIomW1M","WechatPlatform"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../querystring"),o=t("../Common/GameUtil"),a=window.wx;n.BANNER_ADID1="adunit-5042dff5ae1e29a3";var s=function(){function t(){var t=this;if(this.shareLeaveAt=0,this._shareOk=null,this._shareCancel=null,this._isTask=!1,this._taskTime=0,this._taskOk=null,this._taskFail=null,this.bannerAd=null,this.showBanner=!1,this.bannerAd0=null,this.bannerAd1=null,this.curBanner=0,this.video1=null,this.lastOnClose=null,a){var e=a.getSystemInfoSync();this.platform=e.platform,a&&a.cloud&&a.cloud.init(),console.warn("WeChatPlatform",e)}this.isAndroid()&&(this.onHide(function(){t.shareLeave()}),this.onShow(function(){t.shareReturn(),t.taskReturn()})),a&&a.showShareMenu({withShareTicket:!0}),a.onShareAppMessage(function(){return{title:"\u771f\u7fa1\u6155\u4f60\uff0c\u5e74\u7eaa\u8f7b\u8f7b\u5c31\u62e5\u6709\u4e86\u5b83",imageUrl:"https://jy-wxgame.oss-cn-hangzhou.aliyuncs.com/bike2/share.jpg"}});var n=a.getUpdateManager();n.onUpdateReady(function(){a.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(t){t.confirm&&n.applyUpdate()}})}),a.onAudioInterruptionBegin(function(){console.log("stop all"),cc.audioEngine.stopAll()}),a.onAudioInterruptionEnd(function(){})}return t.prototype.isIos=function(){return"ios"===this.platform},t.prototype.isAndroid=function(){return"android"===this.platform},t.prototype.shareLeave=function(){this.shareLeaveAt=(new Date).getTime()},t.prototype.shareReturn=function(){this.shareLeaveAt&&((new Date).getTime()-this.shareLeaveAt>2500?this._shareOk&&this._shareOk():this._shareCancel&&this._shareCancel());this._shareOk=this._shareCancel=null,this.shareLeaveAt=0},t.prototype.onShow=function(t){a.onShow(t)},t.prototype.onHide=function(t){a.onHide(t)},t.prototype.offShow=function(t){a.offShow(t)},t.prototype.offHide=function(t){a.offHide(t)},t.prototype.getUserSignature=function(){return new Promise(function(t,e){a.getUserInfo({success:function(e){return t(e.signature)},fail:e})})},t.prototype.getOpenId=function(){},t.prototype.getUserInfo=function(){return new Promise(function(t,e){return a.getUserInfo({success:t,fail:e})})},t.prototype.share=function(t,e,n){var o=this;return Promise.all([this.getUserSignature(),this.getOpenId(),this.getUserInfo().then(function(t){return t.userInfo.nickName}),this.getUserInfo().then(function(t){return t.userInfo.avatarUrl})]).catch(function(t){return[]}).then(function(s){return new Promise(function(r,c){o._shareOk=r,o._shareCancel=c;var l={};try{Object.assign(l,i.decode(n))}catch(t){console.warn(t),l={}}Object.assign(l,{timestamp:(new Date).getTime(),signature:s[0],openId:s[1],nickName:s[2],avatarUrl:s[3]});var d={query:i.stringify(l)};t&&(d.title=t),e&&(d.imageUrl=e),a.request({url:"https://cdn.wanliebian.cn/extInfo/gh_de14c6bbb138.json",success:function(t){console.log(t);var e=t.data.data.shares,n=Math.floor(Math.random()*e.length);d.title=e[n].title,d.imageUrl=e[n].cover,d.query=e[n].path,console.log(d),a.shareAppMessage(d)},fail:function(t){console.log(t),a.shareAppMessage(d)}}),o.isIos()&&(o.shareLeave(),setTimeout(function(){return o.shareReturn()},350))})})},t.prototype.taskAd=function(t,e,n){var i=this;this._taskTime=t,this._isTask=!0,this._taskOk=e,this._taskFail=n,this.onShow(function(){i.taskReturn()})},t.prototype.taskReturn=function(){this._isTask&&((new Date).getTime()-this._taskTime>1e4?this._taskOk&&this._taskOk():this._taskFail&&this._taskFail(),this._isTask=!1,this._taskOk=this._taskFail=null)},t.prototype.loadBanner=function(){var t=this;if(a){var e=a.getSystemInfoSync();this.bannerAd&&this.bannerAd.destroy(),this.bannerAd=a.createBannerAd({adUnitId:n.BANNER_ADID1,style:{left:e.screenWidth,top:e.screenHeight,width:0}});e.screenWidth;var i=e.screenHeight/e.screenWidth>1.9?80:0;return i=e.screenWidth*i/720,this.bannerAd.onResize(function(n){n&&(t.bannerAd.style.top=e.screenHeight-n.height-i,t.bannerAd.style.left=(e.screenWidth-n.width)/2,console.log(t.bannerAd.style))}),this.bannerAd.style.width=300,new Promise(function(e,n){t.bannerAd.onLoad(e),t.bannerAd.onError(n)}).then(function(){return!0})}return Promise.reject()},t.prototype.showBannerAd=function(){var t=this;if(!a)return Promise.reject();this.showBanner=!0;var e=a.getSystemInfoSync(),i=e.screenHeight/e.screenWidth>1.9?80:0;return i=e.screenWidth*i/720,0==this.curBanner?(this.curBanner=1,this.bannerAd1&&this.bannerAd1.hide(),this.bannerAd1&&this.bannerAd1.destroy(),this.bannerAd1=a.createBannerAd({adUnitId:n.BANNER_ADID1,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.bannerAd1.onResize(function(n){n&&(t.bannerAd1.style.top=e.screenHeight-n.height-i,t.bannerAd1.style.left=(e.screenWidth-n.width)/2)}),this.bannerAd1.onError(function(){}),this.bannerAd1.style.width=300,this.bannerAd0||(this.bannerAd0&&this.bannerAd0.destroy(),this.bannerAd0=a.createBannerAd({adUnitId:n.BANNER_ADID1,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.bannerAd0.onResize(function(n){n&&(t.bannerAd0.style.top=e.screenHeight-n.height-i,t.bannerAd0.style.left=(e.screenWidth-n.width)/2)}),this.bannerAd0.style.width=300),this.bannerAd0.show(),new Promise(function(e,n){t.bannerAd0.onLoad(e),t.bannerAd0.onError(n)}).then(function(){return t.showBanner?t.bannerAd0.show():Promise.reject()})):(this.curBanner=0,this.bannerAd0&&this.bannerAd0.hide(),this.bannerAd0&&this.bannerAd0.destroy(),this.bannerAd0=a.createBannerAd({adUnitId:n.BANNER_ADID1,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.bannerAd0.onResize(function(n){n&&(t.bannerAd0.style.top=e.screenHeight-n.height-i,t.bannerAd0.style.left=(e.screenWidth-n.width)/2)}),this.bannerAd0.style.width=300,this.bannerAd0.onError(function(){}),this.bannerAd1||(this.bannerAd1&&this.bannerAd1.destroy(),this.bannerAd1=a.createBannerAd({adUnitId:n.BANNER_ADID1,style:{left:e.screenWidth,top:e.screenHeight,width:0}}),this.bannerAd1.onResize(function(n){n&&(t.bannerAd1.style.top=e.screenHeight-n.height-i,t.bannerAd1.style.left=(e.screenWidth-n.width)/2)}),this.bannerAd1.style.width=300),this.bannerAd1.show(),new Promise(function(e,n){t.bannerAd1.onLoad(e),t.bannerAd1.onError(n)}).then(function(){return t.showBanner?t.bannerAd1.show():Promise.reject()}))},t.prototype.hideBannerAd=function(){this.showBanner=!1,this.bannerAd&&this.bannerAd.hide(),this.bannerAd0&&this.bannerAd0.hide(),this.bannerAd1&&this.bannerAd1.hide(),o.default.hideWxBanner()},t.prototype.showInsertAd=function(){},t.prototype.loadVideoAd=function(t){return void 0===t&&(t="adunit-ef21fcac2cb50fe6"),this.video1&&this.video1.offError(console.warn),this.video1=a.createRewardedVideoAd({adUnitId:t}),this.video1&&this.video1.onError(console.warn),this.video1?this.video1.load():Promise.reject("create ad fail")},t.prototype.playVideoAd=function(){var t=this;return this.video1?(this.video1&&this.video1.offClose(this.lastOnClose),new Promise(function(e,n){t.lastOnClose=function(t){t&&t.isEnded||void 0===t?e():n()},t.video1.onClose(t.lastOnClose),t.video1.show()})):Promise.reject("no loaded video")},t.prototype.setUserCloudStorage=function(t){return new Promise(function(e,n){a.setUserCloudStorage({KVDataList:t,success:e,fail:n})})},t.prototype.updateRankData=function(t){return Promise.resolve()},t.prototype.getUserData=function(){var t=this,e=a.cloud.database(),n=e.command;return new Promise(function(i,o){e.collection("rank").where({_openid:t.openid}).field({star:!0,nickname:!0,avatarUrl:!0,level:!0}).get().then(function(t){var o=t.data[0];e.collection("rank").where({star:n.gt(t.data[0].star)}).count({success:function(t){o.rank=t.total,i(o)}})}).catch(function(t){o(t)})})},t.prototype.getRankData=function(){var t=a.cloud.database(),e=t.command;return new Promise(function(n,i){try{t.collection("rank").orderBy("star","desc").orderBy("_id","desc").where({avatarUrl:e.neq("")}).limit(10).get().then(function(t){console.log(t),n(t.data)}).catch(function(t){console.log(t),i(t)})}catch(t){i(t)}})},t.prototype.getChallengeData=function(){var t=a.cloud.database(),e=t.command;return new Promise(function(n,i){try{t.collection("rank").orderBy("level","desc").orderBy("_id","desc").where({avatarUrl:e.neq("")}).limit(10).get().then(function(t){console.log(t),n(t.data)}).catch(function(t){console.log(t),i(t)})}catch(t){i(t)}})},t.prototype.getRecentUserData=function(t){var e=a.cloud.database(),n=e.command;return new Promise(function(i,o){e.collection("rank").orderBy("star","asc").where({star:n.gt(t),avatarUrl:n.neq("")}).field({star:!0,nickname:!0,avatarUrl:!0,level:!0}).limit(1).get().then(function(t){i(t)}).catch(function(t){o(t)})})},t}();n.default=s,cc._RF.pop()},{"../Common/GameUtil":"GameUtil","../querystring":"index"}],WinUi:[function(t,e,n){"use strict";cc._RF.push(e,"5aa2basnnxEwJLr8oihCSU2","WinUi");var i=u(t("./ChapterUi")),o=t("./ad/AdPartAManager"),a=u(o),s=u(t("./utils/Platform")),r=u(t("./ViewMgr")),c=u(t("./CoinRewardUi")),l=u(t("./utils/Common/GameUtil")),d=u(t("./MusicMgr"));function u(t){return t&&t.__esModule?t:{default:t}}var h=t("LanguageData");cc.Class(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({extends:cc.Component,properties:{guankaLa:cc.Label,hengfu:cc.Node,feiji:cc.Node,coinLabel:cc.Label,nextguanBtn:cc.Node,homeBtn:cc.Node,starOutline1:cc.Node,starOutline2:cc.Node,starOutline3:cc.Node,star1:cc.Node,star2:cc.Node,star3:cc.Node,rope1:cc.Node,starList:[cc.Node],chapterUi:i.default,coinRewardUi:c.default},ctor:function(){this.m_iGuanIndex=0,this.wx=window.wx},onLoad:function(){GameControl.winUi=this,this.nextguanBtn.on(cc.Node.EventType.TOUCH_END,this.nextguan,this),this.homeBtn.on(cc.Node.EventType.TOUCH_END,this.backHome,this),this.dur=.25},onEnable:function(){var t=this;this.wx&&this.wx.aldShowEvent(o.SUCC_PAGE),this.nextguanBtn.active=!1,this.scheduleOnce(function(){t.nextguanBtn.active=!0},1.5),this.schedule(function(){l.default.showBannerInSucOrFail()},a.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1),this.coinLabel.string=String(GameControl.newPlayer.coinNumber),d.default.instance.playSucPage()},onDisable:function(){s.default.hideBannerAd(),this.unscheduleAllCallbacks()},chongkai:function(){this.node.active=!1,GameControl.youxiUi.replayFunc()},nextguan:function(){this.wx&&this.wx.aldClickEvent(o.NEXT_LVL_BTN,o.SUCC_PAGE),this.node.active=!1,a.default.INST.isShowGameCenterInSuccPage(this.m_iGuanIndex)||this.coinRewardUi.showView(this.m_iGuanIndex)},showAction:function(){d.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(o.SHOW_BTN,o.SUCC_PAGE);var t=a.default.INST.getRandomOneShareData();s.default.share(t.title,t.img,t.path)},backHome:function(){this.wx&&this.wx.aldClickEvent(o.BACK_BTN,o.SUCC_PAGE),this.node.active=!1,GameControl.GameObject.YouxiUi.active=!1,GameControl.zhuye.node.active=!0,GameControl.zhuye.upDatethis()},upDatethis:function(t,e){this.m_iGuanIndex=t,this.guankaLa.string=h.t("game.levelNum",{level:t}),this.anim(e),this.nextguanBtn.active=t<GameControl.config.guankaMaxNum},anim:function(t){var e=this;this.feiji.setPosition(510,442),this.rope1.setPosition(647,466),this.hengfu.setPosition(933,459),this.feiji.stopAllActions(),this.rope1.stopAllActions(),this.hengfu.stopAllActions(),this.star1.scale=this.star2.scale=this.star3.scale=1,this.star1.active=this.star2.active=this.star3.active=!1,this.starOutline1.rotation=this.starOutline2.rotation=this.starOutline3.rotation=0,this.starOutline1.stopAllActions(),this.starOutline2.stopAllActions(),this.starOutline3.stopAllActions(),this.nextguanBtn.scale=0,this.nextguanBtn.opacity=0;var n=void 0,i=void 0,o=!1;t>=1&&(n=!0),t>=2&&(i=!0),t>=3&&(o=!0),n&&this.starAnim(this.star1),this.scheduleOnce(function(){i&&e.starAnim(e.star2),e.scheduleOnce(function(){o&&e.starAnim(e.star3),e.starOutline(n,i,o)},.3)},.3),this.feiji.runAction(cc.sequence(cc.moveTo(.5,cc.v2(-250,this.feiji.position.y)),cc.rotateBy(.1,20),cc.rotateBy(.1,-20),cc.rotateBy(.1,-10),cc.rotateBy(.1,10),cc.moveBy(.2,cc.v2(10,0)),cc.moveBy(.2,cc.v2(-1e3,0)))),this.rope1.runAction(cc.sequence(cc.moveTo(.5,cc.v2(-100,this.rope1.position.y)),cc.delayTime(.4),cc.moveBy(.2,cc.v2(10,0)),cc.moveBy(.2,cc.v2(-1e3,0)))),this.hengfu.runAction(cc.sequence(cc.moveTo(.5,cc.v2(200,this.hengfu.position.y)),cc.delayTime(.4),cc.moveBy(.2,cc.v2(10,0)),cc.moveTo(.2,cc.v2(0,this.hengfu.position.y)),cc.callFunc(function(){e.scheduleOnce(function(){e.hengfu.runAction(cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1)).repeatForever())},.1),e.nextguanBtn.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1.2),cc.fadeIn(.1)),cc.scaleTo(.1,1)))})))},starAnim:function(t){t.scale=0,t.active=!0,t.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,1)))},starOutline:function(t,e,n){var i=this,o=.2;t&&(o+=2*this.dur),e&&(o+=2*this.dur),n&&(o+=2*this.dur),this.scheduleOnce(function(){t&&i.starOutlineAnim(i.starOutline1),i.scheduleOnce(function(){e&&i.starOutlineAnim(i.starOutline2),i.scheduleOnce(function(){n&&i.starOutlineAnim(i.starOutline3)},2*i.dur)},2*i.dur)},0),this.schedule(function(){t&&i.starOutlineAnim(i.starOutline1),i.scheduleOnce(function(){e&&i.starOutlineAnim(i.starOutline2),i.scheduleOnce(function(){n&&i.starOutlineAnim(i.starOutline3)},2*i.dur)},2*i.dur)},o+.1,cc.macro.repeatForever)},starOutlineAnim:function(t){t.runAction(cc.sequence(cc.spawn(cc.rotateBy(this.dur,-15),cc.scaleTo(this.dur,1.2)),cc.spawn(cc.rotateBy(this.dur,15),cc.scaleTo(this.dur,1))))},drawerAction:function(){d.default.instance.playBtn(),r.default.instance.showDrawerView()}},"onDisable",function(){s.default.hideBannerAd(),this.nextguanBtn.active=!1,this.feiji.rotation=0,this.feiji.setPosition(492.5,242),this.rope1.setPosition(629,286),this.hengfu.setPosition(914,249),this.feiji.stopAllActions(),this.rope1.stopAllActions(),this.hengfu.stopAllActions(),this.star1.active=this.star2.active=this.star3.active=!1,this.star1.scale=this.star2.scale=this.star3.scale=1,this.starOutline1.rotation=this.starOutline2.rotation=this.starOutline3.rotation=0,this.starOutline1.stopAllActions(),this.starOutline2.stopAllActions(),this.starOutline3.stopAllActions(),this.unscheduleAllCallbacks()})),cc._RF.pop()},{"./ChapterUi":"ChapterUi","./CoinRewardUi":"CoinRewardUi","./MusicMgr":"MusicMgr","./ViewMgr":"ViewMgr","./ad/AdPartAManager":"AdPartAManager","./utils/Common/GameUtil":"GameUtil","./utils/Platform":"Platform",LanguageData:"LanguageData"}],WxBannerAds:[function(t,e,n){"use strict";cc._RF.push(e,"2941cWzXBJAabeScErQEKQK","WxBannerAds"),Object.defineProperty(n,"__esModule",{value:!0});var i=window.wx,o=function(){function t(){}return t.init=function(e){void 0===e&&(e={});var n=i.getSystemInfoSync();if(t.curModel=n.model,t.windowHeight=n.windowHeight,t.windowWidth=n.windowWidth,t.stageHeight=cc.view.getFrameSize().height,t.stageWidth=cc.view.getFrameSize().width,e.adUnitId&&(t.adUnitIds=e.adUnitId,t.adUnitIds.length)){for(var o=0,a=t.adUnitIds;o<a.length;o++){var s=a[o];t.adUnitIdFailNum[s]=0,t.adUnitIdStatus[s]=!0}t.curAdUnitId=t.randomAdUnitId()}e.adUnitIdMaxFailNum&&(t.adUnitIdFailNum=e.adUnitIdMaxFailNum),e.style&&(t.styleCustom=e.style,e.style.styleMode&&-1!==t.styleModeList.indexOf(e.style.styleMode)&&(t.styleMode=e.style.styleMode)),e.interval&&(t.interval=e.interval,t.interval<t.intervalMin&&(t.interval=t.intervalMin)),e.timerStatus&&(t.timerStatus=e.timerStatus),t.load(),t.timer&&clearInterval(t.timer),t.timer=setInterval(function(){t.timerStatus&&t.showStatus&&(t.timerSecond++,t.timerSecond>t.interval&&(t.isTimerLoad=!0,t.load()))},1e3)},t.load=function(){var e;t.cache&&t.cache.destroy(),t.isTimerLoad?(e=t.styleCache.style,t.styleHasBottom=t.styleCache.hasBottom,t.styleBottomNum=t.styleCache.bottomNum,t.isTimerLoad=!1):e=t.style,t.cache&&t.cache.destroy(),t.cache=i.createBannerAd({adUnitId:t.randomAdUnitId(),style:e}),t.cache.onLoad(t.onLoad),t.cache.onError(t.onError),t.cache.onResize(t.onResize),t.timerSecond=0},t.show=function(e,n){if(void 0===e&&(e={}),void 0===n&&(n=null),e.style&&(t.styleCustom=e.style,e.style.styleMode&&-1!==t.styleModeList.indexOf(e.style.styleMode)&&(t.styleMode=e.style.styleMode)),e.timerStatus&&(t.timerStatus=e.timerStatus),e.realtime)t.load(),n&&(t._onLoad=function(){t.cache.show(),n()});else{e.style&&e.style.width&&t.stage2windowWidth(e.style.width)!==t.cache.style.width&&t.onResize(t.onResize);var i=t.style;t.cache.style.width=i.width,t.cache.style.top=i.top,t.cache.style.left=i.left,t.cache.show(),n&&n()}t.showStatus=!0},t.hide=function(){t.cache&&t.cache.hide(),t.showStatus=!1},t.destroy=function(){},t.onResize=function(e){t.cache.offResize(t.onResize),t.styleHasBottom&&(t.cache.style.top=t.windowHeight-e.height-t.styleBottomNum-(t.windowHeight/t.windowWidth>1.8?15:0)),t._onResize&&(t._onResize(e),t._onResize=null)},t.onLoad=function(){t.loadStatus=!0,t.cache.offLoad(t.onLoad),t._onLoad&&(t._onLoad(t.cache.style),t._onLoad=null)},t.onError=function(e){switch(t.cache.offError(t.onError),e.errCode){case 1002:case 1005:case 1006:case 1007:case 1008:t.adUnitIdStatus[t.curAdUnitId]=!1;break;case 1e3:case 1001:case 1003:case 1004:default:t.adUnitIdFailNum[t.curAdUnitId]++,setTimeout(function(){t.load()},3e3)}t._onError&&(t._onError(e),t._onError=null)},t.randomAdUnitId=function(){return t.adUnitIds.length?t.adUnitIds[Math.floor(Math.random()*t.adUnitIds.length)]:null},t.removeCurAdUnitId=function(){t.adUnitIds.length&&-1!==t.adUnitIds.indexOf(t.curAdUnitId)&&(-1===t.adUnitIdsErr.indexOf(t.curAdUnitId)&&t.adUnitIdsErr.push(t.curAdUnitId),t.adUnitIds.splice(t.adUnitIds.indexOf(t.curAdUnitId),1)),t.curAdUnitId=null},t.switchCurAdUnitId=function(e){void 0===e&&(e=null),e&&-1!==t.adUnitIds.indexOf(e)?t.curAdUnitId=e:t.curAdUnitId=t.randomAdUnitId()},t.stage2windowWidth=function(e){return e*t.windowWidth/t.stageWidth},t.stage2windowHeight=function(e){return e*t.windowHeight/t.stageHeight},t.window2stageWidth=function(e){return e*t.stageWidth/t.windowWidth},t.window2stageHeight=function(e){return e*t.stageHeight/t.windowHeight},Object.defineProperty(t,"style",{get:function(){t.styleHasBottom=!1,t.styleBottomNum=0;var e={};switch(e.width=t.styleCustom.width?t.stage2windowWidth(t.styleCustom.width):t.windowHeight/t.windowWidth>1.8?t.windowWidth:300,e.width>t.windowWidth&&(e.width=t.windowWidth),t.styleMode){case"none":void 0!==t.styleCustom.bottom?(t.styleHasBottom=!0,t.styleBottomNum=t.stage2windowHeight(t.styleCustom.bottom),e.top=t.windowHeight-e.width/3-t.styleBottomNum):void 0!==t.styleCustom.top?e.top=t.stage2windowHeight(t.styleCustom.top):(t.styleHasBottom=!0,e.top=t.windowHeight-e.width/3),void 0!==t.styleCustom.center?(e.left=t.windowWidth/2+t.stage2windowWidth(t.styleCustom.center)-e.width/2,e.left<0?e.left=0:e.left>t.windowWidth-e.width&&(e.left=t.windowWidth-e.width)):void 0!==t.styleCustom.right?e.left=t.windowWidth-t.stage2windowWidth(t.styleCustom.right)-e.width:void 0!==t.styleCustom.left?e.left=t.stage2windowWidth(t.styleCustom.left):e.left=(t.windowWidth-e.width)/2;break;case"left-top":e.top=0,e.left=0;break;case"right-top":e.top=0,e.left=t.windowWidth-e.width;case"top":case"center-top":e.top=0,e.left=(t.windowWidth-e.width)/2;break;case"left-bottom":t.styleHasBottom=!0,e.top=t.windowHeight-e.width/3,e.left=0;break;case"right-bottom":t.styleHasBottom=!0,e.top=t.windowHeight-e.width/3,e.left=t.windowWidth-e.width;break;case"bottom":case"center-bottom":default:t.styleHasBottom=!0,e.top=t.windowHeight-e.width/3,e.left=(t.windowWidth-e.width)/2}return t.styleCache={style:e,hasBottom:t.styleHasBottom,bottomNum:t.styleBottomNum},e},enumerable:!0,configurable:!0}),t.showStatus=!1,t.loadStatus=!1,t.cache=null,t._onResize=null,t._onLoad=null,t._onError=null,t.timerStatus=!1,t.interval=600,t.intervalMin=60,t.isTimerLoad=!1,t.timerSecond=0,t.curAdUnitId=null,t.adUnitIds=[],t.adUnitIdsErr=[],t.adUnitIdMaxFailNum=3,t.adUnitIdStatus={},t.adUnitIdFailNum={},t.curModel="",t.modelList=["iPhone X"],t.styleModeList=["left-top","center-top","right-top","left-bottom","center-bottom","right-bottom","top","bottom"],t.styleMode="center-bottom",t.styleCustom={},t.styleCache={},t.styleHasBottom=!1,t.styleBottomNum=0,t}();n.default=o,cc._RF.pop()},{}],Xuanzhuan:[function(t,e,n){"use strict";cc._RF.push(e,"fccddQU2cVFMaWnrw/M5KOW","Xuanzhuan"),cc.Class({extends:cc.Component,properties:{sudu:{default:100,type:cc.Integer}},start:function(){},update:function(t){this.node.rotation+=t*this.sudu}}),cc._RF.pop()},{}],YouxiUi:[function(t,e,n){"use strict";cc._RF.push(e,"926170nr5lI8q5tRyhExisJ","YouxiUi");var i=t("./FullStarUi"),o=d(i),a=d(t("./mission/MissionMgr")),s=t("./ad/AdPartAManager"),r=d(s),c=(d(t("./utils/Platform")),d(t("./ViewMgr"))),l=d(t("./MusicMgr"));function d(t){return t&&t.__esModule?t:{default:t}}var u=t("LanguageData"),h=t("./TgaPlatform");cc.Class({extends:cc.Component,properties:{guankaparent:cc.Node,zantingBtn:cc.Node,replayBtn:cc.Node,skipBtn:cc.Node,guankaLa:cc.Label,winUi:cc.Node,loseUi:cc.Node,stopUi:cc.Node,testwinbtn:cc.Node,testlosebtn:cc.Node,fullStarUi:o.default,missionMgr:a.default,exportNode:cc.Node,drawerNode:cc.Node},ctor:function(){this.m_iGuanIndex=0,this.wx=window.wx},onLoad:function(){var t=this;GameControl.youxiUi=this,this.zantingBtn.on(cc.Node.EventType.TOUCH_END,this.stopFunc,this),this.replayBtn.on(cc.Node.EventType.TOUCH_END,this.replayFunc,this),this.skipBtn.on(cc.Node.EventType.TOUCH_END,this.skipFunc,this),this.testwinbtn.on(cc.Node.EventType.TOUCH_END,function(){t.winFunc(2)},this),this.testlosebtn.on(cc.Node.EventType.TOUCH_END,this.loseFunc,this)},start:function(){this.exportNode.active=r.default.INST.isShowExportInHomePage()},onEnable:function(){this.zantingBtn.active=!0,this.replayBtn.active=!0,l.default.instance.playFireBell()},updatethis:function(t){this.wx&&this.wx.aldShowEvent(s.MISSION_PAGE,u.t("home.level")+t),this.m_iGuanIndex=t,this.guankaLa.string=u.t("home.level")+this.m_iGuanIndex,t>=GameControl.config.guankaMaxNum?this.skipBtn.active=!1:this.skipBtn.active=!0,a.default.instance.loadMission(t)},stopFunc:function(){this.stopUi.active=!0,GameControl.stopUi.guankaLa.string=u.t("home.level")+this.m_iGuanIndex,this.zantingBtn.active=!1,this.replayBtn.active=!1,this.skipBtn.active=!1,h.showSlotAd({type:"pause"})},skipFunc:function(){var t=this;h.showRewardAd({onReward:function(){t.skip()}})},skip:function(){this.m_iGuanIndex+1>GameControl.newPlayer.m_currOpenGuan&&(GameControl.newPlayer.m_mapLevelStar[this.m_iGuanIndex]=0,GameControl.newPlayer.m_currOpenGuan++),this.m_iGuanIndex++,this.updatethis(this.m_iGuanIndex),GameControl.GameObject.Set_Local_Data(),GameControl.GameObject.Set_Level_Data()},replayFunc:function(){l.default.instance.playBtn(),this.updatethis(this.m_iGuanIndex)},winFunc:function(t){if(this.wx&&this.wx.aldSendEvent("\u80dc\u5229",u.t("home.level")+this.m_iGuanIndex),GameControl.GameObject.Set_Local_Data(),GameControl.GameObject.Set_Level_Data(),t<i.WIN_MAX_STAR_NUM)return this.fullStarUi.active=!0,void this.fullStarUi.showView(t);this.showWinUi(t)},drawerAction:function(){l.default.instance.playBtn(),c.default.instance.showDrawerView()},showWinUi:function(t){GameControl.newPlayer.m_mapLevelStar[this.m_iGuanIndex]&&0!=GameControl.newPlayer.m_mapLevelStar[this.m_iGuanIndex]||(GameControl.newPlayer.addCompleteGuanNum(1),this.m_iGuanIndex>=GameControl.newPlayer.m_currOpenGuan&&this.m_iGuanIndex<GameControl.config.guankaMaxNum&&GameControl.newPlayer.m_currOpenGuan++),GameControl.newPlayer.m_mapLevelStar[this.m_iGuanIndex]=t,this.winUi.active=!0,GameControl.winUi.upDatethis(this.m_iGuanIndex,t),GameControl.GameObject.Set_Local_Data(),GameControl.GameObject.Set_Level_Data(),h.reportLevelPassed(this.m_iGuanIndex),h.reportRankScore({rankId:"9941734cf4e241a68ef4c49c31d8926a",score:GameControl.newPlayer.getAllStarNum()}),h.reportRankScore({rankId:"f3bc9795c5c9435190e8317fa66b25d0",score:GameControl.newPlayer.m_iCompleteGuanNum}),GameControl.newPlayer.m_iCompleteGuanNum>=168&&h.reportLevelPassed()},loseFunc:function(){this.loseUi.active=!0,GameControl.loseUi.updatethis(this.m_iGuanIndex)},activeStop:function(){this.m_iGuanIndex>=GameControl.config.guankaMaxNum?this.skipBtn.active=!1:this.skipBtn.active=!0,GameControl.youxiUi.zantingBtn.active=!0,GameControl.youxiUi.replayBtn.active=!0},removeMission:function(){}}),cc._RF.pop()},{"./FullStarUi":"FullStarUi","./MusicMgr":"MusicMgr","./TgaPlatform":"TgaPlatform","./ViewMgr":"ViewMgr","./ad/AdPartAManager":"AdPartAManager","./mission/MissionMgr":"MissionMgr","./utils/Platform":"Platform",LanguageData:"LanguageData"}],ZhangItem:[function(t,e,n){"use strict";cc._RF.push(e,"f414fmrrqtAv5wRZEAoiHDO","ZhangItem"),cc.Class({extends:cc.Component,properties:{starnum:cc.Label,sprbg:[cc.Node],sprAllstar:cc.Node,lock:cc.Node},ctor:function(){this.m_iZhangjie=0,this.m_bIslock=!1},onLoad:function(){},currLevel:function(){this.sprbg[0].active=!1,this.sprbg[1].active=!0;var t=cc.sequence(cc.scaleTo(1,1.1),cc.scaleTo(.2,1));this.node.runAction(t.repeatForever())},updatethis:function(){this.node.scale=cc.v2(1,1),this.node.stopAllActions(),this.sprbg[0].active=!0,this.sprbg[1].active=!1,this.starnum.string=GameControl.newPlayer.getzhangstarnum(this.m_iZhangjie)+"/36";var t=Math.ceil(14);t>=this.m_iZhangjie?this.lock.active=!1:this.lock.active=!0,t==this.m_iZhangjie&&this.currLevel(),GameControl.newPlayer.getzhangstarnum(this.m_iZhangjie)>=36?this.sprAllstar.active=!0:this.sprAllstar.active=!1},clickthis:function(){}}),cc._RF.pop()},{}],Zhuanlun:[function(t,e,n){"use strict";cc._RF.push(e,"5da69biFWtABYbit7pZmpga","Zhuanlun");var i=a(t("../utils/CocosUtil")),o=a(t("../MusicMgr"));function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{sudu:{default:100,type:cc.Integer},isyidong:{default:!1,type:Boolean,tooltip:"\u662f\u5426\u76f4\u7ebf\u79fb\u52a8"},startposX:{default:0,type:cc.Integer},startposY:{default:0,type:cc.Integer},endposX:{default:0,type:cc.Integer},endposY:{default:0,type:cc.Integer},yidongtime:{default:0,type:cc.Float},iszhuanquan:{default:!1,type:Boolean,tooltip:"\u662f\u5426\u8f6c\u5708\u79fb\u52a8"},circleCenter:{default:cc.v2(0,0),type:cc.Vec2,tooltip:"\u5706\u5fc3"},circleRadius:{default:0,type:cc.number},carSpeed:{default:0,type:cc.number,tooltip:"\u8f6c\u52a8\u901f\u5ea6"},isMoveWithPoints:{default:!1,type:Boolean,tooltip:"\u6839\u636e\u6307\u5b9a\u7684\u8def\u70b9\u79fb\u52a8\uff0c\u5982\u679c\u52fe\u9009\u8be5\u9009\u9879\u540e\uff0c\u672a\u6307\u5b9a\u8def\u70b9\uff0c\u5c06\u5728\u81ea\u8eab\u5750\u6807\u7cfb\u4e0b\uff0c\u6309\u7167\u4e0a\uff0c\u53f3\uff0c\u4e0b\uff0c\u5de6100px\u7684\u987a\u65f6\u9488\u8def\u5f84\u79fb\u52a8\u3002\u5f00\u542fisyidong\u9009\u9879\u540e\uff0c\u8be5\u9009\u9879\u65e0\u6548"},routePoints:{default:[],type:[cc.Vec2],tooltip:"\u7269\u4f53\u79fb\u52a8\u65f6\u7684\u8def\u70b9\uff0c\u7269\u4f53\u5c06\u4ece\u81ea\u8eab\u4f4d\u7f6e\u5f00\u59cb\u6309\u7167\u6307\u5b9a\u7684\u70b9\u79fb\u52a8\uff0c\u6700\u540e\u79fb\u52a8\u5230\u81ea\u8eab\u4f4d\u7f6e\uff0c\u5e76\u4e0d\u65ad\u5faa\u73af\u3002\u5f00\u542fisMoveWithPoints\u9009\u9879\u540e\u6709\u6548"}},ctor:function(){this.radian=0,this.baseRadian=0},start:function(){var t=this;if(this.isyidong){var e=this.node.position,n=cc.v2(this.endposX,this.endposY),o=this.yidongtime*n.sub(e).mag()/cc.v2(this.startposX,this.startposY).sub(n).mag();this.node.runAction(cc.sequence(cc.moveTo(o,n),cc.callFunc(function(){var e=cc.sequence(cc.moveTo(t.yidongtime,cc.v2(t.startposX,t.startposY)),cc.moveTo(t.yidongtime,cc.v2(t.endposX,t.endposY)));t.node.runAction(e.repeatForever())})))}var a=cc.v2(this.circleCenter.x+1,this.circleCenter.y);if(this.iszhuanquan&&(this.circleRadius=Math.abs(this.node.position.sub(this.circleCenter).mag()),this.baseRadian=i.default.pointsAngle(this.circleCenter,a,this.node.position)),!this.isyidong&&this.isMoveWithPoints){var s=this.node.position;(!this.routePoints||this.routePoints.length<=0)&&(this.routePoints.push(s.add(cc.v2(0,100))),this.routePoints.push(s.add(cc.v2(100,100))),this.routePoints.push(s.add(cc.v2(100,0)))),this.routePoints.push(s),this.moveWithPoints(this.routePoints)}},moveWithPoints:function(t){var e=this,n=[];0!=this.sudu&&(t.forEach(function(t){n.push(new cc.moveTo(100/e.sudu,t))}),this.node.runAction(cc.sequence(n).repeatForever()))},circleMove:function(t){this.radian+=t*(this.carSpeed/100);var e=this.circleRadius*Math.cos(this.radian)+this.circleCenter.x,n=this.circleRadius*Math.sin(this.radian)+this.circleCenter.y;this.node.position=this.getTar(cc.v2(e,n),this.circleCenter,this.baseRadian)},getTar:function(t,e,n){var i=(t.x-e.x)*Math.cos(n)-(t.y-e.y)*Math.sin(n)+e.x,o=(t.x-e.x)*Math.sin(n)+(t.y-e.y)*Math.cos(n)+e.y;return cc.v2(i,o)},update:function(t){this.iszhuanquan&&this.circleMove(t),this.node.rotation-=t*this.sudu},onBeginContact:function(t,e,n){"human"!=n.node.group&&"standHuman"!=n.node.group||o.default.instance.playGearOrLaser()}}),cc._RF.pop()},{"../MusicMgr":"MusicMgr","../utils/CocosUtil":"CocosUtil"}],ZhuyeUi2:[function(t,e,n){"use strict";cc._RF.push(e,"ffbf1WtvxFCHYUeE+DvZ6yT","ZhuyeUi2");var i=d(t("./mission/MissionMgr")),o=d(t("./ViewMgr")),a=t("./ad/AdPartAManager"),s=d(a),r=d(t("./utils/Platform")),c=d(t("./utils/Common/GameUtil")),l=d(t("./MusicMgr"));function d(t){return t&&t.__esModule?t:{default:t}}var u=t("LanguageData"),h=t("./TgaPlatform");cc.Class({extends:cc.Component,properties:{tiaozhanBtn:cc.Node,guankaBtn:cc.Node,guankaPickBtn:cc.Node,gunakaBtnLa:cc.Label,shezhiBtn:cc.Node,checkInBtn:cc.Node,guankanum:cc.Label,starnum:cc.Label,coinNum:cc.Label,skinBtn:cc.Node,pickzhangjieUi:cc.Node,settingUi:cc.Node,exitBtn:cc.Node,exportAds:cc.Node,staticAds:cc.Node},ctor:function(){this.wx=window.wx},onLoad:function(){GameControl.zhuye=this,this.shezhiBtn.on(cc.Node.EventType.TOUCH_END,this.shezhiFunc,this),this.tiaozhanBtn.on(cc.Node.EventType.TOUCH_END,this.tiaozhanFunc,this),this.guankaBtn.on(cc.Node.EventType.TOUCH_END,this.guankaFunc,this),this.guankaPickBtn.on(cc.Node.EventType.TOUCH_END,this.pickguankaFunc,this),this.exitBtn.on(cc.Node.EventType.TOUCH_END,this.exitBtnAction,this),this.checkInBtn.on(cc.Node.EventType.TOUCH_END,this.checkInAction,this),this.wx&&this.wx.login({success:function(t){t.code?s.default.INST.getWxUserData(t.code):console.warn("wx login fail")}})},start:function(){var t=this;this.upDatethis(),this.exportAds.active=!1,this.checkInBtn.active=!1,this.skinBtn.active=!1,this.scheduleOnce(function(){if(t.exitBtn.active=s.default.INST.isShowExitBtnInHomePage(),t.checkInBtn.active=s.default.INST.isShowCheckInBtnInHomePage(),t.skinBtn.active=s.default.INST.isShowSkinBtnInHomePage(),t.exportAds.active=!1,t.staticAds.active=!1,t.wx){var e=t.wx.getLaunchOptionsSync().query.channel;t.staticAds.active=s.default.INST.isShowStaticAdInHomePage(e),t.exportAds.active=!t.staticAds.active}},1)},onEnable:function(){var t=this;this.wx&&this.wx.aldShowEvent(a.HOME_PAGE),this.scheduleOnce(function(){t.schedule(function(){c.default.showWxBannerInHomePage()},s.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},1),this.coinNum.string=String(GameControl.newPlayer.coinNumber)},onDisable:function(){r.default.hideBannerAd(),this.unscheduleAllCallbacks()},upDatethis:function(){this.gunakaBtnLa.string=u.t("home.level")+GameControl.newPlayer.m_currOpenGuan,this.guankanum.string=GameControl.newPlayer.m_iCompleteGuanNum+"/"+GameControl.config.guankaMaxNum,this.starnum.string=GameControl.newPlayer.getAllStarNum()+"/"+GameControl.config.starMaxNum,this.coinNum.string=GameControl.newPlayer.coinNumber},shezhiFunc:function(){l.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.SETTING_BTN,a.HOME_PAGE),this.node.active=!1,this.settingUi.active=!0},tiaozhanFunc:function(){this.wx&&this.wx.aldClickEvent(a.CHALLENGE_BTN,a.HOME_PAGE),this.node.active=!1,o.default.instance.showChallengeView(),l.default.instance.playBtn()},guankaFunc:function(){this.wx&&this.wx.aldClickEvent(a.START_BTN,a.HOME_PAGE),this.node.active=!1,GameControl.GameObject.YouxiUi.active=!0,GameControl.youxiUi.updatethis(GameControl.newPlayer.m_currOpenGuan),l.default.instance.playBtn()},pickguankaFunc:function(){this.node.active=!1,this.pickzhangjieUi.active=!0,GameControl.pickzhangUi.updatethis(),l.default.instance.playBtn()},exitBtnAction:function(){l.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.EXIT_BTN,a.HOME_PAGE),this.node.active=!1},skinAction:function(){l.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.SKIN_BTN,a.HOME_PAGE),this.node.active=!1,o.default.instance.showSkinAndCoinView()},gameCenterAction:function(){l.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.GAME_CENTER_BTN,a.HOME_PAGE)},checkInAction:function(){l.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.CHECKIN_BTN,a.HOME_PAGE),GameControl.GameObject.checkInUi.active=!0},videoDoubleAction:function(){var t=this;l.default.instance.playBtn(),h.showRewardAd({onReward:function(){o.default.instance.showGameCenter(),t.guankaFunc(),t.scheduleOnce(function(){i.default.instance.addRate(2)},1)}})}}),cc._RF.pop()},{"./MusicMgr":"MusicMgr","./TgaPlatform":"TgaPlatform","./ViewMgr":"ViewMgr","./ad/AdPartAManager":"AdPartAManager","./mission/MissionMgr":"MissionMgr","./utils/Common/GameUtil":"GameUtil","./utils/Platform":"Platform",LanguageData:"LanguageData"}],ZhuyeUi:[function(t,e,n){"use strict";cc._RF.push(e,"04fa0LtVJNGXpdfsZ1H1GLN","ZhuyeUi");var i=l(t("./mission/MissionMgr")),o=l(t("./ViewMgr")),a=t("./ad/AdPartAManager"),s=l(a),r=l(t("./utils/Platform")),c=l(t("./MusicMgr"));function l(t){return t&&t.__esModule?t:{default:t}}var d=t("LanguageData"),u=t("./TgaPlatform");cc.Class({extends:cc.Component,properties:{tiaozhanBtn:cc.Node,guankaBtn:cc.Node,guankaPickBtn:cc.Node,gunakaBtnLa:cc.Label,shezhiBtn:cc.Node,checkInBtn:cc.Node,guankanum:cc.Label,starnum:cc.Label,coinNum:cc.Label,skinBtn:cc.Node,pickzhangjieUi:cc.Node,settingUi:cc.Node,exitBtn:cc.Node,exportAds:cc.Node,rope:cc.Node,starProg:cc.ProgressBar,missionProg:cc.ProgressBar},ctor:function(){this.wx=window.wx},onLoad:function(){var t=this;GameControl.zhuye=this,this.shezhiBtn.on(cc.Node.EventType.TOUCH_END,this.shezhiFunc,this),this.tiaozhanBtn.on(cc.Node.EventType.TOUCH_END,this.tiaozhanFunc,this),this.guankaBtn.on(cc.Node.EventType.TOUCH_END,this.guankaFunc,this),this.guankaPickBtn.on(cc.Node.EventType.TOUCH_END,this.pickguankaFunc,this),this.exitBtn.on(cc.Node.EventType.TOUCH_END,this.exitBtnAction,this),this.checkInBtn.on(cc.Node.EventType.TOUCH_END,this.checkInAction,this),this.wx&&this.wx.login({success:function(t){t.code?s.default.INST.getWxUserData(t.code):console.warn("wx login fail")}}),this.node.on("dataChange",function(){t.coinNum.string=GameControl.newPlayer.coinNumber})},start:function(){var t=this;this.upDatethis(),this.exportAds.active=!1,this.checkInBtn.active=!1,this.skinBtn.active=!1,this.scheduleOnce(function(){t.exitBtn.active=s.default.INST.isShowExitBtnInHomePage(),t.checkInBtn.active=s.default.INST.isShowCheckInBtnInHomePage(),t.skinBtn.active=s.default.INST.isShowSkinBtnInHomePage(),s.default.INST.isShowExportInHomePage()&&(t.exportAds.active=!0)},1)},update:function(t){this.curMissionNum>=this.userMissionNum&&this.curStarNum>=this.userStarNum||(this.timer+=t,this.timer>=.005&&(this.curMissionNum=this.curMissionNum>=this.userMissionNum?this.userMissionNum:this.curMissionNum+1,this.guankanum.string=this.curMissionNum+"/"+this.maxMissionNum,this.curStarNum=this.curStarNum>=this.userStarNum?this.userStarNum:this.curStarNum+1,this.starnum.string=this.curStarNum+"/"+this.maxStarNum,this.timer=0),this.a=this.curMissionNum/this.maxMissionNum*this.lerp,this.b=this.missionProg.progress*(1-this.lerp),this.missionProg.progress=this.a+this.b,this.a=this.curStarNum/this.maxStarNum*this.lerp,this.b=this.starProg.progress*(1-this.lerp),this.starProg.progress=this.a+this.b)},onEnable:function(){var t=this;this.wx&&this.wx.aldShowEvent(a.HOME_PAGE),this.scheduleOnce(function(){s.default.INST.isShowBannerInHomePage()&&t.schedule(function(){r.default.showBannerAd()},s.default.INST.getRefreshBannerTime(),cc.macro.REPEAT_FOREVER,.1)},1),this.coinNum.string=String(GameControl.newPlayer.coinNumber),this.rope.stopAllActions(),this.rope.rotation=0,this.tiaozhanBtn.stopAllActions(),this.guankaBtn.stopAllActions(),this.guankaBtn.scale=1,this.rope.runAction(cc.sequence(cc.rotateTo(1,15),cc.rotateTo(1,0),cc.rotateTo(1,-15),cc.rotateTo(1,0)).repeatForever()),this.userMissionNum=GameControl.newPlayer.m_iCompleteGuanNum,this.maxMissionNum=GameControl.config.guankaMaxNum,this.userStarNum=GameControl.newPlayer.getAllStarNum(),this.maxStarNum=GameControl.config.starMaxNum,this.lerp=.5,this.timer=0,this.curMissionNum=0,this.curStarNum=0,this.guankanum.string=this.curMissionNum+"/"+this.maxMissionNum,this.starnum.string=this.curStarNum+"/"+this.maxStarNum,this.a=0,this.b=0,this.missionProg.progress=0,this.starProg.progress=0},onDisable:function(){r.default.hideBannerAd(),this.unscheduleAllCallbacks()},upDatethis:function(){this.gunakaBtnLa.string=d.t("home.level")+GameControl.newPlayer.m_currOpenGuan,this.coinNum.string=GameControl.newPlayer.coinNumber},shezhiFunc:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.SETTING_BTN,a.HOME_PAGE),this.node.active=!1,this.settingUi.active=!0},tiaozhanFunc:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.CHALLENGE_BTN,a.HOME_PAGE),this.node.active=!1,o.default.instance.showChallengeView()},guankaFunc:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.START_BTN,a.HOME_PAGE),this.node.active=!1,GameControl.GameObject.YouxiUi.active=!0,GameControl.youxiUi.updatethis(GameControl.newPlayer.m_currOpenGuan)},pickguankaFunc:function(){c.default.instance.playBtn(),this.node.active=!1,this.pickzhangjieUi.active=!0,GameControl.pickzhangUi.updatethis()},exitBtnAction:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.EXIT_BTN,a.HOME_PAGE),this.node.active=!1},skinAction:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.SKIN_BTN,a.HOME_PAGE),o.default.instance.showSkinAndCoinView()},gameCenterAction:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.GAME_CENTER_BTN,a.HOME_PAGE),this.node.active=!1},checkInAction:function(){c.default.instance.playBtn(),this.wx&&this.wx.aldClickEvent(a.CHECKIN_BTN,a.HOME_PAGE),GameControl.GameObject.checkInUi.active=!0},videoDoubleAction:function(){var t=this;c.default.instance.playBtn(),u.showRewardAd({onReward:function(){t.guankaFunc(),t.scheduleOnce(function(){i.default.instance.addRate(2)},1)}})}}),cc._RF.pop()},{"./MusicMgr":"MusicMgr","./TgaPlatform":"TgaPlatform","./ViewMgr":"ViewMgr","./ad/AdPartAManager":"AdPartAManager","./mission/MissionMgr":"MissionMgr","./utils/Platform":"Platform",LanguageData:"LanguageData"}],"ald-game":[function(t,e,n){"use strict";cc._RF.push(e,"83895HfFbNDfIMHtVAVI/KM","ald-game");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={app_key:"5199993a33a939e37d0cc6910286ce18",getLocation:!1};"undefined"!=typeof wx&&"undefined"==typeof swan&&"undefined"==typeof tt&&function(){function t(t){function e(t){return Object.prototype.toString.call(t)}var n={};return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t,e){n["[object "+t+"]"]=t.toLowerCase()}),null==t?t:"object"==(void 0===t?"undefined":i(t))||"function"==typeof t?n[e.call(t)]||"object":void 0===t?"undefined":i(t)}function e(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()+t()+t()+t()+t()}function n(t,e){y++,t.as=A,t.at=w,t.rq_c=y,t.ifo=u,t.ak=d.app_key,t.uu=h,t.v=c,t.st=Date.now(),t.ev=e,t.wsr=v,""!==a(t.ufo)&&(t.ufo=t.ufo),t.ec=g,wx.Queue.push(function(){return new Promise(function(e,n){wx.request({url:"https://"+l+".aldwx.com/d.html",data:t,header:{se:m||"",op:f||"",img:M||""},method:"GET",fail:function(){e("")},success:function(t){e(200==t.statusCode?"":"status error")}})})})}function a(t){if(void 0===t||""===t)return"";var e={};for(var n in t)"rawData"!=n&&"errMsg"!=n&&(e[n]=t[n]);return e}function s(t){var e={};for(var n in t)e[n]=t[n];return e}function r(t){for(var e="",n=0;n<t.length;n++)t[n].length>e.length&&(e=t[n]);return e}var c="2.0.0",l="glog",d=o;""===d.app_key&&console.error("\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684app_key"),d.app_key=d.app_key.replace(/\s/g,""),wx.request({url:"https://"+l+".aldwx.com/config/app.json",method:"GET",success:function(t){200===t.statusCode&&(t.data.version!=c&&console.warn("\u60a8\u7684SDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),t.data.warn&&console.warn(t.data.warn),t.data.error&&console.error(t.data.error))}});var u="",h=function(){var t="";try{t=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(e){t="uuid_getstoragesync"}if(t)u=!1;else{t=e(),u=!0;try{wx.setStorageSync("aldstat_uuid",t)}catch(t){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return t}(),p={},m="",f="",g=0,y="",v=wx.getLaunchOptionsSync(),_=Date.now(),w=""+Date.now()+Math.floor(1e7*Math.random()),A=""+Date.now()+Math.floor(1e7*Math.random()),C=0,S="",M="",P=!0,b=!1,x=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid","aldLevelEvent","aldShowEvent","aldClickEvent","aldNaviEvent"],T=["payStart","paySuccess","payFail","die","revive","tools","award"],I=["complete","fail"];void 0===wx.Queue&&(wx.Queue=new function(){this.concurrency=4,this.queue=[],this.tasks=[],this.activeCount=0;var t=this;this.push=function(e){this.tasks.push(new Promise(function(n,i){var o=function(){t.activeCount++,e().then(function(t){n(t)}).then(function(){t.next()})};t.activeCount<t.concurrency?o():t.queue.push(o)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){t.activeCount--,t.queue.length>0&&t.queue.shift()()}},wx.Queue.all()),Promise.all([new Promise(function(t,e){wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){M=r(e.userInfo.avatarUrl.split("/")),t(e)},fail:function(){t("")}}):t("")},fail:function(){t("")}})}),new Promise(function(t,e){wx.getNetworkType({success:function(e){t(e)},fail:function(){t("")}})}),new Promise(function(t,e){d.getLocation?wx.getLocation({success:function(e){t(e)},fail:function(){t("")}}):wx.getSetting({success:function(e){e.authSetting["scope.userLocation"]?(wx.getLocation({success:function(e){t(e)},fail:function(){t("")}}),t("")):t("")},fail:function(){t("")}})})]).then(function(t){""!==t[2]?(p.lat=t[2].latitude||"",p.lng=t[2].longitude||"",p.spd=t[2].speed||""):(p.lat="",p.lng="",p.spd=""),""!==t[1]?p.nt=t[1].networkType||"":p.nt="";var e=s(p);""!==t[0]&&(e.ufo=t[0],S=t[0]),n(e,"init")}),wx.onShow(function(t){if(v=t,C=Date.now(),!P&&!b){w=""+Date.now()+Math.floor(1e7*Math.random()),u=!1;try{wx.setStorageSync("ald_ifo",!1)}catch(t){}}P=!1,b=!1;var e=s(p),i=s(p);e.sm=C-_,t.query.ald_share_src&&t.shareTicket&&"1044"===t.scene?(i.tp="ald_share_click",new Promise(function(t,e){"1044"==v.scene?wx.getShareInfo({shareTicket:v.shareTicket,success:function(e){t(e)},fail:function(){t("")}}):t("")}).then(function(t){i.ct=t,n(i,"event")})):t.query.ald_share_src&&(i.tp="ald_share_click",i.ct="1",n(i,"event")),n(e,"show")}),wx.onHide(function(){var t=s(p);t.dr=Date.now()-C,""===S?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){t.ufo=e,S=e,M=r(e.userInfo.avatarUrl.split("/")),n(t,"hide")}}):n(t,"hide")}}):n(t,"hide")}),wx.onError(function(t){var e=s(p);e.tp="ald_error_message",e.ct=t,g++,n(e,"event")});var N={aldShowEvent:function(t){""!==t&&"string"==typeof t&&t.length<=255?N[x[0]]("\u5bfc\u51fa",{"\u66dd\u5149":t}):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldClickEvent:function(t,e){""!==t&&"string"==typeof t&&t.length<=255?(N[x[0]]("\u6309\u94ae\u70b9\u51fb",{"\u70b9\u51fb":t}),N[x[0]]("\u6309\u94ae\u70b9\u51fb",{"\u6765\u6e90":e})):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldNaviEvent:function(t,e){""!==t&&"string"==typeof t&&t.length<=255?(N[x[0]]("\u5bfc\u51fa",{"\u6765\u6e90":t}),N[x[0]]("\u5bfc\u51fa",{"\u5141\u8bb8\u70b9\u51fb":e})):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldSendEvent:function(t,e){var o=s(p);""!==t&&"string"==typeof t&&t.length<=255?(o.tp=t,"string"==typeof e&&e.length<=255?(o.ct=String(e),n(o,"event")):"object"==(void 0===e?"undefined":i(e))?(JSON.stringify(e).length>=255&&console.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26"),o.ct=JSON.stringify(e),n(o,"event")):void 0===e||""===e?n(o,"event"):console.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldOnShareAppMessage:function(e){wx.onShareAppMessage(function(){b=!0;var i=e(),o="";o=void 0!==v.query.ald_share_src?void 0!==i.query?(v.query.ald_share_src.indexOf(h),i.query+"&ald_share_src="+v.query.ald_share_src+","+h):(v.query.ald_share_src.indexOf(h),"ald_share_src="+v.query.ald_share_src+","+h):void 0!==i.query?i.query+"&ald_share_src="+h:"ald_share_src="+h,"undefined"!=t(i.ald_desc)&&(o+="&ald_desc="+i.ald_desc),i.query=o;var a=s(p);return a.ct=i,a.ct.sho=1,a.tp="ald_share_chain",n(a,"event"),i})},aldShareAppMessage:function(e){b=!0;var i=e,o="";o=void 0!==v.query.ald_share_src?void 0!==i.query?(v.query.ald_share_src.indexOf(h),i.query+"&ald_share_src="+v.query.ald_share_src+","+h):(v.query.ald_share_src.indexOf(h),"ald_share_src="+v.query.ald_share_src+","+h):void 0!==i.query?i.query+"&ald_share_src="+h:"ald_share_src="+h;var a=s(p);"undefined"!=t(i.ald_desc)&&(o+="&ald_desc="+i.ald_desc),i.query=o,a.ct=i,a.tp="ald_share_chain",n(a,"event"),wx.shareAppMessage(i)},aldSendSession:function(t){if(""!==t&&t){var e=s(p);e.tp="session",e.ct="session",m=t,""===S?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,n(e,"event")}}):n(e,"event")}}):(e.ufo=S,""!==S&&(e.gid=""),n(e,"event"))}else console.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},aldSendOpenid:function(t){if(""!==t&&t){f=t;var e=s(p);e.tp="openid",e.ct="openid",n(e,"event")}else console.error("openID\u4e0d\u80fd\u4e3a\u7a7a")}};wx.aldStage=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.stageId)||e.stageId.length>32?(console.warn("\u5173\u5361stageId\u5fc5\u987b\u7b26\u5408\u4f20\u53c2\u89c4\u5219,\u8bf7\u53c2\u8003\u6587\u6863\u3002"),!1):!("string"!==t(e.stageName)||e.stageName.length>32)||(console.warn("\u5173\u5361\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5,\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26,\u8bf7\u53c2\u8003\u6587\u6863"),!1)}var i="",o="",a=0;this.onStart=function(n){if(e(n)){var s={};a=Date.now(),s.sid=n.stageId,s.snm=n.stageName,s.state="start",o=""+Date.now()+Math.floor(1e7*Math.random()),i=s,("string"===t(n.userId)&&n.userId)<32&&(this.uid=n.uid),this.request()}},this.onRunning=function(n){if(e(n)){var o={params:{}};if(("string"===t(n.userId)&&n.userId)<32&&(this.uid=n.uid),!t(n.event)&&-1!=T.join(",").indexOf(n.event+","))return void T.join(",");if(o.event=n.event,"object"===t(n.params)){if("string"!==t(n.params.itemName)||n.params.itemName.length>32)return void console.warn("\u9053\u5177/\u5546\u54c1\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863");o.params.itnm=n.params.itemName,"string"===t(n.params.itemId)&&n.params.itemId.length<32&&(o.params.itid=n.params.itemId),"number"===t(n.params.itemCount)&&n.params.itemCount.length<32?o.params.itco=n.params.itemCount:o.params.itco=1,-1!==n.event.indexOf("pay")&&("number"===t(n.params.itemMoney)&&n.params.itemMoney.length<32?o.params.money=n.params.itemMoney:o.params.money=0),"string"===t(n.params.desc)&&n.params.desc.length<64&&(o.params.desc=n.params.desc),o.state="running",o.sid=n.stageId,o.snm=n.stageName,i=o,this.request()}}},this.onEnd=function(n){if(e(n)){var o={state:"end"};if(("string"===t(n.userId)&&n.userId)<32&&(this.uid=n.uid),!t(n.event)&&-1!==I.join(",").indexOf(n.event+","))return void I.join(",");o.sid=n.stageId,o.snm=n.stageName,o.event=n.event,o.sdr=0!==a?Date.now()-a:"",o.params={},"object"===t(n.params)&&"string"===t(n.params.desc)&&n.params.desc.length<64&&(o.params.desc=n.params.desc),i=o,this.request()}},this.request=function(){var t=s(p);i.ss=o,t.ct=i,n(t,"screen")}};for(var R=0;R<x.length;R++)!function(t,e){Object.defineProperty(wx,t,{value:e,writable:!1,enumerable:!0,configurable:!0})}(x[R],N[x[R]]);try{var L=wx.getSystemInfoSync();p.br=L.brand||"",p.md=L.model,p.pr=L.pixelRatio,p.sw=L.screenWidth,p.sh=L.screenHeight,p.ww=L.windowWidth,p.wh=L.windowHeight,p.lang=L.language,p.wv=L.version,p.sv=L.system,p.wvv=L.platform,p.fs=L.fontSizeSetting,p.wsdk=L.SDKVersion,p.bh=L.benchmarkLevel||"",p.bt=L.battery||"",p.wf=L.wifiSignal||"",p.lng="",p.lat="",p.nt="",p.spd="",p.ufo=""}catch(t){}}(),cc._RF.pop()},{}],decode:[function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}cc._RF.push(e,"91de2W6I51BLKyU16Qpy5X7","decode"),e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var r=1e3;o&&"number"==typeof o.maxKeys&&(r=o.maxKeys);var c=t.length;r>0&&c>r&&(c=r);for(var l=0;l<c;++l){var d,u,h,p,m=t[l].replace(s,"%20"),f=m.indexOf(n);f>=0?(d=m.substr(0,f),u=m.substr(f+1)):(d=m,u=""),h=decodeURIComponent(d),p=decodeURIComponent(u),i(a,h)?Array.isArray(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a},cc._RF.pop()},{}],encode:[function(t,e,n){"use strict";cc._RF.push(e,"43088sSD31K566zcC6lPxbQ","encode");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t){switch(void 0===t?"undefined":i(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===(void 0===t?"undefined":i(t))?Object.keys(t).map(function(i){var a=encodeURIComponent(o(i))+n;return Array.isArray(t[i])?t[i].map(function(t){return a+encodeURIComponent(o(t))}).join(e):a+encodeURIComponent(o(t[i]))}).filter(Boolean).join(e):a?encodeURIComponent(o(a))+n+encodeURIComponent(o(t)):""},cc._RF.pop()},{}],en:[function(t,e,n){"use strict";cc._RF.push(e,"8239am7r+NB2Y9msKDUN2B7","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={home:{star:"Star:",level:"Level:"},checkIn:{thx:"No, Thanks"},game:{doubble:"Double Claim",finishTip:"You\u2019ve completed the chapter ",reward:"Obtain",tip:"raw a safe path",tip1:"Keep clicking screen",tip2:"         for the life saving",levelNum:"Level %{level}"},skin:{frequentTip:"Free coins can only be obtained every two minutes."},level:{c:"Level Selection",currentLevel:"current",c1:"Chapter 1",c2:"Chapter 2",c3:"Chapter 3",c4:"Chapter 4",c5:"Chapter 5",c6:"Chapter 6",c7:"Chapter 7",c8:"Chapter 8",c9:"Chapter 9",c10:"Chapter 10",c11:"Chapter 11",c12:"Chapter 12",c13:"Chapter 13",c14:"Chapter 14",c15:"Chapter 15"},gameover:{startTip:"Watch ads to Level up with 3 stars?"}},cc._RF.pop()},{}],index:[function(t,e,n){"use strict";cc._RF.push(e,"3a388sQdMtOz7/mjOzeUtdi","index"),n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode"),cc._RF.pop()},{"./decode":"decode","./encode":"encode"}],"polyglot.min":[function(t,e,n){"use strict";cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t,o){"function"==typeof define&&define.amd?define([],function(){return o(t)}):"object"==(void 0===n?"undefined":i(n))?e.exports=o(t):t.Polyglot=o(t)})(void 0,function(t){function e(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||l}function n(t){var e,n,i,o={};for(e in t)if(t.hasOwnProperty(e))for(i in n=t[e])o[n[i]]=e;return o}function o(t){return t.replace(/^\s+|\s+$/g,"")}function a(t,e,n){var i,a;return null!=n&&t?i=o((a=t.split(u))[r(e,n)]||a[0]):i=t,i}function s(t){var e=n(p);return e[t]||e.en}function r(t,e){return h[s(t)](e)}function c(t,e){for(var n in e)"_"!==n&&e.hasOwnProperty(n)&&(t=t.replace(new RegExp("%\\{"+n+"\\}","g"),e[n]));return t}function l(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}function d(t){var e={};for(var n in t)e[n]=t[n];return e}e.VERSION="0.4.3",e.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},e.prototype.extend=function(t,e){var n;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],e&&(o=e+"."+o),"object"==(void 0===n?"undefined":i(n))?this.extend(n,o):this.phrases[o]=n)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(t){this.clear(),this.extend(t)},e.prototype.t=function(t,e){var n,i;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),i=t),"string"==typeof n&&(e=d(e),i=c(i=a(n,this.currentLocale,e.smart_count),e)),i},e.prototype.has=function(t){return t in this.phrases};var u="||||",h={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},p={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e}),cc._RF.pop()},{}],testCirle:[function(t,e,n){"use strict";cc._RF.push(e,"a3ab2cuH29CLZ5+1b3v2BPR","testCirle"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(){return cc.Vec2,cc.Vec2,cc.Node,function(t,e,n){this.worldPos=t,this.normal=e,this.column=n}}(),r=function(){return cc.Node,cc.Vec2,cc.Vec2,cc.Vec2,cc.Float,function(t,e){this.column=t,this.columnWorldPos=this.column.parent.convertToWorldSpaceAR(this.column.position),this.startWorldPos=e,this.preTangentWorldPos=this.startWorldPos,this.rad=0}}(),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PointArea=null,e.ropeEnd=null,e.ci=null,e.dis=null,e.lineWidth=0,e.mouseWorldPos=new cc.Vec2(0,0),e.points=[],e.columns=[],e.ctx=null,e.newTangentP=new cc.Vec2(0,1),e.c0=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.ctx=this.getComponent(cc.Graphics),this.PointArea.on("touchstart",this.touchstart,this),this.PointArea.on("touchmove",this.touchmove,this),this.PointArea.on("touchend",this.touchup,this),this.PointArea.on("touchcancel",this.touchup,this),cc.director.getPhysicsManager().enabled=!0,this.points.push(new s(this.node.parent.convertToWorldSpaceAR(this.node.position),new cc.Vec2(0,0),this.node)),this.columns.push(new r(this.node,this.node.parent.convertToWorldSpaceAR(this.node.position))),this.flag=!1},e.prototype.touchstart=function(t){this.flag=!0,this.mouseWorldPos=t.getLocation().add(new cc.Vec2(0,30))},e.prototype.touchmove=function(t){this.mouseWorldPos=t.getLocation().add(new cc.Vec2(0,30))},e.prototype.touchup=function(t){this.flag=!0},e.prototype.start=function(){},e.prototype.update=function(t){if(this.ctx.clear(),this.ctx.strokeColor=cc.Color.BLUE,this.ctx.LineJoin=cc.Graphics.LineJoin.ROUND,this.ctx.lineCap=cc.Graphics.LineCap.ROUND,this.flag?this.ropeEnd.getComponent(cc.RigidBody).linearVelocity=this.mouseWorldPos.sub(this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position)).mul(30):this.ropeEnd.convertToNodeSpaceAR(this.columns[this.columns.length-1].preTangentWorldPos).mag()<10?this.ropeEnd.getComponent(cc.RigidBody).linearVelocity=this.ropeEnd.convertToNodeSpaceAR(this.columns[this.columns.length-1].preTangentWorldPos).mul(30):this.ropeEnd.getComponent(cc.RigidBody).linearVelocity=this.ropeEnd.convertToNodeSpaceAR(this.columns[this.columns.length-1].preTangentWorldPos).normalize().mul(1e3),this.columns.length>1){this.CalcQieDian(this.columns[this.columns.length-1].columnWorldPos,this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position),this.columns[this.columns.length-1].column.width/2,this.columns[this.columns.length-1].preTangentWorldPos);var e=cc.director.getPhysicsManager().rayCast(this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position),this.columns[this.columns.length-1].preTangentWorldPos,cc.RayCastType.Closest)}else e=cc.director.getPhysicsManager().rayCast(this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position),this.columns[this.columns.length-1].startWorldPos,cc.RayCastType.Closest);if(this.c0="asd",e.length>=1){this.c0=e[0].collider.node.name;var n=e[0].collider.node;if(n!=this.columns[this.columns.length-1].column){var i=this.CalcQieDian(n.convertToWorldSpaceAR(cc.v2(0,0)),this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position),n.width/2,e[0].point),o=new r(n,i);this.columns.push(o)}else this.newTangentP=this.CalcQieDian(this.columns[this.columns.length-1].columnWorldPos,this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position),this.columns[this.columns.length-1].column.width/2,this.columns[this.columns.length-1].preTangentWorldPos),this.ctx.strokeColor=cc.Color.RED,this.ctx.circle(this.node.convertToNodeSpaceAR(this.newTangentP).x,this.node.convertToNodeSpaceAR(this.newTangentP).y,10),this.ctx.stroke(),this.ctx.strokeColor=cc.Color.BLUE,this.columns[this.columns.length-1].rad*(this.columns[this.columns.length-1].rad+this.radTwoPOnR(this.columns[this.columns.length-1].preTangentWorldPos,this.newTangentP,this.columns[this.columns.length-1].columnWorldPos))<0?(console.log("!!!!!pop"),this.columns.pop()):(this.columns[this.columns.length-1].rad+=this.radTwoPOnR(this.columns[this.columns.length-1].preTangentWorldPos,this.newTangentP,this.columns[this.columns.length-1].columnWorldPos),this.columns[this.columns.length-1].preTangentWorldPos=this.newTangentP)}else this.columns.length>1&&(this.newTangentP=this.CalcQieDian(this.columns[this.columns.length-1].columnWorldPos,this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position),this.columns[this.columns.length-1].column.width/2,this.columns[this.columns.length-1].preTangentWorldPos),this.ctx.strokeColor=cc.Color.RED,this.ctx.circle(this.node.convertToNodeSpaceAR(this.newTangentP).x,this.node.convertToNodeSpaceAR(this.newTangentP).y,10),this.ctx.stroke(),this.ctx.strokeColor=cc.Color.BLUE,this.columns[this.columns.length-1].rad*(this.columns[this.columns.length-1].rad+this.radTwoPOnR(this.columns[this.columns.length-1].preTangentWorldPos,this.newTangentP,this.columns[this.columns.length-1].columnWorldPos))<0?(console.log("!!!!!pop"),this.columns.pop()):(this.columns[this.columns.length-1].rad+=this.radTwoPOnR(this.columns[this.columns.length-1].preTangentWorldPos,this.newTangentP,this.columns[this.columns.length-1].columnWorldPos),this.columns[this.columns.length-1].preTangentWorldPos=this.newTangentP));this.ctx.lineWidth=this.lineWidth,this.ctx.moveTo(this.node.convertToNodeSpaceAR(this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position)).x,this.node.convertToNodeSpaceAR(this.ropeEnd.parent.convertToWorldSpaceAR(this.ropeEnd.position)).y);for(var a=this.columns.length-1;a>0;a--){if(1!=this.columns.length)var s=this.columns[a].preTangentWorldPos.sub(this.columns[a].columnWorldPos).normalize();var c=this.node.convertToNodeSpaceAR(this.columns[a].preTangentWorldPos.add(s.mul(this.lineWidth/2)));if(this.ctx.lineTo(c.x,c.y),this.columns[a].rad>=2*Math.PI)this.ctx.circle(this.node.convertToNodeSpaceAR(this.columns[a].columnWorldPos).x,this.node.convertToNodeSpaceAR(this.columns[a].columnWorldPos).y,this.columns[a].column.width/2+this.lineWidth/2),this.ctx.moveTo(this.node.convertToNodeSpaceAR(this.columns[a].preTangentWorldPos).x,this.node.convertToNodeSpaceAR(this.columns[a].preTangentWorldPos).y);else{var l=this.radOnePointOnCircle(this.columns[a].startWorldPos,this.columns[a].columnWorldPos);this.ctx.arc(this.node.convertToNodeSpaceAR(this.columns[a].columnWorldPos).x,this.node.convertToNodeSpaceAR(this.columns[a].columnWorldPos).y,this.columns[a].column.width/2+this.lineWidth/2,l,l+this.columns[a].rad,this.columns[a].rad>0)}var d=this.columns[a].startWorldPos.sub(this.columns[a].columnWorldPos).normalize(),u=this.node.convertToNodeSpaceAR(this.columns[a].startWorldPos.add(d.mul(this.lineWidth/2)));this.ctx.moveTo(u.x,u.y)}this.ctx.lineTo(0,0),this.ctx.stroke()},e.prototype.CalcQieDian=function(t,e,n,i){void 0===i&&(i=new cc.Vec2(0,0));var o=new cc.Vec2(0,0),a=new cc.Vec2(0,0),s=(new cc.Vec2(0,0),new cc.Vec2(0,0),n/(o=e.sub(t)).mag());if(a=o.mul(s),this.radTwoPOnR(e,i,t)<0)var r=-Math.acos(s);else r=Math.acos(s);return a.rotate(r).add(t)},e.prototype.radTwoPOnR=function(t,e,n){var i=t.sub(n),o=e.sub(n);return i.signAngle(o)},e.prototype.radOnePointOnCircle=function(t,e){var n=t.sub(e);return new cc.Vec2(1,0).signAngle(n)},__decorate([a(cc.Node)],e.prototype,"PointArea",void 0),__decorate([a(cc.Node)],e.prototype,"ropeEnd",void 0),__decorate([a(cc.Node)],e.prototype,"ci",void 0),__decorate([a(cc.Label)],e.prototype,"dis",void 0),__decorate([a(cc.Float)],e.prototype,"lineWidth",void 0),e=__decorate([o],e)}(cc.Component);n.default=c,cc._RF.pop()},{}],testgraphics:[function(t,e,n){"use strict";cc._RF.push(e,"5a424bS8RNCf46dQGPQl/B/","testgraphics"),cc.Class({extends:cc.Component,properties:{posnode:[cc.Node]},start:function(){this.ctx=this.getComponent(cc.Graphics),this.ctx.strokeColor=cc.Color.BLUE,this.ctx.moveTo(this.node.position);for(var t=0;t<3;t++)this.ctx.lineTo(this.posnode[t].position);this.ctx.stroke()}}),cc._RF.pop()},{}],test:[function(t,e,n){"use strict";cc._RF.push(e,"d9b9cYCLWVFg5TKYTL3B1Ti","test"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){console.log(111)},e.prototype.onDisable=function(){console.log(22222)},__decorate([a(cc.Label)],e.prototype,"label",void 0),__decorate([a],e.prototype,"text",void 0),e=__decorate([o],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],zh:[function(t,e,n){"use strict";cc._RF.push(e,"3b168UaXzdLz7YmY80GnH8T","zh"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zh={home:{star:"\u661f\u661f\uff1a",level:"\u5173\u5361\uff1a"},checkIn:{thx:"\u4e0d\u4e86\uff0c\u8c22\u8c22"},game:{doubble:"\u89c6\u9891\u53cc\u500d",finishTip:"\u4f60\u5b8c\u6210\u4e86\u7ae0\u8282",reward:"\u83b7\u5f97",tip:"\u8fde\u63a5\u7ef3\u5b50\u5230\u8fd9\u4e2a\u70b9",tip1:"\u4fdd\u6301\u89e6\u78b0",tip2:"\u5728\u4efb\u4f55\u754c\u9762\u6551\u51fa\u4eba\u7269",levelNum:"\u7b2c%{level}\u5173"},skin:{frequentTip:"\u5bf9\u4e0d\u8d77\uff0c\u6bcf\u4e24\u5206\u949f\u624d\u80fd\u514d\u8d39\u83b7\u53d6\u4e00\u6b21\u91d1\u5e01\u3002"},level:{c:"\u7ae0\u8282",currentLevel:"\u5f53\u524d\u7ae0\u8282",c1:"\u7ae0\u82821",c2:"\u7ae0\u82822",c3:"\u7ae0\u82823",c4:"\u7ae0\u82824",c5:"\u7ae0\u82825",c6:"\u7ae0\u82826",c7:"\u7ae0\u82827",c8:"\u7ae0\u82828",c9:"\u7ae0\u82829",c10:"\u7ae0\u828210",c11:"\u7ae0\u828211",c12:"\u7ae0\u828212",c13:"\u7ae0\u828213",c14:"\u7ae0\u828214",c15:"\u7ae0\u828215"},gameover:{startTip:"\u4f60\u5728\u672c\u5173\u53ea\u83b7\u5f97\u4e862\u9897\u661f\uff0c\u662f\u5426\u89c2\u770b\u89c6\u9891\u8fbe\u52303\u661f\u901a\u8fc7\uff1f"}},cc._RF.pop()},{}]},{},["en","zh","AnimatedSprite","ChallengeUi","ChapterUi","CoinRewardUi","DrawerUi","FullDrag","FullStarUi","Game","GameLogic","GameLogic3","Gamecontrol","LevelItem","LoadScene","LoseUi","MusicMgr","PersonGame","PersonZhuye","PickguanUi","PickzhangUi","Player","SettingUi","StopUi","Testscript","Texiao","TgaPlatform","ViewMgr","WinUi","YouxiUi","ZhangItem","ZhuyeUi","ZhuyeUi2","AdItem","AdNode","AdPartAList","AdPartAManager","AdPartAScrollView","AdScrollView","GameCenter","MaiLiangUtil","ald-game","SkinData","MoveTo","Xuanzhuan","Zhuanlun","test","HardMissMgr","MissionMgr","TimeMissionMgr","Blood","Bullet","DragNode","EndPoint","Finger1","Finger2","GuideArrow","Gun","Human","JumpHuman","Laser","Mine","Move1","Rotate","StandHuman","StartPoint","SkinItem","SkinList","testCirle","testgraphics","CheckInItem","CheckInUI","DengDaiUI","GameBg","HardLoseUI","HardModeGameUI","HardWinUI","SkinAndCoinUI","SkinTrialUI","TimeLoseUi","TimeModeGameUI","TimeWinUI","CocosUtil","CommonUtil","GameUtil","HttpUtils","MathUtil","Platform","IPlatform","WebPlatform","WechatPlatform","WxBannerAds","SpriteUtil","Sys","decode","encode","index","VStuntCRecorder","ITracker","Tracker","AldTracker","EwanH5Tracker","PrivateTracker","UUIDV4","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);